if(!1===MouseEvent.prototype.hasOwnProperty("pointerType")&&Object.defineProperty(MouseEvent.prototype,"pointerType",{get(){return this.sourceCapabilities.firesTouchEvents?"touch":"mouse"}}),Element.prototype.setPointerCapture){let t=Element.prototype.setPointerCapture;Element.prototype.setPointerCapture=function(e){if(t.call(this,e),!1!==this.hasPointerCapture(e)){{let t,i,s,n=!1,a=!1,l=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",i),this.removeEventListener("lostpointercapture",s)};this.addEventListener("pointerup",t=t=>{t.pointerId===e&&(n=!0,l())}),this.addEventListener("pointercancel",i=t=>{t.pointerId===e&&(a=!0,l())}),this.addEventListener("lostpointercapture",s=t=>{if(t.pointerId===e&&(l(),!1===n&&!1===a)){let t=new PointerEvent("pointercancel",{pointerId:e});this.dispatchEvent(t)}})}{let t,i,s=`* {cursor: ${getComputedStyle(this).cursor} !important; user-select: none !important; -webkit-user-select: none !important;}`,n=[];for(let t=this.parentNode||this.host;t&&t!==document;t=t.parentNode||t.host)if(t.nodeType===document.DOCUMENT_FRAGMENT_NODE){let e=document.createElementNS(t.host.namespaceURI,"style");e.textContent=s,t.append(e),n.push(e)}else if(t.nodeType===document.DOCUMENT_NODE){let e=document.createElement("style");e.textContent=s,t.head.append(e),n.push(e)}this.addEventListener("lostpointercapture",t=s=>{if(s.pointerId===e){this.removeEventListener("lostpointercapture",t),window.removeEventListener("pointerup",i,!0);for(let t of n)t.remove()}}),window.addEventListener("pointerup",i=s=>{if(s.pointerId===e){this.removeEventListener("lostpointercapture",t),window.removeEventListener("pointerup",i,!0);for(let t of n)t.remove()}},!0)}}}}Object.defineProperty(Animation.prototype,"finished",{get(){return new Promise((t=>{"finished"===this.playState?t():this.addEventListener("finish",(()=>t()),{once:!0})}))}}),window.requestIdleCallback||(window.requestIdleCallback=(t,e={})=>{let i=e.timeout||1,s=performance.now();return setTimeout((()=>{t({get didTimeout(){return!e.timeout&&performance.now()-s-1>i},timeRemaining:()=>Math.max(0,performance.now()-s+1)})}),1)}),Object.defineProperty(HTMLHeadingElement.prototype,"disabled",{enumerable:!1,configurable:!1,get(){return this.hasAttribute("disabled")},set(t){!0===t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}),Object.defineProperty(HTMLParagraphElement.prototype,"disabled",{enumerable:!1,configurable:!1,get(){return this.hasAttribute("disabled")},set(t){!0===t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}),Node.prototype.append||(Node.prototype.append=function(t){this.appendChild(t)}),Node.prototype.prepend||(Node.prototype.prepend=function(t){this.insertBefore(t,this.firstElementChild)}),Node.prototype.before||(Node.prototype.before=function(t){this.parentElement.insertBefore(t,this)}),Node.prototype.after||(Node.prototype.after=function(t){this.parentElement.insertBefore(t,this.nextElementSibling)}),Node.prototype.closest||(Node.prototype.closest=function(t){return this.parentNode?this.parentNode.closest(t):null}),Node.prototype.replaceWith||(Node.prototype.replaceWith=function(t){this.parentNode.replaceChild(t,this)});const{entries:t,setPrototypeOf:e,isFrozen:i,getPrototypeOf:s,getOwnPropertyDescriptor:n}=Object;let{freeze:a,seal:l,create:r}=Object,{apply:o,construct:h}="undefined"!=typeof Reflect&&Reflect;a||(a=function(t){return t}),l||(l=function(t){return t}),o||(o=function(t,e,i){return t.apply(e,i)}),h||(h=function(t,e){return new t(...e)});const d=E(Array.prototype.forEach),c=E(Array.prototype.pop),u=E(Array.prototype.push),p=E(String.prototype.toLowerCase),m=E(String.prototype.toString),b=E(String.prototype.match),g=E(String.prototype.replace),f=E(String.prototype.indexOf),x=E(String.prototype.trim),w=E(Object.prototype.hasOwnProperty),v=E(RegExp.prototype.test),k=(y=TypeError,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return h(y,e)});var y;const C=E(Number.isNaN);function E(t){return function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return o(t,e,s)}}function z(t,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;e&&e(t,null);let a=s.length;for(;a--;){let e=s[a];if("string"==typeof e){const t=n(e);t!==e&&(i(s)||(s[a]=t),e=t)}t[e]=!0}return t}function S(t){for(let e=0;e<t.length;e++){w(t,e)||(t[e]=null)}return t}function $(e){const i=r(null);for(const[s,n]of t(e)){w(e,s)&&(Array.isArray(n)?i[s]=S(n):n&&"object"==typeof n&&n.constructor===Object?i[s]=$(n):i[s]=n)}return i}function M(t,e){for(;null!==t;){const i=n(t,e);if(i){if(i.get)return E(i.get);if("function"==typeof i.value)return E(i.value)}t=s(t)}return function(){return null}}const L=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),A=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),P=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),T=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B=a(["#text"]),I=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),H=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),O=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),j=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),N=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F=l(/<%[\w\W]*|[\w\W]*%>/gm),G=l(/\${[\w\W]*}/gm),X=l(/^data-[\-\w.\u00B7-\uFFFF]/),_=l(/^aria-[\-\w]+$/),Z=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U=l(/^(?:\w+script|data):/i),Y=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q=l(/^html$/i),W=l(/^[a-z][.\w]*(-[.\w]+)+$/i);var V=Object.freeze({__proto__:null,MUSTACHE_EXPR:N,ERB_EXPR:F,TMPLIT_EXPR:G,DATA_ATTR:X,ARIA_ATTR:_,IS_ALLOWED_URI:Z,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:Y,DOCTYPE_NAME:q,CUSTOM_ELEMENT:W});const K=1,J=3,Q=7,tt=8,et=9,it=function(){return"undefined"==typeof window?null:window};var st=function e(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();const s=t=>e(t);if(s.version="3.1.3",s.removed=[],!i||!i.document||i.document.nodeType!==et)return s.isSupported=!1,s;let{document:n}=i;const l=n,o=l.currentScript,{DocumentFragment:h,HTMLTemplateElement:y,Node:E,Element:S,NodeFilter:N,NamedNodeMap:F=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:G,DOMParser:X,trustedTypes:_}=i,U=S.prototype,Y=M(U,"cloneNode"),W=M(U,"nextSibling"),st=M(U,"childNodes"),nt=M(U,"parentNode");if("function"==typeof y){const t=n.createElement("template");t.content&&t.content.ownerDocument&&(n=t.content.ownerDocument)}let at,lt="";const{implementation:rt,createNodeIterator:ot,createDocumentFragment:ht,getElementsByTagName:dt}=n,{importNode:ct}=l;let ut={};s.isSupported="function"==typeof t&&"function"==typeof nt&&rt&&void 0!==rt.createHTMLDocument;const{MUSTACHE_EXPR:pt,ERB_EXPR:mt,TMPLIT_EXPR:bt,DATA_ATTR:gt,ARIA_ATTR:ft,IS_SCRIPT_OR_DATA:xt,ATTR_WHITESPACE:wt,CUSTOM_ELEMENT:vt}=V;let{IS_ALLOWED_URI:kt}=V,yt=null;const Ct=z({},[...L,...A,...R,...T,...B]);let Et=null;const zt=z({},[...I,...H,...O,...j]);let St=Object.seal(r(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$t=null,Mt=null,Lt=!0,At=!0,Rt=!1,Pt=!0,Tt=!1,Dt=!0,Bt=!1,It=!1,Ht=!1,Ot=!1,jt=!1,Nt=!1,Ft=!0,Gt=!1,Xt=!0,_t=!1,Zt={},Ut=null;const Yt=z({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qt=null;const Wt=z({},["audio","video","img","source","image","track"]);let Vt=null;const Kt=z({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jt="http://www.w3.org/1998/Math/MathML",Qt="http://www.w3.org/2000/svg",te="http://www.w3.org/1999/xhtml";let ee=te,ie=!1,se=null;const ne=z({},[Jt,Qt,te],m);let ae=null;const le=["application/xhtml+xml","text/html"];let re=null,oe=null;const he=n.createElement("form"),de=function(t){return t instanceof RegExp||t instanceof Function},ce=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!oe||oe!==t){if(t&&"object"==typeof t||(t={}),t=$(t),ae=-1===le.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,re="application/xhtml+xml"===ae?m:p,yt=w(t,"ALLOWED_TAGS")?z({},t.ALLOWED_TAGS,re):Ct,Et=w(t,"ALLOWED_ATTR")?z({},t.ALLOWED_ATTR,re):zt,se=w(t,"ALLOWED_NAMESPACES")?z({},t.ALLOWED_NAMESPACES,m):ne,Vt=w(t,"ADD_URI_SAFE_ATTR")?z($(Kt),t.ADD_URI_SAFE_ATTR,re):Kt,qt=w(t,"ADD_DATA_URI_TAGS")?z($(Wt),t.ADD_DATA_URI_TAGS,re):Wt,Ut=w(t,"FORBID_CONTENTS")?z({},t.FORBID_CONTENTS,re):Yt,$t=w(t,"FORBID_TAGS")?z({},t.FORBID_TAGS,re):{},Mt=w(t,"FORBID_ATTR")?z({},t.FORBID_ATTR,re):{},Zt=!!w(t,"USE_PROFILES")&&t.USE_PROFILES,Lt=!1!==t.ALLOW_ARIA_ATTR,At=!1!==t.ALLOW_DATA_ATTR,Rt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Tt=t.SAFE_FOR_TEMPLATES||!1,Dt=!1!==t.SAFE_FOR_XML,Bt=t.WHOLE_DOCUMENT||!1,Ot=t.RETURN_DOM||!1,jt=t.RETURN_DOM_FRAGMENT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,Ht=t.FORCE_BODY||!1,Ft=!1!==t.SANITIZE_DOM,Gt=t.SANITIZE_NAMED_PROPS||!1,Xt=!1!==t.KEEP_CONTENT,_t=t.IN_PLACE||!1,kt=t.ALLOWED_URI_REGEXP||Z,ee=t.NAMESPACE||te,St=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&de(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(St.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&de(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(St.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(St.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Tt&&(At=!1),jt&&(Ot=!0),Zt&&(yt=z({},B),Et=[],!0===Zt.html&&(z(yt,L),z(Et,I)),!0===Zt.svg&&(z(yt,A),z(Et,H),z(Et,j)),!0===Zt.svgFilters&&(z(yt,R),z(Et,H),z(Et,j)),!0===Zt.mathMl&&(z(yt,T),z(Et,O),z(Et,j))),t.ADD_TAGS&&(yt===Ct&&(yt=$(yt)),z(yt,t.ADD_TAGS,re)),t.ADD_ATTR&&(Et===zt&&(Et=$(Et)),z(Et,t.ADD_ATTR,re)),t.ADD_URI_SAFE_ATTR&&z(Vt,t.ADD_URI_SAFE_ATTR,re),t.FORBID_CONTENTS&&(Ut===Yt&&(Ut=$(Ut)),z(Ut,t.FORBID_CONTENTS,re)),Xt&&(yt["#text"]=!0),Bt&&z(yt,["html","head","body"]),yt.table&&(z(yt,["tbody"]),delete $t.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw k('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw k('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');at=t.TRUSTED_TYPES_POLICY,lt=at.createHTML("")}else void 0===at&&(at=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null;const s="data-tt-policy-suffix";e&&e.hasAttribute(s)&&(i=e.getAttribute(s));const n="dompurify"+(i?"#"+i:"");try{return t.createPolicy(n,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(_,o)),null!==at&&"string"==typeof lt&&(lt=at.createHTML(""));a&&a(t),oe=t}},ue=z({},["mi","mo","mn","ms","mtext"]),pe=z({},["foreignobject","annotation-xml"]),me=z({},["title","style","font","a","script"]),be=z({},[...A,...R,...P]),ge=z({},[...T,...D]),fe=function(t){u(s.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},xe=function(t,e){try{u(s.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){u(s.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!Et[t])if(Ot||jt)try{fe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},we=function(t){let e=null,i=null;if(Ht)t="<remove></remove>"+t;else{const e=b(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===ae&&ee===te&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const s=at?at.createHTML(t):t;if(ee===te)try{e=(new X).parseFromString(s,ae)}catch(t){}if(!e||!e.documentElement){e=rt.createDocument(ee,"template",null);try{e.documentElement.innerHTML=ie?lt:s}catch(t){}}const a=e.body||e.documentElement;return t&&i&&a.insertBefore(n.createTextNode(i),a.childNodes[0]||null),ee===te?dt.call(e,Bt?"html":"body")[0]:Bt?e.documentElement:a},ve=function(t){return ot.call(t.ownerDocument||t,t,N.SHOW_ELEMENT|N.SHOW_COMMENT|N.SHOW_TEXT|N.SHOW_PROCESSING_INSTRUCTION|N.SHOW_CDATA_SECTION,null)},ke=function(t){return t instanceof G&&(void 0!==t.o&&"number"!=typeof t.o||void 0!==t.p&&"number"!=typeof t.p||"string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof F)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},ye=function(t){return"function"==typeof E&&t instanceof E},Ce=function(t,e,i){ut[t]&&d(ut[t],(t=>{t.call(s,e,i,oe)}))},Ee=function(t){let e=null;if(Ce("beforeSanitizeElements",t,null),ke(t))return fe(t),!0;const i=re(t.nodeName);if(Ce("uponSanitizeElement",t,{tagName:i,allowedTags:yt}),t.hasChildNodes()&&!ye(t.firstElementChild)&&v(/<[/\w]/g,t.innerHTML)&&v(/<[/\w]/g,t.textContent))return fe(t),!0;if(t.nodeType===Q)return fe(t),!0;if(Dt&&t.nodeType===tt&&v(/<[/\w]/g,t.data))return fe(t),!0;if(!yt[i]||$t[i]){if(!$t[i]&&Se(i)){if(St.tagNameCheck instanceof RegExp&&v(St.tagNameCheck,i))return!1;if(St.tagNameCheck instanceof Function&&St.tagNameCheck(i))return!1}if(Xt&&!Ut[i]){const e=nt(t)||t.parentNode,i=st(t)||t.childNodes;if(i&&e){for(let s=i.length-1;s>=0;--s){const n=Y(i[s],!0);n.p=(t.p||0)+1,e.insertBefore(n,W(t))}}}return fe(t),!0}return t instanceof S&&!function(t){let e=nt(t);e&&e.tagName||(e={namespaceURI:ee,tagName:"template"});const i=p(t.tagName),s=p(e.tagName);return!!se[t.namespaceURI]&&(t.namespaceURI===Qt?e.namespaceURI===te?"svg"===i:e.namespaceURI===Jt?"svg"===i&&("annotation-xml"===s||ue[s]):Boolean(be[i]):t.namespaceURI===Jt?e.namespaceURI===te?"math"===i:e.namespaceURI===Qt?"math"===i&&pe[s]:Boolean(ge[i]):t.namespaceURI===te?!(e.namespaceURI===Qt&&!pe[s])&&!(e.namespaceURI===Jt&&!ue[s])&&!ge[i]&&(me[i]||!be[i]):!("application/xhtml+xml"!==ae||!se[t.namespaceURI]))}(t)?(fe(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!v(/<\/no(script|embed|frames)/i,t.innerHTML)?(Tt&&t.nodeType===J&&(e=t.textContent,d([pt,mt,bt],(t=>{e=g(e,t," ")})),t.textContent!==e&&(u(s.removed,{element:t.cloneNode()}),t.textContent=e)),Ce("afterSanitizeElements",t,null),!1):(fe(t),!0)},ze=function(t,e,i){if(Ft&&("id"===e||"name"===e)&&(i in n||i in he||"__depth"===i||"__removalCount"===i))return!1;if(At&&!Mt[e]&&v(gt,e));else if(Lt&&v(ft,e));else if(!Et[e]||Mt[e]){if(!(Se(t)&&(St.tagNameCheck instanceof RegExp&&v(St.tagNameCheck,t)||St.tagNameCheck instanceof Function&&St.tagNameCheck(t))&&(St.attributeNameCheck instanceof RegExp&&v(St.attributeNameCheck,e)||St.attributeNameCheck instanceof Function&&St.attributeNameCheck(e))||"is"===e&&St.allowCustomizedBuiltInElements&&(St.tagNameCheck instanceof RegExp&&v(St.tagNameCheck,i)||St.tagNameCheck instanceof Function&&St.tagNameCheck(i))))return!1}else if(Vt[e]);else if(v(kt,g(i,wt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==f(i,"data:")||!qt[t]){if(Rt&&!v(xt,g(i,wt,"")));else if(i)return!1}else;return!0},Se=function(t){return"annotation-xml"!==t&&b(t,vt)},$e=function(t){Ce("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Et};let n=e.length;for(;n--;){const a=e[n],{name:l,namespaceURI:r,value:o}=a,h=re(l);let u="value"===l?o:x(o);if(i.attrName=h,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,Ce("uponSanitizeAttribute",t,i),u=i.attrValue,i.forceKeepAttr)continue;if(xe(l,t),!i.keepAttr)continue;if(!Pt&&v(/\/>/i,u)){xe(l,t);continue}if(Dt&&v(/((--!?|])>)|<\/(style|title)/i,u)){xe(l,t);continue}Tt&&d([pt,mt,bt],(t=>{u=g(u,t," ")}));const p=re(t.nodeName);if(ze(p,h,u)){if(!Gt||"id"!==h&&"name"!==h||(xe(l,t),u="user-content-"+u),at&&"object"==typeof _&&"function"==typeof _.getAttributeType)if(r);else switch(_.getAttributeType(p,h)){case"TrustedHTML":u=at.createHTML(u);break;case"TrustedScriptURL":u=at.createScriptURL(u)}try{r?t.setAttributeNS(r,l,u):t.setAttribute(l,u),ke(t)?fe(t):c(s.removed)}catch(t){}}}Ce("afterSanitizeAttributes",t,null)},Me=function t(e){let i=null;const s=ve(e);for(Ce("beforeSanitizeShadowDOM",e,null);i=s.nextNode();){if(Ce("uponSanitizeShadowNode",i,null),Ee(i))continue;const e=nt(i);i.nodeType===K&&(e&&e.o?i.o=(i.p||0)+e.o+1:i.o=1),(i.o>=255||i.o<0||C(i.o))&&fe(i),i.content instanceof h&&(i.content.o=i.o,t(i.content)),$e(i)}Ce("afterSanitizeShadowDOM",e,null)};return s.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,n=null,a=null,r=null;if(ie=!t,ie&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ye(t)){if("function"!=typeof t.toString)throw k("toString is not a function");if("string"!=typeof(t=t.toString()))throw k("dirty is not a string, aborting")}if(!s.isSupported)return t;if(It||ce(e),s.removed=[],"string"==typeof t&&(_t=!1),_t){if(t.nodeName){const e=re(t.nodeName);if(!yt[e]||$t[e])throw k("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof E)i=we("\x3c!----\x3e"),n=i.ownerDocument.importNode(t,!0),n.nodeType===K&&"BODY"===n.nodeName||"HTML"===n.nodeName?i=n:i.appendChild(n);else{if(!Ot&&!Tt&&!Bt&&-1===t.indexOf("<"))return at&&Nt?at.createHTML(t):t;if(i=we(t),!i)return Ot?null:Nt?lt:""}i&&Ht&&fe(i.firstChild);const o=ve(_t?t:i);for(;a=o.nextNode();){if(Ee(a))continue;const t=nt(a);a.nodeType===K&&(t&&t.o?a.o=(a.p||0)+t.o+1:a.o=1),(a.o>=255||a.o<0||C(a.o))&&fe(a),a.content instanceof h&&(a.content.o=a.o,Me(a.content)),$e(a)}if(_t)return t;if(Ot){if(jt)for(r=ht.call(i.ownerDocument);i.firstChild;)r.appendChild(i.firstChild);else r=i;return(Et.shadowroot||Et.shadowrootmode)&&(r=ct.call(l,r,!0)),r}let c=Bt?i.outerHTML:i.innerHTML;return Bt&&yt["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&v(q,i.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+c),Tt&&d([pt,mt,bt],(t=>{c=g(c,t," ")})),at&&Nt?at.createHTML(c):c},s.setConfig=function(){ce(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),It=!0},s.clearConfig=function(){oe=null,It=!1},s.isValidAttribute=function(t,e,i){oe||ce({});const s=re(t),n=re(e);return ze(s,n,i)},s.addHook=function(t,e){"function"==typeof e&&(ut[t]=ut[t]||[],u(ut[t],e))},s.removeHook=function(t){if(ut[t])return c(ut[t])},s.removeHooks=function(t){ut[t]&&(ut[t]=[])},s.removeAllHooks=function(){ut={}},s}();class nt{#t={};addEventListener(t,e){this.#t||(this.#t={});let i=this.#t[t];i||(this.#t[t]=i=[]),i.push(e),i.length>1e4&&console.warn(`Potential EventEmitter memory leak: ${i.length} listeners subscribed to event "${t}"`)}removeEventListener(t,e){if(this.#t&&this.#t[t]){for(var i=[],s=0;s<this.#t[t].length;s+=1)this.#t[t][s]!==e&&i.push(this.#t[t][s]);this.#t[t]=i}}dispatchEvent(t){if(!this.#t)return;let e=this.#t[t.type];if(!e)return;let i=null;for(let s=e.length-1;s>=0;s-=1){let n,a=e[s];try{n=a.call(window,t)}catch(t){null===i&&(i=t)}if(!1===n)break}if(i)throw i}}let at=(t,e,i=!1)=>{if(t.length!==e.length)return!1;if(i)for(let i in t){if(t[i]!==e[i])return!1}else{for(let i=0;i<t.length;i+=1)if(!e.includes(t[i]))return!1;for(let i=0;i<e.length;i+=1)if(!t.includes(e[i]))return!1}return!0};function lt(t,e){let i=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map((t=>[t])));let s=e[0].length,n=e[0].map(((t,i)=>e.map((t=>t[i])))),a=t.map((t=>n.map((e=>{let i=0;if(!Array.isArray(t)){for(let s of e)i+=t*s;return i}for(let s=0;s<t.length;s++)i+=t[s]*(e[s]||0);return i}))));return 1===i&&(a=a[0]),1===s?a.map((t=>t[0])):a}function rt(t){return"string"===ot(t)}function ot(t){return(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function ht(t,{precision:e,unit:i}){return dt(t)?"none":function(t,e){if(0===t)return 0;let i=~~t,s=0;i&&e&&(s=1+~~Math.log10(Math.abs(i)));const n=10**(e-s);return Math.floor(t*n+.5)/n}(t,e)+(i??"")}function dt(t){return Number.isNaN(t)||t instanceof Number&&t?.none}function ct(t){return dt(t)?0:t}const ut={deg:1,grad:.9,rad:180/Math.PI,turn:360},pt={function:/^([a-z]+)\((.+?)\)$/i,number:/^([-+]?(?:[0-9]*\.)?[0-9]+(e[-+]?[0-9]+)?)$/i,unitValue:/%|deg|g?rad|turn$/,singleArgument:/\/?\s*(none|[-+\w.]+(?:%|deg|g?rad|turn)?)/g};function mt(t,e,i){return isNaN(t)?e:isNaN(e)?t:t+(e-t)*i}function bt(t,e,i){return mt(e[0],e[1],function(t,e,i){return(i-t)/(e-t)}(t[0],t[1],i))}function gt(t,e){return Math.sign(t)===Math.sign(e)?t:-t}function ft(t,e){return gt(Math.abs(t)**e,t)}function xt(t,e){return 0===e?0:t/e}const wt=new class{add(t,e,i){if("string"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach((function(t){this[t]=this[t]||[],e&&this[t][i?"unshift":"push"](e)}),this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])}run(t,e){this[t]=this[t]||[],this[t].forEach((function(t){t.call(e&&e.context?e.context:e,e)}))}},vt={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]};function kt(t){return Array.isArray(t)?t:vt[t]}function yt(t,e,i,s={}){if(t=kt(t),e=kt(e),!t||!e)throw new TypeError(`Missing white point to convert ${t?"":"from"}${t||e?"":"/"}${e?"":"to"}`);if(t===e)return i;let n={W1:t,W2:e,XYZ:i,options:s};if(wt.run("chromatic-adaptation-start",n),n.M||(n.W1===vt.D65&&n.W2===vt.D50?n.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:n.W1===vt.D50&&n.W2===vt.D65&&(n.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),wt.run("chromatic-adaptation-end",n),n.M)return lt(n.M,n.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}var Ct={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"test"!==globalThis?.process?.env?.NODE_ENV?.toLowerCase(),warn:function(t){this.verbose&&globalThis?.console?.warn?.(t)}};const Et=new Set(["<number>","<percentage>","<angle>"]);function zt(t,e,i,s){let n=Object.entries(t.coords).map((([t,n],a)=>{let l,r=e.coordGrammar[a],o=s[a],h=o?.type;if(l=o.none?r.find((t=>Et.has(t))):r.find((t=>t==h)),!l){let e=n.name||t;throw new TypeError(`${h??o.raw} not allowed for ${e} in ${i}()`)}let d=l.range;"<percentage>"===h&&(d||=[0,1]);let c=n.range||n.refRange;return d&&c&&(s[a]=bt(d,c,s[a])),l}));return n}function St(t,{meta:e}={}){let i={str:String(t)?.trim()};if(wt.run("parse-start",i),i.color)return i.color;if(i.parsed=function(t){if(!t)return;let e=(t=t.trim()).match(pt.function);if(e){let t=[];return e[2].replace(pt.singleArgument,((e,i)=>{let s=i.match(pt.unitValue),n=i;if(s){let t=s[0],e=n.slice(0,-t.length);"%"===t?(n=new Number(e/100),n.type="<percentage>"):(n=new Number(e*ut[t]),n.type="<angle>",n.unit=t)}else pt.number.test(n)?(n=new Number(n),n.type="<number>"):"none"===n&&(n=new Number(NaN),n.none=!0);e.startsWith("/")&&(n=n instanceof Number?n:new Number(n),n.alpha=!0),"object"==typeof n&&n instanceof Number&&(n.raw=i),t.push(n)})),{name:e[1].toLowerCase(),rawName:e[1],rawArgs:e[2],args:t}}}(i.str),i.parsed){let t=i.parsed.name;if("color"===t){let t=i.parsed.args.shift(),s=t.startsWith("--")?t.substring(2):`--${t}`,n=[t,s],a=i.parsed.rawArgs.indexOf("/")>0?i.parsed.args.pop():1;for(let s of Mt.all){let l=s.getFormat("color");if(l&&(n.includes(l.id)||l.ids?.filter((t=>n.includes(t))).length)){const n=Object.keys(s.coords).map(((t,e)=>i.parsed.args[e]||0));let r;return l.coordGrammar&&(r=zt(s,l,"color",n)),e&&Object.assign(e,{formatId:"color",types:r}),l.id.startsWith("--")&&!t.startsWith("--")&&Ct.warn(`${s.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${l.id}) instead of color(${t}).`),t.startsWith("--")&&!l.id.startsWith("--")&&Ct.warn(`${s.name} is a standard space and supported in the CSS spec. Use color(${l.id}) instead of prefixed color(${t}).`),{spaceId:s.id,coords:n,alpha:a}}}let l="",r=t in Mt.registry?t:s;if(r in Mt.registry){let t=Mt.registry[r].formats?.color?.id;t&&(l=`Did you mean color(${t})?`)}throw new TypeError(`Cannot parse color(${t}). `+(l||"Missing a plugin?"))}for(let n of Mt.all){let a=n.getFormat(t);if(a&&"function"===a.type){let l=1;(a.lastAlpha||(s=i.parsed.args,s[s.length-1]).alpha)&&(l=i.parsed.args.pop());let r,o=i.parsed.args;return a.coordGrammar&&(r=zt(n,a,t,o)),e&&Object.assign(e,{formatId:a.name,types:r}),{spaceId:n.id,coords:o,alpha:l}}}}else for(let t of Mt.all)for(let s in t.formats){let n=t.formats[s];if("custom"!==n.type)continue;if(n.test&&!n.test(i.str))continue;let a=n.parse(i.str);if(a)return a.alpha??=1,e&&(e.formatId=s),a}var s;throw new TypeError(`Could not parse ${t} as a color. Missing a plugin?`)}function $t(t){if(Array.isArray(t))return t.map($t);if(!t)throw new TypeError("Empty color reference");rt(t)&&(t=St(t));let e=t.space||t.spaceId;return e instanceof Mt||(t.space=Mt.get(e)),void 0===t.alpha&&(t.alpha=1),t}class Mt{constructor(t){this.id=t.id,this.name=t.name,this.base=t.base?Mt.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let e=t.coords??this.base.coords;for(let t in e)"name"in e[t]||(e[t].name=t);this.coords=e;let i=t.white??this.base.white??"D65";this.white=kt(i),this.formats=t.formats??{};for(let t in this.formats){let e=this.formats[t];e.type||="function",e.name||=t}this.formats.color?.id||(this.formats.color={...this.formats.color??{},id:t.cssId||this.id}),t.gamutSpace?this.gamutSpace="self"===t.gamutSpace?this:Mt.get(t.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(t,e)=>!0),this.referred=t.referred,Object.defineProperty(this,"path",{value:Lt(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),wt.run("colorspace-init-end",this)}inGamut(t,{epsilon:e=75e-6}={}){if(!this.equals(this.gamutSpace))return t=this.to(this.gamutSpace,t),this.gamutSpace.inGamut(t,{epsilon:e});let i=Object.values(this.coords);return t.every(((t,s)=>{let n=i[s];if("angle"!==n.type&&n.range){if(dt(t))return!0;let[i,s]=n.range;return(void 0===i||t>=i-e)&&(void 0===s||t<=s+e)}return!0}))}get isUnbounded(){return Object.values(this.coords).every((t=>!("range"in t)))}get cssId(){return this.formats?.color?.id||this.id}get isPolar(){for(let t in this.coords)if("angle"===this.coords[t].type)return!0;return!1}getFormat(t){if("object"==typeof t)return t=At(t,this);let e;return e="default"===t?Object.values(this.formats)[0]:this.formats[t],e?(e=At(e,this),e):null}equals(t){return!!t&&(this===t||this.id===t||this.id===t.id)}to(t,e){if(1===arguments.length){const i=$t(t);[t,e]=[i.space,i.coords]}if(t=Mt.get(t),this.equals(t))return e;e=e.map((t=>dt(t)?0:t));let i,s,n=this.path,a=t.path;for(let t=0;t<n.length&&n[t].equals(a[t]);t++)i=n[t],s=t;if(!i)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let t=n.length-1;t>s;t--)e=n[t].toBase(e);for(let t=s+1;t<a.length;t++)e=a[t].fromBase(e);return e}from(t,e){if(1===arguments.length){const i=$t(t);[t,e]=[i.space,i.coords]}return(t=Mt.get(t)).to(this,e)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let t=[];for(let e in this.coords){let i=this.coords[e],s=i.range||i.refRange;t.push(s?.min??0)}return t}static registry={};static get all(){return[...new Set(Object.values(Mt.registry))]}static register(t,e){if(1===arguments.length&&(t=(e=arguments[0]).id),e=this.get(e),this.registry[t]&&this.registry[t]!==e)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=e,1===arguments.length&&e.aliases)for(let t of e.aliases)this.register(t,e);return e}static get(t,...e){if(!t||t instanceof Mt)return t;if("string"===ot(t)){let e=Mt.registry[t.toLowerCase()];if(!e)throw new TypeError(`No color space found with id = "${t}"`);return e}if(e.length)return Mt.get(...e);throw new TypeError(`${t} is not a valid color space`)}static resolveCoord(t,e){let i,s,n=ot(t);if("string"===n?t.includes(".")?[i,s]=t.split("."):[i,s]=[,t]:Array.isArray(t)?[i,s]=t:(i=t.space,s=t.coordId),i=Mt.get(i),i||(i=e),!i)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(n=ot(s),"number"===n||"string"===n&&s>=0){let t=Object.entries(i.coords)[s];if(t)return{space:i,id:t[0],index:s,...t[1]}}i=Mt.get(i);let a=s.toLowerCase(),l=0;for(let t in i.coords){let e=i.coords[t];if(t.toLowerCase()===a||e.name?.toLowerCase()===a)return{space:i,id:t,index:l,...e};l++}throw new TypeError(`No "${s}" coordinate found in ${i.name}. Its coordinates are: ${Object.keys(i.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}function Lt(t){let e=[t];for(let i=t;i=i.base;)e.push(i);return e}function At(t,{coords:e}={}){if(t.coords&&!t.coordGrammar){t.type||="function",t.name||="color",t.coordGrammar=t.coords.map((t=>t.split("|").map((t=>{let e=(t=t.trim()).match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(e){let t=new String(e[1]);return t.range=[+e[2],+e[3]],t}return t}))));let i=Object.entries(e).map((([e,i],s)=>{let n=t.coordGrammar[s][0],a=i.range||i.refRange,l=n.range,r="";return"<percentage>"==n?(l=[0,100],r="%"):"<angle>"==n&&(r="deg"),{fromRange:a,toRange:l,suffix:r}}));t.serializeCoords=(t,e)=>t.map(((t,s)=>{let{fromRange:n,toRange:a,suffix:l}=i[s];return n&&a&&(t=bt(n,a,t)),t=ht(t,{precision:e,unit:l})}))}return t}var Rt=new Mt({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]}),Pt=new Mt({id:"xyz-d50",name:"XYZ D50",white:"D50",base:Rt,fromBase:t=>yt(Rt.white,"D50",t),toBase:t=>yt("D50",Rt.white,t)});const Tt=216/24389,Dt=24/116,Bt=24389/27;let It=vt.D50;var Ht=new Mt({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:It,base:Pt,fromBase(t){let e=t.map(((t,e)=>t/It[e])).map((t=>t>Tt?Math.cbrt(t):(Bt*t+16)/116));return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>Dt?Math.pow(e[0],3):(116*e[0]-16)/Bt,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/Bt,e[2]>Dt?Math.pow(e[2],3):(116*e[2]-16)/Bt].map(((t,e)=>t*It[e]))},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function Ot(t){return(t%360+360)%360}var jt=new Mt({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Ht,fromBase(t){let e,[i,s,n]=t;return e=Math.abs(s)<.02&&Math.abs(n)<.02?NaN:180*Math.atan2(n,s)/Math.PI,[i,Math.sqrt(s**2+n**2),Ot(e)]},toBase(t){let[e,i,s]=t;return i<0&&(i=0),dt(s)&&(s=0),[e,i*Math.cos(s*Math.PI/180),i*Math.sin(s*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const Nt=25**7,Ft=Math.PI,Gt=180/Ft,Xt=Ft/180;function _t(t){const e=t*t;return e*e*e*t}function Zt(t,e,{kL:i=1,kC:s=1,kH:n=1}={}){[t,e]=$t([t,e]);let[a,l,r]=Ht.from(t),o=jt.from(Ht,[a,l,r])[1],[h,d,c]=Ht.from(e),u=jt.from(Ht,[h,d,c])[1];o<0&&(o=0),u<0&&(u=0);let p=_t((o+u)/2),m=.5*(1-Math.sqrt(p/(p+Nt))),b=(1+m)*l,g=(1+m)*d,f=Math.sqrt(b**2+r**2),x=Math.sqrt(g**2+c**2),w=0===b&&0===r?0:Math.atan2(r,b),v=0===g&&0===c?0:Math.atan2(c,g);w<0&&(w+=2*Ft),v<0&&(v+=2*Ft),w*=Gt,v*=Gt;let k,y=h-a,C=x-f,E=v-w,z=w+v,S=Math.abs(E);f*x==0?k=0:S<=180?k=E:E>180?k=E-360:E<-180?k=E+360:Ct.warn("the unthinkable has happened");let $,M=2*Math.sqrt(x*f)*Math.sin(k*Xt/2),L=(a+h)/2,A=(f+x)/2,R=_t(A);$=f*x==0?z:S<=180?z/2:z<360?(z+360)/2:(z-360)/2;let P=(L-50)**2,T=1+.015*P/Math.sqrt(20+P),D=1+.045*A,B=1;B-=.17*Math.cos(($-30)*Xt),B+=.24*Math.cos(2*$*Xt),B+=.32*Math.cos((3*$+6)*Xt),B-=.2*Math.cos((4*$-63)*Xt);let I=1+.015*A*B,H=30*Math.exp(-1*(($-275)/25)**2),O=2*Math.sqrt(R/(R+Nt)),j=(y/(i*T))**2;return j+=(C/(s*D))**2,j+=(M/(n*I))**2,j+=-1*Math.sin(2*H*Xt)*O*(C/(s*D))*(M/(n*I)),Math.sqrt(j)}const Ut=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],Yt=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],qt=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],Wt=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var Vt=new Mt({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:Rt,fromBase(t){let e=lt(Ut,t).map((t=>Math.cbrt(t)));return lt(qt,e)},toBase(t){let e=lt(Wt,t).map((t=>t**3));return lt(Yt,e)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function Kt(t,e){[t,e]=$t([t,e]);let[i,s,n]=Vt.from(t),[a,l,r]=Vt.from(e),o=i-a,h=s-l,d=n-r;return Math.sqrt(o**2+h**2+d**2)}const Jt=75e-6;function Qt(t,e,{epsilon:i=Jt}={}){t=$t(t),e||(e=t.space),e=Mt.get(e);let s=t.coords;return e!==t.space&&(s=e.from(t)),e.inGamut(s,{epsilon:i})}function te(t,e){return t=$t(t),!e||t.space.equals(e)?t.coords.slice():(e=Mt.get(e)).from(t)}function ee(t,e){t=$t(t);let{space:i,index:s}=Mt.resolveCoord(e,t.space);return te(t,i)[s]}function ie(t,e,i){return t=$t(t),e=Mt.get(e),t.coords=e.to(t.space,i),t}function se(t,e,i){if(t=$t(t),2===arguments.length&&"object"===ot(arguments[1])){let e=arguments[1];for(let i in e)se(t,i,e[i])}else{"function"==typeof i&&(i=i(ee(t,e)));let{space:s,index:n}=Mt.resolveCoord(e,t.space),a=te(t,s);a[n]=i,ie(t,s,a)}return t}function ne(t){return{space:t.space,coords:t.coords.slice(),alpha:t.alpha}}ie.returns="color",se.returns="color";const ae=Math.PI/180;var le=new Mt({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:Rt,fromBase:t=>t.map((t=>Math.max(203*t,0))),toBase:t=>t.map((t=>Math.max(t/203,0)))});const re=1.15,oe=.66,he=2610/16384,de=16384/2610,ce=.8359375,ue=2413/128,pe=18.6875,me=1.7*2523/32,be=32/(1.7*2523),ge=-.56,fe=16295499532821565e-27,xe=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],we=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],ve=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],ke=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var ye=new Mt({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:le,fromBase(t){let[e,i,s]=t,n=lt(xe,[re*e-(re-1)*s,oe*i-(oe-1)*e,s]).map((function(t){return((ce+ue*(t/1e4)**he)/(1+pe*(t/1e4)**he))**me})),[a,l,r]=lt(ve,n);return[(1+ge)*a/(1+ge*a)-fe,l,r]},toBase(t){let[e,i,s]=t,n=lt(ke,[(e+fe)/(1+ge-ge*(e+fe)),i,s]).map((function(t){return 1e4*((ce-t**be)/(pe*t**be-ue))**de})),[a,l,r]=lt(we,n),o=(a+(re-1)*r)/re;return[o,(l+(oe-1)*o)/oe,r]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Ce=new Mt({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:ye,fromBase(t){let e,[i,s,n]=t;const a=2e-4;return e=Math.abs(s)<a&&Math.abs(n)<a?NaN:180*Math.atan2(n,s)/Math.PI,[i,Math.sqrt(s**2+n**2),Ot(e)]},toBase:t=>[t[0],t[1]*Math.cos(t[2]*Math.PI/180),t[1]*Math.sin(t[2]*Math.PI/180)]});const Ee=.8359375,ze=2413/128,Se=18.6875,$e=2610/16384,Me=2523/32,Le=16384/2610,Ae=32/2523,Re=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],Pe=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],Te=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],De=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var Be=new Mt({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:le,fromBase:t=>function(t){let e=t.map((function(t){return((Ee+ze*(t/1e4)**$e)/(1+Se*(t/1e4)**$e))**Me}));return lt(Pe,e)}(lt(Re,t)),toBase(t){let e=function(t){let e=lt(Te,t),i=e.map((function(t){return 1e4*(Math.max(t**Ae-Ee,0)/(ze-Se*t**Ae))**Le}));return i}(t);return lt(De,e)}});const Ie=vt.D65,He=.42,Oe=1/He,je=2*Math.PI,Ne=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],Fe=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],Ge=[[460,451,288],[460,-891,-261],[460,-220,-6300]],Xe={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},_e={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},Ze=180/Math.PI,Ue=Math.PI/180;function Ye(t,e){return t.map((t=>{const i=ft(e*Math.abs(t)*.01,He);return 400*gt(i,t)/(i+27.13)}))}function qe(t,e,i,s,n){const a={};a.discounting=n,a.refWhite=t,a.surround=s;const l=t.map((t=>100*t));a.la=e,a.yb=i;const r=l[1],o=lt(Ne,l),h=(s=Xe[a.surround])[0];a.c=s[1],a.nc=s[2];const d=(1/(5*a.la+1))**4;a.fl=d*a.la+.1*(1-d)*(1-d)*Math.cbrt(5*a.la),a.flRoot=a.fl**.25,a.n=a.yb/r,a.z=1.48+Math.sqrt(a.n),a.nbb=.725*a.n**-.2,a.ncb=a.nbb;const c=Math.max(Math.min(h*(1-1/3.6*Math.exp((-a.la-42)/92)),1),0);a.dRgb=o.map((t=>mt(1,r/t,c))),a.dRgbInv=a.dRgb.map((t=>1/t));const u=Ye(o.map(((t,e)=>t*a.dRgb[e])),a.fl);return a.aW=a.nbb*(2*u[0]+u[1]+.05*u[2]),a}const We=qe(Ie,64/Math.PI*.2,20,"average",!1);function Ve(t,e){if(!(void 0!==t.J^void 0!==t.Q))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(void 0!==t.C^void 0!==t.M^void 0!==t.s))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(void 0!==t.h^void 0!==t.H))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(0===t.J||0===t.Q)return[0,0,0];let i=0;i=void 0!==t.h?Ot(t.h)*Ue:function(t){let e=(t%400+400)%400;const i=Math.floor(.01*e);e%=100;const[s,n]=_e.h.slice(i,i+2),[a,l]=_e.e.slice(i,i+2);return Ot((e*(l*s-a*n)-100*s*l)/(e*(l-a)-100*l))}(t.H)*Ue;const s=Math.cos(i),n=Math.sin(i);let a=0;void 0!==t.J?a=.1*ft(t.J,.5):void 0!==t.Q&&(a=.25*e.c*t.Q/((e.aW+4)*e.flRoot));let l=0;void 0!==t.C?l=t.C/a:void 0!==t.M?l=t.M/e.flRoot/a:void 0!==t.s&&(l=4e-4*t.s**2*(e.aW+4)/e.c);const r=ft(l*Math.pow(1.64-Math.pow(.29,e.n),-.73),10/9),o=.25*(Math.cos(i+2)+3.8),h=e.aW*ft(a,2/e.c/e.z),d=5e4/13*e.nc*e.ncb*o,c=h/e.nbb,u=23*(c+.305)*xt(r,23*d+r*(11*s+108*n)),p=function(t,e){const i=100/e*27.13**Oe;return t.map((t=>{const e=Math.abs(t);return gt(i*ft(e/(400-e),Oe),t)}))}(lt(Ge,[c,u*s,u*n]).map((t=>1*t/1403)),e.fl);return lt(Fe,p.map(((t,i)=>t*e.dRgbInv[i]))).map((t=>t/100))}function Ke(t,e){const i=t.map((t=>100*t)),s=Ye(lt(Ne,i).map(((t,i)=>t*e.dRgb[i])),e.fl),n=s[0]+(-12*s[1]+s[2])/11,a=(s[0]+s[1]-2*s[2])/9,l=(Math.atan2(a,n)%je+je)%je,r=.25*(Math.cos(l+2)+3.8),o=ft(5e4/13*e.nc*e.ncb*xt(r*Math.sqrt(n**2+a**2),s[0]+s[1]+1.05*s[2]+.305),.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),h=ft(e.nbb*(2*s[0]+s[1]+.05*s[2])/e.aW,.5*e.c*e.z),d=100*ft(h,2),c=4/e.c*h*(e.aW+4)*e.flRoot,u=o*h,p=u*e.flRoot,m=Ot(l*Ze),b=function(t){let e=Ot(t);e<=_e.h[0]&&(e+=360);const i=function(t,e,i=0,s=t.length){for(;i<s;){const n=i+s>>1;t[n]<e?i=n+1:s=n}return i}(_e.h,e)-1,[s,n]=_e.h.slice(i,i+2),[a,l]=_e.e.slice(i,i+2),r=(e-s)/a;return _e.H[i]+100*r/(r+(n-e)/l)}(m);return{J:d,C:u,h:m,s:50*ft(e.c*o/(e.aW+4),.5),Q:c,M:p,H:b}}new Mt({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Rt,fromBase(t){const e=Ke(t,We);return[e.J,e.M,e.h]},toBase:t=>Ve({J:t[0],M:t[1],h:t[2]},We)});const Je=vt.D65,Qe=216/24389,ti=24389/27;function ei(t){return t>8?Math.pow((t+16)/116,3):t/ti}function ii(t,e){const i=116*((s=t[1])>Qe?Math.cbrt(s):(ti*s+16)/116)-16;var s;if(0===i)return[0,0,0];const n=Ke(t,si);return[Ot(n.h),n.C,i]}const si=qe(Je,200/Math.PI*ei(50),100*ei(50),"average",!1);var ni=new Mt({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:Rt,fromBase:t=>ii(t),toBase:t=>function(t,e){let[i,s,n]=t,a=[],l=0;if(0===n)return[0,0,0];let r=ei(n);l=n>0?.00379058511492914*n**2+.608983189401032*n+.9155088574762233:9514440756550361e-21*n**2+.08693057439788597*n-21.928975842194614;let o=0,h=Infinity;for(;o<=15;){a=Ve({J:l,C:s,h:i},e);const t=Math.abs(a[1]-r);if(t<h){if(t<=2e-12)return a;h=t}l-=(a[1]-r)*l/(2*a[1]),o+=1}return Ve({J:l,C:s,h:i},e)}(t,si),formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const ai=Math.PI/180,li=[1,.007,.0228];function ri(t){t[1]<0&&(t=ni.fromBase(ni.toBase(t)));const e=Math.log(Math.max(1+li[2]*t[1]*si.flRoot,1))/li[2],i=t[0]*ai,s=e*Math.cos(i),n=e*Math.sin(i);return[t[2],s,n]}var oi={deltaE76:function(t,e){return function(t,e,i="lab"){let s=(i=Mt.get(i)).from(t),n=i.from(e);return Math.sqrt(s.reduce(((t,e,i)=>{let s=n[i];return dt(e)||dt(s)?t:t+(s-e)**2}),0))}(t,e,"lab")},deltaECMC:function(t,e,{l:i=2,c:s=1}={}){[t,e]=$t([t,e]);let[n,a,l]=Ht.from(t),[,r,o]=jt.from(Ht,[n,a,l]),[h,d,c]=Ht.from(e),u=jt.from(Ht,[h,d,c])[1];r<0&&(r=0),u<0&&(u=0);let p=n-h,m=r-u,b=(a-d)**2+(l-c)**2-m**2,g=.511;n>=16&&(g=.040975*n/(1+.01765*n));let f,x=.0638*r/(1+.0131*r)+.638;dt(o)&&(o=0),f=o>=164&&o<=345?.56+Math.abs(.2*Math.cos((o+168)*ae)):.36+Math.abs(.4*Math.cos((o+35)*ae));let w=Math.pow(r,4),v=Math.sqrt(w/(w+1900)),k=(p/(i*g))**2;return k+=(m/(s*x))**2,k+=b/(x*(v*f+1-v))**2,Math.sqrt(k)},deltaE2000:Zt,deltaEJz:function(t,e){[t,e]=$t([t,e]);let[i,s,n]=Ce.from(t),[a,l,r]=Ce.from(e),o=i-a,h=s-l;dt(n)&&dt(r)?(n=0,r=0):dt(n)?n=r:dt(r)&&(r=n);let d=n-r,c=2*Math.sqrt(s*l)*Math.sin(d/2*(Math.PI/180));return Math.sqrt(o**2+h**2+c**2)},deltaEITP:function(t,e){[t,e]=$t([t,e]);let[i,s,n]=Be.from(t),[a,l,r]=Be.from(e);return 720*Math.sqrt((i-a)**2+.25*(s-l)**2+(n-r)**2)},deltaEOK:Kt,deltaEOK2:function(t,e){[t,e]=$t([t,e]);let[i,s,n]=Vt.from(t),[a,l,r]=Vt.from(e),o=i-a,h=2*(s-l),d=2*(n-r);return Math.sqrt(o**2+h**2+d**2)},deltaEHCT:function(t,e){[t,e]=$t([t,e]);let[i,s,n]=ri(ni.from(t)),[a,l,r]=ri(ni.from(e));return Math.sqrt((i-a)**2+(s-l)**2+(n-r)**2)}};const hi={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function di(t,{method:e=Ct.gamut_mapping,space:i,deltaEMethod:s="",jnd:n=2,blackWhiteClamp:a={}}={}){if(t=$t(t),rt(arguments[1])?i=arguments[1]:i||(i=t.space),Qt(t,i=Mt.get(i),{epsilon:0}))return t;let l;if("css"===e)l=function(t,{space:e}={}){const i=.02,s=1e-4;t=$t(t),e||(e=t.space);e=Mt.get(e);const n=Mt.get("oklch");if(e.isUnbounded)return ui(t,e);const a=ui(t,n);let l=a.coords[0];if(l>=1){const i=ui(ci.WHITE,e);return i.alpha=t.alpha,ui(i,e)}if(l<=0){const i=ui(ci.BLACK,e);return i.alpha=t.alpha,ui(i,e)}if(Qt(a,e,{epsilon:0}))return ui(a,e);function r(t){const i=ui(t,e),s=Object.values(e.coords);return i.coords=i.coords.map(((t,e)=>{if("range"in s[e]){const[i,n]=s[e].range;return function(t,e,i){return Math.max(Math.min(i,e),t)}(i,t,n)}return t})),i}let o=0,h=a.coords[1],d=!0,c=ne(a),u=r(c),p=Kt(u,c);if(p<i)return u;for(;h-o>s;){const t=(o+h)/2;if(c.coords[1]=t,d&&Qt(c,e,{epsilon:0}))o=t;else if(u=r(c),p=Kt(u,c),p<i){if(i-p<s)break;d=!1,o=t}else h=t}return u}(t,{space:i});else{if("clip"===e||Qt(t,i))l=ui(t,i);else{Object.prototype.hasOwnProperty.call(hi,e)&&({method:e,jnd:n,deltaEMethod:s,blackWhiteClamp:a}=hi[e]);let r=Zt;if(""!==s)for(let t in oi)if("deltae"+s.toLowerCase()===t.toLowerCase()){r=oi[t];break}let o=di(ui(t,i),{method:"clip",space:i});if(r(t,o)>n){if(3===Object.keys(a).length){let e=Mt.resolveCoord(a.channel),i=ee(ui(t,e.space),e.id);if(dt(i)&&(i=0),i>=a.max)return ui({space:"xyz-d65",coords:vt.D65},t.space);if(i<=a.min)return ui({space:"xyz-d65",coords:[0,0,0]},t.space)}let s=Mt.resolveCoord(e),o=s.space,h=s.id,d=ui(t,o);d.coords.forEach(((t,e)=>{dt(t)&&(d.coords[e]=0)}));let c=(s.range||s.refRange)[0],u=function(t){const e=t?Math.floor(Math.log10(Math.abs(t))):0;return Math.max(parseFloat("1e"+(e-2)),1e-6)}(n),p=c,m=ee(d,h);for(;m-p>u;){let t=ne(d);t=di(t,{space:i,method:"clip"}),r(d,t)-n<u?p=ee(d,h):m=ee(d,h),se(d,h,(p+m)/2)}l=ui(d,i)}else l=o}if("clip"===e||!Qt(l,i,{epsilon:0})){let t=Object.values(i.coords).map((t=>t.range||[]));l.coords=l.coords.map(((e,i)=>{let[s,n]=t[i];return void 0!==s&&(e=Math.max(s,e)),void 0!==n&&(e=Math.min(e,n)),e}))}}return i!==t.space&&(l=ui(l,t.space)),t.coords=l.coords,t}di.returns="color";const ci={WHITE:{space:Vt,coords:[1,0,0]},BLACK:{space:Vt,coords:[0,0,0]}};function ui(t,e,{inGamut:i}={}){t=$t(t);let s=(e=Mt.get(e)).from(t),n={space:e,coords:s,alpha:t.alpha};return i&&(n=di(n,!0===i?void 0:i)),n}function pi(t,{precision:e=Ct.precision,format:i="default",inGamut:s=!0,...n}={}){let a,l=i;i=(t=$t(t)).space.getFormat(i)??t.space.getFormat("default")??Mt.DEFAULT_FORMAT;let r=t.coords.slice();if(s||=i.toGamut,s&&!Qt(t)&&(r=di(ne(t),!0===s?void 0:s).coords),"custom"===i.type){if(n.precision=e,!i.serialize)throw new TypeError(`format ${l} can only be used to parse colors, not for serialization`);a=i.serialize(r,t.alpha,n)}else{let s=i.name||"color";i.serializeCoords?r=i.serializeCoords(r,e):null!==e&&(r=r.map((t=>ht(t,{precision:e}))));let n=[...r];if("color"===s){let e=i.id||i.ids?.[0]||t.space.id;n.unshift(e)}let l=t.alpha;null!==e&&(l=ht(l,{precision:e}));let o=t.alpha>=1||i.noAlpha?"":`${i.commas?",":" /"} ${l}`;a=`${s}(${n.join(i.commas?", ":" ")}${o})`}return a}ui.returns="color";let{max:mi,pow:bi,sqrt:gi,PI:fi}=Math,xi=(t,e=0)=>{let i=bi(10,e);return Math.round(t*i)/i},wi=(t,e=0)=>new DOMRect(xi(t.x,e),xi(t.y,e),xi(t.width,e),xi(t.height,e)),vi=(t,e,i=Infinity,s=null)=>(null!==s&&(t=xi(t,s)),t<e?t=e:t>i&&(t=i),t),ki=(t,e)=>{t=+t,e=+e;let i=(Math.floor(t)+"").length;if(e>i)return+t.toFixed(e-i);{let s=10**(i-e);return Math.round(t/s)*s}},yi=t=>{if(isFinite(t)){let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i+=1;return i}return 0},Ci=(t,e)=>{let i=e.x-t.x;i*=i;let s=e.y-t.y;return s*=s,gi(i+s)},Ei=(t,e,i)=>{let[s,n]=[t.x,t.y],[a,l]=[e.x,e.y],r=Math.PI/180*i,o=Math.cos(r),h=Math.sin(r);return new DOMPoint(o*(s-a)-h*(n-l)+a,o*(n-l)+h*(s-a)+l)};class zi extends Mt{constructor(t){t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=Rt),t.toXYZ_M&&t.fromXYZ_M&&(t.toBase??=e=>{let i=lt(t.toXYZ_M,e);return this.white!==this.base.white&&(i=yt(this.white,this.base.white,i)),i},t.fromBase??=e=>(e=yt(this.base.white,this.white,e),lt(t.fromXYZ_M,e))),t.referred??="display",super(t)}}var Si=new zi({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M:[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]]}),$i=new zi({id:"a98rgb",cssId:"a98-rgb",name:"Adobe® 98 RGB compatible",base:Si,toBase:t=>t.map((t=>Math.pow(Math.abs(t),563/256)*Math.sign(t))),fromBase:t=>t.map((t=>Math.pow(Math.abs(t),256/563)*Math.sign(t)))});const Mi=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var Li=new zi({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:Mi}),Ai={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Ri=Array(3).fill("<percentage> | <number>[0, 255]"),Pi=Array(3).fill("<number>[0, 255]");var Ti=new zi({id:"srgb",name:"sRGB",base:Li,fromBase:t=>t.map((t=>{let e=t<0?-1:1,i=t*e;return i>.0031308?e*(1.055*i**(1/2.4)-.055):12.92*t})),toBase:t=>t.map((t=>{let e=t<0?-1:1,i=t*e;return i<=.04045?t/12.92:e*((i+.055)/1.055)**2.4})),formats:{rgb:{coords:Ri},rgb_number:{name:"rgb",commas:!0,coords:Pi,noAlpha:!0},color:{},rgba:{coords:Ri,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Pi},hex:{type:"custom",toGamut:!0,test:t=>/^#([a-f0-9]{3,4}){1,2}$/i.test(t),parse(t){t.length<=5&&(t=t.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return t.replace(/[a-f0-9]{2}/gi,(t=>{e.push(parseInt(t,16)/255)})),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(t,e,{collapse:i=!0}={})=>{e<1&&t.push(e),t=t.map((t=>Math.round(255*t)));let s=i&&t.every((t=>t%17==0));return"#"+t.map((t=>s?(t/17).toString(16):t.toString(16).padStart(2,"0"))).join("")}},keyword:{type:"custom",test:t=>/^[a-z]+$/i.test(t),parse(t){let e={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(t=t.toLowerCase())?(e.coords=Ai.black,e.alpha=0):e.coords=Ai[t],e.coords)return e}}}}),Di=new Mt({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Ti,fromBase:t=>{let e=Math.max(...t),i=Math.min(...t),[s,n,a]=t,[l,r,o]=[NaN,0,(i+e)/2],h=e-i;if(0!==h){switch(r=0===o||1===o?0:(e-o)/Math.min(o,1-o),e){case s:l=(n-a)/h+(n<a?6:0);break;case n:l=(a-s)/h+2;break;case a:l=(s-n)/h+4}l*=60}return r<0&&(l+=180,r=Math.abs(r)),l>=360&&(l-=360),[l,100*r,100*o]},toBase:t=>{let[e,i,s]=t;function n(t){let n=(t+e/30)%12,a=i*Math.min(s,1-s);return s-a*Math.max(-1,Math.min(n-3,9-n,1))}return e%=360,e<0&&(e+=360),i/=100,s/=100,[n(0),n(8),n(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}});function Bi(t){let[e,i,s]=te(t,Rt),n=e+15*i+3*s;return[4*e/n,9*i/n]}let Ii=vt.D65;const Hi=216/24389,Oi=24389/27,[ji,Ni]=Bi({space:Rt,coords:Ii});var Fi=new Mt({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:Ii,base:Rt,fromBase(t){let e=[ct(t[0]),ct(t[1]),ct(t[2])],i=e[1],[s,n]=Bi({space:Rt,coords:e});if(!Number.isFinite(s)||!Number.isFinite(n))return[0,0,0];let a=i<=Hi?Oi*i:116*Math.cbrt(i)-16;return[a,13*a*(s-ji),13*a*(n-Ni)]},toBase(t){let[e,i,s]=t;if(0===e||dt(e))return[0,0,0];i=ct(i),s=ct(s);let n=i/(13*e)+ji,a=s/(13*e)+Ni,l=e<=8?e/Oi:Math.pow((e+16)/116,3);return[l*(9*n/(4*a)),l,l*((12-3*n-20*a)/(4*a))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Gi=new Mt({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Fi,fromBase(t){let e,[i,s,n]=t;return e=Math.abs(s)<.02&&Math.abs(n)<.02?NaN:180*Math.atan2(n,s)/Math.PI,[i,Math.sqrt(s**2+n**2),Ot(e)]},toBase(t){let[e,i,s]=t;return i<0&&(i=0),dt(s)&&(s=0),[e,i*Math.cos(s*Math.PI/180),i*Math.sin(s*Math.PI/180)]},formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const Xi=216/24389,_i=24389/27,Zi=Mi[0][0],Ui=Mi[0][1],Yi=Mi[0][2],qi=Mi[1][0],Wi=Mi[1][1],Vi=Mi[1][2],Ki=Mi[2][0],Ji=Mi[2][1],Qi=Mi[2][2];function ts(t,e,i){const s=e/(Math.sin(i)-t*Math.cos(i));return s<0?Infinity:s}function es(t){const e=Math.pow(t+16,3)/1560896,i=e>Xi?e:t/_i,s=i*(284517*Zi-94839*Yi),n=i*(838422*Yi+769860*Ui+731718*Zi),a=i*(632260*Yi-126452*Ui),l=i*(284517*qi-94839*Vi),r=i*(838422*Vi+769860*Wi+731718*qi),o=i*(632260*Vi-126452*Wi),h=i*(284517*Ki-94839*Qi),d=i*(838422*Qi+769860*Ji+731718*Ki),c=i*(632260*Qi-126452*Ji);return{r0s:s/a,r0i:n*t/a,r1s:s/(a+126452),r1i:(n-769860)*t/(a+126452),g0s:l/o,g0i:r*t/o,g1s:l/(o+126452),g1i:(r-769860)*t/(o+126452),b0s:h/c,b0i:d*t/c,b1s:h/(c+126452),b1i:(d-769860)*t/(c+126452)}}function is(t,e){const i=e/360*Math.PI*2,s=ts(t.r0s,t.r0i,i),n=ts(t.r1s,t.r1i,i),a=ts(t.g0s,t.g0i,i),l=ts(t.g1s,t.g1i,i),r=ts(t.b0s,t.b0i,i),o=ts(t.b1s,t.b1i,i);return Math.min(s,n,a,l,r,o)}var ss=new Mt({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Gi,gamutSpace:Ti,fromBase(t){let e,[i,s,n]=[ct(t[0]),ct(t[1]),ct(t[2])];if(i>99.9999999)e=0,i=100;else if(i<1e-8)e=0,i=0;else{e=s/is(es(i),n)*100}return[n,e,i]},toBase(t){let e,[i,s,n]=[ct(t[0]),ct(t[1]),ct(t[2])];if(n>99.9999999)n=100,e=0;else if(n<1e-8)n=0,e=0;else{e=is(es(n),i)/100*s}return[n,e,i]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),ns=new Mt({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Di,fromBase(t){let[e,i,s]=t;i/=100,s/=100;let n=s+i*Math.min(s,1-s);return[e,0===n?0:200*(1-s/n),100*n]},toBase(t){let[e,i,s]=t;i/=100,s/=100;let n=s*(1-i/2);return[e,0===n||1===n?0:(s-n)/Math.min(n,1-n)*100,100*n]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),as=new Mt({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:ns,fromBase(t){let[e,i,s]=t;return[e,s*(100-i)/100,100-s]},toBase(t){let[e,i,s]=t;i/=100,s/=100;let n=i+s;if(n>=1){return[e,0,100*(i/n)]}let a=1-s;return[e,100*(0===a?0:1-i/a),100*a]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const ls=2*Math.PI,rs=[[4.076741636075958,-3.307711539258063,.2309699031821043],[-1.2684379732850315,2.609757349287688,-.341319376002657],[-.0041960761386756,-.7034186179359362,1.7076146940746117]],os=[[[-1.8817031,-.80936501],[1.19086277,1.76576728,.59662641,.75515197,.56771245]],[[1.8144408,-1.19445267],[.73956515,-.45954404,.08285427,.12541073,-.14503204]],[[.13110758,1.81333971],[1.35733652,-.00915799,-1.1513021,-.50559606,.00692167]]],hs=Number.MAX_VALUE,ds=.206,cs=.03,us=(1+ds)/(1+cs);function ps(t,e){let i=t.length;if(i!==e.length)throw new Error(`Vectors of size ${i} and ${e.length} are not aligned`);let s=0;return t.forEach(((t,i)=>{s+=t*e[i]})),s}function ms(t){return.5*(us*t-ds+Math.sqrt((us*t-ds)*(us*t-ds)+4*cs*us*t))}function bs(t){return(t**2+ds*t)/(us*(t+cs))}function gs(t){let[e,i]=t;return[i/e,i/(1-e)]}function fs(t,e){return lt(e,lt(Wt,t).map((t=>t**3)))}function xs(t,e,i,s){let n=function(t,e,i,s){let n,a,l,r,o,h,d,c;ps(s[0][0],[t,e])>1?([n,a,l,r,o]=s[0][1],[h,d,c]=i[0]):ps(s[1][0],[t,e])>1?([n,a,l,r,o]=s[1][1],[h,d,c]=i[1]):([n,a,l,r,o]=s[2][1],[h,d,c]=i[2]);let u=n+a*t+l*e+r*t**2+o*t*e,p=ps(Wt[0].slice(1),[t,e]),m=ps(Wt[1].slice(1),[t,e]),b=ps(Wt[2].slice(1),[t,e]),g=1+u*p,f=1+u*m,x=1+u*b,w=h*g**3+d*f**3+c*x**3,v=h*(3*p*g**2)+d*(3*m*f**2)+c*(3*b*x**2);return u-=w*v/(v**2-.5*w*(h*(6*p**2*g)+d*(6*m**2*f)+c*(6*b**2*x))),u}(t,e,i,s),a=fs([1,n*t,n*e],i),l=ft(1/Math.max(...a),1/3);return[l,l*n]}function ws(t,e,i){let[s,n,a]=t,l=xs(n,a,e,i),r=function(t,e,i,s,n,a,l,r){let o;if(void 0===r&&(r=xs(t,e,a,l)),(i-n)*r[1]-(r[0]-n)*s<=0)o=r[1]*n/(s*r[0]+r[1]*(n-i));else{o=r[1]*(n-1)/(s*(r[0]-1)+r[1]*(n-i));let l=i-n,h=s,d=ps(Wt[0].slice(1),[t,e]),c=ps(Wt[1].slice(1),[t,e]),u=ps(Wt[2].slice(1),[t,e]),p=l+h*d,m=l+h*c,b=l+h*u,g=n*(1-o)+o*i,f=o*s,x=g+f*d,w=g+f*c,v=g+f*u,k=x**3,y=w**3,C=v**3,E=3*p*x**2,z=3*m*w**2,S=3*b*v**2,$=6*p**2*x,M=6*m**2*w,L=6*b**2*v,A=ps(a[0],[k,y,C])-1,R=ps(a[0],[E,z,S]),P=R/(R*R-.5*A*ps(a[0],[$,M,L])),T=-A*P,D=ps(a[1],[k,y,C])-1,B=ps(a[1],[E,z,S]),I=B/(B*B-.5*D*ps(a[1],[$,M,L])),H=-D*I,O=ps(a[2],[k,y,C])-1,j=ps(a[2],[E,z,S]),N=j/(j*j-.5*O*ps(a[2],[$,M,L])),F=-O*N;T=P>=0?T:hs,H=I>=0?H:hs,F=N>=0?F:hs,o+=Math.min(T,Math.min(H,F))}return o}(n,a,s,1,s,e,i,l),o=gs(l),h=r/Math.min(s*o[0],(1-s)*o[1]),d=function(t,e){return[.11516993+1/(7.4477897+4.1590124*e+t*(1.75198401*e-2.19557347+t*(-2.13704948-10.02301043*e+t*(5.38770819*e-4.24894561+4.69891013*t)))),.11239642+1/(1.6132032-.68124379*e+t*(.40370612+.90148123*e+t*(.6122399*e-.27087943+t*(.00299215-.45399568*e-.14661872*t))))]}(n,a),c=s*d[0],u=(1-s)*d[1],p=.9*h*Math.sqrt(Math.sqrt(1/(1/c**4+1/u**4)));return c=.4*s,u=.8*(1-s),[Math.sqrt(1/(1/c**2+1/u**2)),p,r]}var vs=new Mt({id:"okhsl",name:"Okhsl",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},l:{range:[0,1],name:"Lightness"}},base:Vt,gamutSpace:"self",fromBase:t=>function(t,e,i){let s=t[0],n=0,a=ms(s),l=Math.sqrt(t[1]**2+t[2]**2),r=.5+Math.atan2(-t[2],-t[1])/ls;if(0!==a&&1!==a&&0!==l){let a,r,o,h,d=t[1]/l,c=t[2]/l,[u,p,m]=ws([s,d,c],e,i),b=.8;l<p?(r=b*u,o=1-r/p,h=l/(r+o*l),n=h*b):(a=p,r=.2*p**2*1.5625/u,o=1-r/(m-p),h=(l-a)/(r+o*(l-a)),n=b+.2*h)}return[Ot(360*r),n,a]}(t,rs,os),toBase:t=>function(t,e,i){let[s,n,a]=t,l=bs(a),r=0,o=0;if(s=Ot(s)/360,0!==l&&1!==l&&0!==n){let t,a,h,d,c=Math.cos(ls*s),u=Math.sin(ls*s),[p,m,b]=ws([l,c,u],e,i),g=.8;n<g?(t=1.25*n,a=0,h=g*p,d=1-h/m):(t=5*(n-.8),a=m,h=.2*m**2*1.5625/p,d=1-h/(b-m));let f=a+t*h/(1-d*t);r=f*c,o=f*u}return[l,r,o]}(t,rs,os),formats:{color:{id:"--okhsl",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});var ks=new Mt({id:"okhsv",name:"Okhsv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},v:{range:[0,1],name:"Value"}},base:Vt,gamutSpace:"self",fromBase:t=>function(t,e,i){let s=t[0],n=0,a=ms(s),l=Math.sqrt(t[1]**2+t[2]**2),r=.5+Math.atan2(-t[2],-t[1])/ls;if(0!==s&&1!==s&&0!==l){let r=t[1]/l,o=t[2]/l,h=xs(r,o,e,i),[d,c]=gs(h),u=.5,p=1-u/d,m=c/(l+s*c),b=m*s,g=m*l,f=bs(b),x=g*f/b,[w,v,k]=fs([f,r*x,o*x],e),y=ft(1/Math.max(Math.max(w,v),Math.max(k,0)),1/3);s/=y,l/=y,l=l*ms(s)/s,s=ms(s),a=s/b,n=(u+c)*g/(c*u+c*p*g)}return[Ot(360*r),n,a]}(t,rs,os),toBase:t=>function(t,e,i){let[s,n,a]=t;s=Ot(s)/360;let l=bs(a),r=0,o=0;if(0!==l&&0!==n){let t=Math.cos(ls*s),h=Math.sin(ls*s),d=xs(t,h,e,i),[c,u]=gs(d),p=.5,m=1-p/c,b=1-n*p/(p+u-u*m*n),g=n*u*p/(p+u-u*m*n);l=a*b;let f=a*g,x=bs(b),w=g*x/b,v=bs(l);f=f*v/l,l=v;let[k,y,C]=fs([x,t*w,h*w],e),E=ft(1/Math.max(Math.max(k,y),Math.max(C,0)),1/3);l*=E,f*=E,r=f*t,o=f*h}return[l,r,o]}(t,rs,os),formats:{color:{id:"--okhsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),ys=new Mt({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:Vt,fromBase(t){let e,[i,s,n]=t;const a=2e-4;return e=Math.abs(s)<a&&Math.abs(n)<a?NaN:180*Math.atan2(n,s)/Math.PI,[i,Math.sqrt(s**2+n**2),Ot(e)]},toBase(t){let e,i,[s,n,a]=t;return dt(a)?(e=0,i=0):(e=n*Math.cos(a*Math.PI/180),i=n*Math.sin(a*Math.PI/180)),[s,e,i]},formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}});var Cs=new zi({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]}),Es=new zi({id:"p3",cssId:"display-p3",name:"P3",base:Cs,fromBase:Ti.fromBase,toBase:Ti.toBase});var zs=new zi({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:Pt,toXYZ_M:[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],fromXYZ_M:[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]]});const Ss=1/512;var $s=new zi({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:zs,toBase:t=>t.map((t=>t<.03125?t/16:t**1.8)),fromBase:t=>t.map((t=>t>=Ss?t**(1/1.8):16*t))});var Ms=new zi({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M:[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]]});const Ls=1.09929682680944,As=.018053968510807;var Rs=new zi({id:"rec2020",name:"REC.2020",base:Ms,toBase:t=>t.map((function(t){return t<4.5*As?t/4.5:Math.pow((t+Ls-1)/Ls,1/.45)})),fromBase:t=>t.map((function(t){return t>=As?Ls*Math.pow(t,.45)-(Ls-1):4.5*t}))});let{isNaN:Ps}=Number;Mt.register($i),Mt.register(Di),Mt.register(ss),Mt.register(ns),Mt.register(as),Mt.register(jt),Mt.register(Ht),Mt.register(ks),Mt.register(vs),Mt.register(Vt),Mt.register(ys),Mt.register(Es),Mt.register($s),Mt.register(Rs),Mt.register(Ti),Mt.register(Li),Mt.register(Pt),Mt.register(Rt),Mt.register(le);let Ts=(t,e="hex",i=3)=>{if(void 0===t.spaceId&&(t.spaceId=t.space.id),"hex"===e||"hex-alt"===e){let i=pi(ui(t,"srgb"),{format:"hex"});return"hex-alt"===e?i.toUpperCase():i}if("hsl"===e||"hsl-alt"===e){let[s,n,a]=ui(t,"hsl").coords,l=t.alpha;if(Ps(s)&&(s=0),s=ki(s,i),n=ki(n,i),a=ki(a,i),"hsl"===e)return l=ki(100*l,i),100===l?`hsl(${s}deg ${n}% ${a}%)`:`hsl(${s}deg ${n}% ${a}% / ${l}%)`;if("hsl-alt"===e)return l=ki(l,i),1===l?`hsl(${s} ${n}% ${a}%)`:`hsl(${s} ${n}% ${a}% / ${l})`}else if("hwb"===e||"hwb-alt"===e){let[s,n,a]=ui(t,"hwb").coords,l=t.alpha;if(Ps(s)&&(s=0),s=ki(s,i),n=ki(n,i),a=ki(a,i),"hwb"===e)return l=ki(100*l,i),100===l?`hwb(${s}deg ${n}% ${a}%)`:`hwb(${s}deg ${n}% ${a}% / ${l}%)`;if("hwb-alt"===e)return l=ki(l,i),1===l?`hwb(${s} ${n}% ${a}%)`:`hwb(${s} ${n}% ${a}% / ${l})`}else if("rgb"===e||"rgb-alt"===e){let[s,n,a]=ui(t,"srgb").coords,l=t.alpha;if("rgb"===e)return s=ki(100*s,i),n=ki(100*n,i),a=ki(100*a,i),l=ki(100*l,i),100===l?`rgb(${s}% ${n}% ${a}%)`:`rgb(${s}% ${n}% ${a}% / ${l}%)`;if("rgb-alt"===e)return s=ki(255*s,i),n=ki(255*n,i),a=ki(255*a,i),l=ki(l,i),1===l?`rgb(${s} ${n} ${a})`:`rgb(${s} ${n} ${a} / ${l})`}else if("color"===e||"color-alt"===e)if(["srgb","srgb-linear","a98rgb","prophoto","p3","rec2020","hsl","hwb"].includes(t.spaceId)){"hsl"!==t.spaceId&&"hwb"!==t.spaceId||void 0===(t=ui(t,"srgb")).spaceId&&(t.spaceId=t.space.id);let[s,n,a]=t.coords,l=t.alpha,r=Ds(t.spaceId,"css");if("color"===e)return s=ki(100*s,i),n=ki(100*n,i),a=ki(100*a,i),l=ki(100*l,i),100===l?`color(${r} ${s}% ${n}% ${a}%)`:`color(${r} ${s}% ${n}% ${a}% / ${l}%)`;if("color-alt"===e)return s=ki(s,i),n=ki(n,i),a=ki(a,i),l=ki(l,i),1===l?`color(${r} ${s} ${n} ${a})`:`color(${r} ${s} ${n} ${a} / ${l})`}else{if(!["xyz","xyz-d50","xyz-d65"].includes(t.spaceId))throw new Error(`"Color in "${t.spaceId}" space can't be serialized to "${e}" format.`);{let[s,n,a]=t.coords,l=t.alpha,r=t.spaceId;if("color"===e)return s=ki(100*s,i),n=ki(100*n,i),a=ki(100*a,i),l=ki(100*l,i),"xyz"===r&&(r="xyz-d65"),100===l?`color(${r} ${s}% ${n}% ${a}%)`:`color(${r} ${s}% ${n}% ${a}% / ${l}%)`;if("color-alt"===e)return s=ki(s,i),n=ki(n,i),a=ki(a,i),l=ki(l,i),"xyz-d65"===r&&(r="xyz"),1===l?`color(${r} ${s} ${n} ${a})`:`color(${r} ${s} ${n} ${a} / ${l})`}}else if("oklch"===e||"oklch-alt"===e){let[s,n,a]=ui(t,"oklch").coords,l=t.alpha;if("oklch"===e)return s=ki(100*s,i),n=ki(n/.4*100,i),a=ki(a,i),l=ki(100*l,i),100===l?`oklch(${s}% ${n}% ${a}deg)`:`oklch(${s}% ${n}% ${a}deg / ${l}%)`;if("oklch-alt"===e)return s=ki(s,i),n=ki(n,i),a=ki(a,i),l=ki(l,i),1===l?`oklch(${s} ${n} ${a})`:`oklch(${s} ${n} ${a} / ${l})`}else if("oklab"===e||"oklab-alt"===e){let[s,n,a]=ui(t,"oklab").coords,l=t.alpha;if("oklab"===e)return s=ki(100*s,i),n=ki(n/.4*100,i),a=ki(a/.4*100,i),l=ki(100*l,i),100===l?`oklab(${s}% ${n}% ${a}%)`:`oklab(${s}% ${n}% ${a}% / ${l}%)`;if("oklab-alt"===e)return s=ki(s,i),n=ki(n,i),a=ki(a,i),l=ki(l,i),1===l?`oklab(${s} ${n} ${a})`:`oklab(${s} ${n} ${a} / ${l})`}else if("lch"===e||"lch-alt"===e){let[s,n,a]=ui(t,"lch").coords,l=t.alpha;if("lch"===e)return s=ki(s,i),n=ki(n/150*100,i),a=ki(a,i),l=ki(100*l,i),100===l?`lch(${s}% ${n}% ${a}deg)`:`lch(${s}% ${n}% ${a}deg / ${l}%)`;if("lch-alt"===e)return s=ki(s,i),n=ki(n,i),a=ki(a,i),l=ki(l,i),1===l?`lch(${s} ${n} ${a})`:`lch(${s} ${n} ${a} / ${l})`}else{if("lab"!==e&&"lab-alt"!==e)throw new Error(`Unknown color format "${e}".`);{let[s,n,a]=ui(t,"lab").coords,l=t.alpha;if("lab"===e)return s=ki(s,i),n=ki(n/125*100,i),a=ki(a/125*100,i),l=ki(100*l,i),100===l?`lab(${s}% ${n}% ${a}%)`:`lab(${s}% ${n}% ${a}% / ${l}%)`;if("lab-alt"===e)return s=ki(s,i),n=ki(n,i),a=ki(a,i),l=ki(l,i),1===l?`lab(${s} ${n} ${a})`:`lab(${s} ${n} ${a} / ${l})`}}},Ds=(t,e="css")=>("css"===e?"p3"===t?t="display-p3":"a98rgb"===t?t="a98-rgb":"prophoto"===t&&(t="prophoto-rgb"):"color.js"===e&&("display-p3"===t?t="p3":"a98-rgb"===t?t="a98rgb":"prophoto-rgb"===t&&(t="prophoto")),"xyz"===t&&(t="xyz-d65"),t),Bs=t=>{try{St(t)}catch(t){return!1}return!0},Is=document.createElement("template"),Hs=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=i.join("");Is.innerHTML=s;let n=document.importNode(Is.content,!0);return 1===n.children.length?n.firstElementChild:n},Os=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=i.join(""),n=new CSSStyleSheet;return n.replaceSync(s),n},js=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=`<svg id="x-stub" xmlns="http://www.w3.org/2000/svg">${i.join("")}</svg>`;Is.innerHTML=s;let n=document.importNode(Is.content,!0),a=n.querySelector("svg#x-stub");if(1===a.children.length)return a.firstElementChild;for(let t of[...a.childNodes])n.appendChild(t);return a.remove(),n},Ns={},Fs=t=>new Promise((async e=>{if(Ns[t])Ns[t].icons?e(Ns[t].icons):Ns[t].callbacks.push(e);else{Ns[t]={callbacks:[e],icons:null};let i=null;try{i=await(await fetch(t)).text()}catch(t){i=null}if(i){Ns[t].icons=js`${i}`;for(let e of Ns[t].callbacks)e(Ns[t].icons)}else console.error(`Xel failed to fetch the icons: ${t}`)}}));class Gs{constructor(t){this.value=t}valueOf(){return this.value}}class Xs extends Gs{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}}class _s extends Gs{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),this.value.toString(10)}}}class Zs extends Gs{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),new Date(this.value).toISOString()}}}const Us=100,Ys="⁨",qs="⁩";function Ws(t,e,i){if(i===e)return!0;if(i instanceof _s&&e instanceof _s&&i.value===e.value)return!0;if(e instanceof _s&&"string"==typeof i){if(i===t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value))return!0}return!1}function Vs(t,e,i){return e[i]?tn(t,e[i].value):(t.reportError(new RangeError("No default")),new Xs)}function Ks(t,e){const i=[],s=Object.create(null);for(const n of e)"narg"===n.type?s[n.name]=Js(t,n.value):i.push(Js(t,n));return{positional:i,named:s}}function Js(t,e){switch(e.type){case"str":return e.value;case"num":return new _s(e.value,{minimumFractionDigits:e.precision});case"var":return function(t,{name:e}){let i;if(t.params){if(!Object.prototype.hasOwnProperty.call(t.params,e))return new Xs(`$${e}`);i=t.params[e]}else{if(!t.args||!Object.prototype.hasOwnProperty.call(t.args,e))return t.reportError(new ReferenceError(`Unknown variable: $${e}`)),new Xs(`$${e}`);i=t.args[e]}if(i instanceof Gs)return i;switch(typeof i){case"string":return i;case"number":return new _s(i);case"object":if(i instanceof Date)return new Zs(i.getTime());default:return t.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof i}`)),new Xs(`$${e}`)}}(t,e);case"mesg":return function(t,{name:e,attr:i}){const s=t.bundle.k.get(e);if(!s)return t.reportError(new ReferenceError(`Unknown message: ${e}`)),new Xs(e);if(i){const n=s.attributes[i];return n?tn(t,n):(t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new Xs(`${e}.${i}`))}if(s.value)return tn(t,s.value);return t.reportError(new ReferenceError(`No value: ${e}`)),new Xs(e)}(t,e);case"term":return function(t,{name:e,attr:i,args:s}){const n=`-${e}`,a=t.bundle.S.get(n);if(!a)return t.reportError(new ReferenceError(`Unknown term: ${n}`)),new Xs(n);if(i){const e=a.attributes[i];if(e){t.params=Ks(t,s).named;const i=tn(t,e);return t.params=null,i}return t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new Xs(`${n}.${i}`)}t.params=Ks(t,s).named;const l=tn(t,a.value);return t.params=null,l}(t,e);case"func":return function(t,{name:e,args:i}){let s=t.bundle.$[e];if(!s)return t.reportError(new ReferenceError(`Unknown function: ${e}()`)),new Xs(`${e}()`);if("function"!=typeof s)return t.reportError(new TypeError(`Function ${e}() is not callable`)),new Xs(`${e}()`);try{let e=Ks(t,i);return s(e.positional,e.named)}catch(i){return t.reportError(i),new Xs(`${e}()`)}}(t,e);case"select":return function(t,{selector:e,variants:i,star:s}){let n=Js(t,e);if(n instanceof Xs)return Vs(t,i,s);for(const e of i){if(Ws(t,n,Js(t,e.key)))return tn(t,e.value)}return Vs(t,i,s)}(t,e);default:return new Xs}}function Qs(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new Xs;t.dirty.add(e);const i=[],s=t.bundle.L&&e.length>1;for(const n of e)if("string"!=typeof n){if(t.placeables++,t.placeables>Us)throw t.dirty.delete(e),new RangeError(`Too many placeables expanded: ${t.placeables}, max allowed is ${Us}`);s&&i.push(Ys),i.push(Js(t,n).toString(t)),s&&i.push(qs)}else i.push(t.bundle.A(n));return t.dirty.delete(e),i.join("")}function tn(t,e){return"string"==typeof e?t.bundle.A(e):Qs(t,e)}class en{constructor(t,e,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=e,this.args=i}reportError(t){if(!(this.errors&&t instanceof Error))throw t;this.errors.push(t)}memoizeIntlObject(t,e){let i=this.bundle.R.get(t);i||(i={},this.bundle.R.set(t,i));let s=JSON.stringify(e);return i[s]||(i[s]=new t(this.bundle.locales,e)),i[s]}}function sn(t,e){const i=Object.create(null);for(const[s,n]of Object.entries(t))e.includes(s)&&(i[s]=n.valueOf());return i}const nn=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function an(t,e){let i=t[0];if(i instanceof Xs)return new Xs(`NUMBER(${i.valueOf()})`);if(i instanceof _s)return new _s(i.valueOf(),{...i.opts,...sn(e,nn)});if(i instanceof Zs)return new _s(i.valueOf(),{...sn(e,nn)});throw new TypeError("Invalid argument to NUMBER")}const ln=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function rn(t,e){let i=t[0];if(i instanceof Xs)return new Xs(`DATETIME(${i.valueOf()})`);if(i instanceof Zs)return new Zs(i.valueOf(),{...i.opts,...sn(e,ln)});if(i instanceof _s)return new Zs(i.valueOf(),{...sn(e,ln)});throw new TypeError("Invalid argument to DATETIME")}const on=new Map;class hn{constructor(t,{functions:e,useIsolating:i=!0,transform:s=(t=>t)}={}){this.S=new Map,this.k=new Map,this.locales=Array.isArray(t)?t:[t],this.$={NUMBER:an,DATETIME:rn,...e},this.L=i,this.A=s,this.R=function(t){const e=Array.isArray(t)?t.join(" "):t;let i=on.get(e);return void 0===i&&(i=new Map,on.set(e,i)),i}(t)}hasMessage(t){return this.k.has(t)}getMessage(t){return this.k.get(t)}addResource(t,{allowOverrides:e=!1}={}){const i=[];for(let s=0;s<t.body.length;s++){let n=t.body[s];if(n.id.startsWith("-")){if(!1===e&&this.S.has(n.id)){i.push(new Error(`Attempt to override an existing term: "${n.id}"`));continue}this.S.set(n.id,n)}else{if(!1===e&&this.k.has(n.id)){i.push(new Error(`Attempt to override an existing message: "${n.id}"`));continue}this.k.set(n.id,n)}}return i}formatPattern(t,e=null,i=null){if("string"==typeof t)return this.A(t);let s=new en(this,i,e);try{return Qs(s,t).toString(s)}catch(t){if(s.errors&&t instanceof Error)return s.errors.push(t),(new Xs).toString(s);throw t}}}const dn=/^(-?[a-zA-Z][\w-]*) *= */gm,cn=/\.([a-zA-Z][\w-]*) *= */y,un=/\*?\[/y,pn=/(-?[0-9]+(?:\.([0-9]+))?)/y,mn=/([a-zA-Z][\w-]*)/y,bn=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,gn=/^[A-Z][A-Z0-9_-]*$/,fn=/([^{}\n\r]+)/y,xn=/([^\\"\n\r]*)/y,wn=/\\([\\"])/y,vn=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,kn=/^\n+/,yn=/ +$/,Cn=/ *\r?\n/g,En=/( *)$/,zn=/{\s*/y,Sn=/\s*}/y,$n=/\[\s*/y,Mn=/\s*] */y,Ln=/\s*\(\s*/y,An=/\s*->\s*/y,Rn=/\s*:\s*/y,Pn=/\s*,?\s*/y,Tn=/\s+/y;class Dn{constructor(t){this.body=[],dn.lastIndex=0;let e=0;for(;;){let i=dn.exec(t);if(null===i)break;e=dn.lastIndex;try{this.body.push(r(i[1]))}catch(t){if(t instanceof SyntaxError)continue;throw t}}function i(i){return i.lastIndex=e,i.test(t)}function s(i,s){if(t[e]===i)return e++,!0;if(s)throw new s(`Expected ${i}`);return!1}function n(t,s){if(i(t))return e=t.lastIndex,!0;if(s)throw new s(`Expected ${t.toString()}`);return!1}function a(i){i.lastIndex=e;let s=i.exec(t);if(null===s)throw new SyntaxError(`Expected ${i.toString()}`);return e=i.lastIndex,s}function l(t){return a(t)[1]}function r(t){let e=o(),s=function(){let t=Object.create(null);for(;i(cn);){let e=l(cn),i=o();if(null===i)throw new SyntaxError("Expected attribute value");t[e]=i}return t}();if(null===e&&0===Object.keys(s).length)throw new SyntaxError("Expected message value or attributes");return{id:t,value:e,attributes:s}}function o(){let s;if(i(fn)&&(s=l(fn)),"{"===t[e]||"}"===t[e])return h(s?[s]:[],Infinity);let n=f();return n?s?h([s,n],n.length):(n.value=x(n.value,kn),h([n],n.length)):s?x(s,yn):null}function h(s=[],n){for(;;){if(i(fn)){s.push(l(fn));continue}if("{"===t[e]){s.push(d());continue}if("}"===t[e])throw new SyntaxError("Unbalanced closing brace");let a=f();if(!a)break;s.push(a),n=Math.min(n,a.length)}let a=s.length-1,r=s[a];"string"==typeof r&&(s[a]=x(r,yn));let o=[];for(let t of s)t instanceof Bn&&(t=t.value.slice(0,t.value.length-n)),t&&o.push(t);return o}function d(){n(zn,SyntaxError);let t=c();if(n(Sn))return t;if(n(An)){let e=function(){let t,e=[],n=0;for(;i(un);){s("*")&&(t=n);let i=p(),a=o();if(null===a)throw new SyntaxError("Expected variant value");e[n++]={key:i,value:a}}if(0===n)return null;if(void 0===t)throw new SyntaxError("Expected default variant");return{variants:e,star:t}}();return n(Sn,SyntaxError),{type:"select",selector:t,...e}}throw new SyntaxError("Unclosed placeable")}function c(){if("{"===t[e])return d();if(i(bn)){let[,i,s,l=null]=a(bn);if("$"===i)return{type:"var",name:s};if(n(Ln)){let a=function(){let i=[];for(;;){switch(t[e]){case")":return e++,i;case void 0:throw new SyntaxError("Unclosed argument list")}i.push(u()),n(Pn)}}();if("-"===i)return{type:"term",name:s,attr:l,args:a};if(gn.test(s))return{type:"func",name:s,args:a};throw new SyntaxError("Function names must be all upper-case")}return"-"===i?{type:"term",name:s,attr:l,args:[]}:{type:"mesg",name:s,attr:l}}return m()}function u(){let t=c();return"mesg"!==t.type?t:n(Rn)?{type:"narg",name:t.name,value:m()}:t}function p(){let t;return n($n,SyntaxError),t=i(pn)?b():{type:"str",value:l(mn)},n(Mn,SyntaxError),t}function m(){if(i(pn))return b();if('"'===t[e])return function(){s('"',SyntaxError);let i="";for(;;){if(i+=l(xn),"\\"!==t[e]){if(s('"'))return{type:"str",value:i};throw new SyntaxError("Unclosed string literal")}i+=g()}}();throw new SyntaxError("Invalid expression")}function b(){let[,t,e=""]=a(pn),i=e.length;return{type:"num",value:parseFloat(t),precision:i}}function g(){if(i(wn))return l(wn);if(i(vn)){let[,t,e]=a(vn),i=parseInt(t||e,16);return i<=55295||57344<=i?String.fromCodePoint(i):"�"}throw new SyntaxError("Unknown escape sequence")}function f(){let i=e;switch(n(Tn),t[e]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return w(t.slice(i,e))}return" "===t[e-1]&&w(t.slice(i,e))}function x(t,e){return t.replace(e,"")}function w(t){let e=t.replace(Cn,"\n"),i=En.exec(t)[1].length;return new Bn(e,i)}}}class Bn{constructor(t,e){this.value=t,this.length=e}}let In,Hn,On=()=>(void 0===Hn&&(Hn=navigator.userAgent.indexOf("Firefox/")>-1?"gecko":navigator.userAgent.indexOf("Chrome")>-1?"chromium":navigator.userAgent.indexOf("Safari/")>-1?"webkit":"other"),Hn),jn=t=>new Promise(((e,i)=>{setTimeout((()=>e()),t)})),Nn=()=>Date.now(),Fn=(t,e=500,i)=>{let s=null,n=null,a=null,l=0,r=()=>{l=new Date,n=null,a=t.apply(i,s)};return(...o)=>{let h=new Date,d=e-(h-l);return s=o,d<=0?(clearTimeout(n),n=null,l=h,a=t.apply(i,s)):n||(n=setTimeout(r,d)),a}};var Gn=new class extends nt{get theme(){return this.#e}set theme(t){let e=document.head.querySelector(':scope > meta[name="xel-theme"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-theme"),document.head.append(e)),e.setAttribute("content",t)}get icons(){return[...this.#i]}set icons(t){let e=document.head.querySelector(':scope > meta[name="xel-icons"]');e||(e=document.head.querySelector(':scope > meta[name="xel-iconsets"]'),e&&console.warn('<meta name="xel-iconsets"> has been deprecated. Please use <meta name="xel-icons"> instead.'),e||(e=document.createElement("meta"),e.setAttribute("name","xel-icons"),document.head.append(e))),e.setAttribute("content",t.join(", "))}get locales(){return[...this.#s]}set locales(t){let e=document.head.querySelector(':scope > meta[name="xel-locales"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-locales"),document.head.append(e)),e.setAttribute("content",t.join(", "))}get locale(){return this.#n[0]||"en"}get accentColor(){return this.#a}set accentColor(t){let e=document.head.querySelector(':scope > meta[name="xel-accent-color"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-accent-color"),document.head.append(e)),e.setAttribute("content",t)}get whenThemeReady(){return new Promise((t=>{null===this.#l?t():this.#l.push(t)}))}get whenIconsReady(){return new Promise((t=>{null===this.#r?t():this.#r.push(t)}))}get whenLocalesReady(){return new Promise((t=>{null===this.#o?t():this.#o.push(t)}))}get themeStyleSheet(){return this.#h}get presetAccentColors(){let t={};for(let e of this.#h.cssRules)if(1===e.type&&"body"===e.selectorText){let i=e.style.getPropertyValue("--preset-accent-colors");if(""!==i){let e=i.split(",").map((t=>t.trim())).map((t=>t.split(" ")));t=Object.fromEntries(e);break}}return t}get autocapitalize(){return this.#d}queryIcon(t){t=!1===t.startsWith("#")?"#"+t:t;let e=null;for(let i of this.#c){let s=i.querySelector(t);if(s){e=s;break}}return e}queryMessage(t,e={}){t=t.startsWith("#")?t.substring(1):t;let[i,s]=t.split("."),n=this.#u.getMessage(i),a=null,l=!1,r="text";return void 0===e.os&&(e.os=(void 0===In&&(In=!0===navigator.platform.startsWith("Mac")?"macos":-1!==["iPhone","iPad","iPod"].indexOf(navigator.platform)?"ios":-1!==["Win32","Win64","Windows","WinCE"].indexOf(navigator.platform)?"windows":/CrOS/.test(navigator.userAgent)?"chromeos":/Android/.test(navigator.userAgent)?"android":/Linux/.test(navigator.platform)?"linux":null),In)),void 0===s&&(s=null),n&&(null===s?n.value&&(a=this.#u.formatPattern(n.value,e)):n.attributes?.[s]&&(a=this.#u.formatPattern(n.attributes[s],e))),null===a?(a=null===s?i:`${i}.${s}`,l=!0):/<|&#?\w+;/.test(a)&&(r="html",a=st.sanitize(a,{USE_PROFILES:{html:!0}})),{id:i,attribute:s,format:r,content:a,fallback:l}}getConfig(t,e=null){let i=localStorage.getItem(t);return null===i?e:JSON.parse(i)}setConfig(t,e){let i=localStorage.getItem(t);null===e?delete localStorage[t]:localStorage.setItem(t,JSON.stringify(e)),i!==localStorage.getItem(t)&&this.dispatchEvent(new CustomEvent("configchange",{detail:{key:t,value:e,origin:"self"}}))}clearConfig(){if(localStorage.length>0){let t=Object.keys(localStorage);localStorage.clear();for(let e of t)this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:null,origin:"self"}}))}}#e=null;#a=null;#i=[];#s=[];#n=[];#d="none";#h=new CSSStyleSheet;#c=[];#u=null;#l=[];#r=[];#o=[];constructor(){super(),document.adoptedStyleSheets=[this.#h];let{theme:t,accentColor:e,icons:i,locales:s}=this.#p();this.#e=t,this.#a=e,this.#i=i,this.#s=s,this.#n=this.#s.map((t=>{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))})),null!==this.#e&&this.#m(this.#e),this.#i.length>0&&this.#b(this.#i),this.#s.length>0&&this.#g(this.#s);new MutationObserver((t=>this.#f(t))).observe(document.head,{attributes:!0,subtree:!0});window.addEventListener("storage",(t=>this.#x(t)))}#f(t){let e=this.#e,i=this.#a,s=this.#i,n=this.#s,{theme:a,accentColor:l,icons:r,locales:o}=this.#p();this.#e=a,this.#a=l,this.#i=r,this.#s=o,this.#n=this.#s.map((t=>{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))})),this.#e!==e&&this.#m(this.#e).then((()=>{this.dispatchEvent(new CustomEvent("themechange"))})),this.#a!==i&&(this.#w(),this.dispatchEvent(new CustomEvent("accentcolorchange"))),!1===at(this.#i,s,!0)&&this.#b(this.#i).then((()=>{this.dispatchEvent(new CustomEvent("iconschange")),this.dispatchEvent(new CustomEvent("iconsetschange"))})),!1===at(this.#s,n,!0)&&this.#g(this.#s).then((()=>{this.dispatchEvent(new CustomEvent("localeschange"))}))}#x(t){if(t.storageArea===window.localStorage){let e=t.key,i=null===t.newValue?null:JSON.parse(t.newValue);this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:i,origin:"other"}}))}}#v(t){return new Promise((async e=>{let i=await fetch(t),s=await i.text();for(let[t,e]of this.#k(s)){let i=await this.#v(t);s=s.replace(e,i)}e(s)}))}#m(t){return new Promise((async e=>{null===this.#l&&(this.#l=[]);let i=await this.#v(t);if(this.#h.replaceSync(i),this.#y(),this.#w(),this.#C(),null!==this.#l){for(let t of this.#l)t();this.#l=null}e()}))}#b(t){return new Promise((async e=>{null===this.#r&&(this.#r=[]),this.#c=[];for(let e of t){let t=await Fs(e);this.#c.push(t)}for(let t of this.#r)t();this.#r=null,e()}))}#g(t){return new Promise((async e=>{null===this.#o&&(this.#o=[]);let i=t.map((t=>{if(t.startsWith("blob:")){return t.substring(t.lastIndexOf("#")+1)}{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))}}));0===i.length&&i.push("en");let s=new hn([i[0]],{useIsolating:!1,functions:{RELDATETIME:(t=[],e={})=>{let s;if(t[0]instanceof _s)s=new Date(t[0].value);else{if("string"!=typeof t[0])throw new TypeError("Invalid argument to RELDATETIME");s=new Date(parseInt(t[0]))}return((t,e=new Date,i=["en"])=>{let s,n=3600,a=86400,l=604800,r=t.getTime(),o=e.getTime(),h=new Intl.RelativeTimeFormat(i,{numeric:"always"}),d=Math.round((o-r)/1e3);if(d<0?(s=1,d=-d):s=-1,d<60)return h.format(d*s,"seconds");if(d<n)return h.format(Math.round(d*s/60),"minutes");if(d<a)return h.format(Math.round(d*s/n),"hours");if(d<l)return h.format(Math.round(d*s/a),"days");if(d<4233600)return h.format(Math.round(d*s/l),"weeks");{let i=12*(t.getFullYear()-e.getFullYear());return i-=e.getMonth(),i+=t.getMonth(),Math.abs(i)>12?i<0?h.format(Math.ceil(i/12),"years"):h.format(Math.floor(i/12),"years"):h.format(i,"months")}})(s,new Date,i)}}});for(let e=t.length-1;e>=0;e-=1){let i=t[e],n=await(await fetch(i)).text(),a=new Dn(n),l=s.addResource(a,{allowOverrides:!0});l.length&&console.info("Found localization syntax errors",l)}this.#u=s,this.#y();for(let t of this.#o)t();this.#o=null,e()}))}#y(){this.#u?.locales[0]?.startsWith("en")?this.#d=getComputedStyle(document.body).getPropertyValue("--autocapitalize").trim()||"none":this.#d="none"}async#C(){await this.whenThemeReady;let t=document.head.querySelector('meta[name="theme-color"]'),e=getComputedStyle(document.body).getPropertyValue("--titlebar-color").trim()||"auto";"auto"===e?t&&t.remove():(null===t&&(t=document.createElement("meta"),t.setAttribute("name","theme-color"),document.head.append(t)),t.setAttribute("content",e))}async#w(){await this.whenThemeReady;let t=this.#a||this.presetAccentColors.blue;this.presetAccentColors[t]&&(t=this.presetAccentColors[t]);let e=ui(St(t),"hsl"),[i,s,n]=e.coords,a=[...this.#h.cssRules].reverse().find((t=>1===t.type&&"body"===t.selectorText));Number.isNaN(i)&&(i=0),a.style.setProperty("--accent-color-h",i),a.style.setProperty("--accent-color-s",`${s}%`),a.style.setProperty("--accent-color-l",`${n}%`),a.style.setProperty("--accent-color-a",e.alpha)}#p(){let t=document.head.querySelector(':scope > meta[name="xel-theme"]'),e=document.head.querySelector(':scope > meta[name="xel-accent-color"]'),i=document.head.querySelector(':scope > meta[name="xel-icons"]'),s=document.head.querySelector(':scope > meta[name="xel-locales"]');return i||(i=document.head.querySelector(':scope > meta[name="xel-iconsets"]'),i&&console.warn('<meta name="xel-iconsets"> has been deprecated in in Xel 0.27.0. Please use <meta name="xel-icons"> instead.')),{theme:t&&""!==t.content?t.content:null,accentColor:e&&""!==e.content?e.content:null,icons:i?i.content.split(",").map((t=>t.trim())).filter((t=>""!==t)):[],locales:s?s.content.split(",").map((t=>t.trim())).filter((t=>""!==t)):[]}}#k(t){let e=[],i=-1;for(;;){let s=t.indexOf("@import",i);if(!(s>-1))break;{let n=t.indexOf(";",s),a=0,l=t.indexOf(".css",s)+4,r=t.indexOf("'",s),o=t.indexOf('"',s);if(r>s&&r<n)a=r+1;else if(o>s&&o<n)a=o+1;else{let e=t.indexOf("url(",s);e>s&&e<n&&(a=e+4)}let h=t.substring(a,l);e.push([h,t.substring(s,n+1)]),i=l}}return e}get iconsets(){return console.warn('"Xel.iconsets" has been deprecated in Xel 0.27.0. Please use "Xel.icons" instead.'),this.icons}set iconsets(t){console.warn('"Xel.iconsets" has been deprecated in Xel 0.27.0. Please use "Xel.icons" instead.'),this.icons=t}get whenIconsetsReady(){return console.warn('"Xel.whenIconsetsReady" has been deprecated in Xel 0.27.0. Please use "Xel.whenIconsReady" instead.'),this.whenIconsReady}};let Xn=(t,e=null)=>{let i=t.split(":"),s=null;if(1===i.length){let[t]=i;s=null===e?document.createElement(t):document.createElement(t,e)}else if(2===i.length){let[t,e]=i;"svg"===t&&(s=document.createElementNS("http://www.w3.org/2000/svg",e))}return s},_n=(t,e)=>{let i=e.getBoundingClientRect();return t.clientX>=i.x&&t.clientX<=i.x+i.width&&t.clientY>=i.y&&t.clientY<=i.y+i.height},Zn=(t,e,i=!0)=>{let s=t.closest(e);return i&&!s&&t.getRootNode().host?Zn(t.getRootNode().host,e):s},Un=t=>{let e=t=>t&&t!==document.body?(t=>{let e=getComputedStyle(t,null);return/(auto|scroll)/.test(e.getPropertyValue("overflow")+e.getPropertyValue("overflow-y")+e.getPropertyValue("overflow-x"))})(t)&&"x-texteditor"!==t.localName?t:e(t.parentElement||t.parentNode.host):document.body;return e(t.parentElement||t.parentNode.host)},Yn=HTMLDialogElement.prototype.showModal,qn=HTMLDialogElement.prototype.close,Wn=[],Vn={get open(){return this.hasAttribute("open")},showModal(){return new Promise((async t=>{if(!0!==this.open&&!1!==this.isConnected){this.P&&await this.P.finished,this.T&&await this.T.finished,Yn.apply(this,arguments);{let t;document.body.style.overflow="hidden",Wn.push(this),this.addEventListener("close",t=e=>{e.target===this&&(this.removeEventListener("close",t),Wn=Wn.filter((t=>t!==this)),0===Wn.length&&(document.body.style.overflow=null))})}{let t=this.querySelector("[autofocus]");t?t.focus():this.focus()}if(!1===this.hasAttribute("hidden")){let t=getComputedStyle(this),e=t.getPropertyValue("transition-property"),i=1e3*parseFloat(t.getPropertyValue("transition-duration")),s=t.getPropertyValue("transition-timing-function"),n=this.getBoundingClientRect();"transform"===e&&("0px"===getComputedStyle(this).left&&"0px"!==getComputedStyle(this).right?this.P=this.animate({transform:[`translateX(-${n.right}px)`,"translateX(0px)"]},{duration:i,easing:s}):"0px"===getComputedStyle(this).right&&"0px"!==getComputedStyle(this).left?this.P=this.animate({transform:[`translateX(${n.width}px)`,"translateX(0px)"]},{duration:i,easing:s}):"0px"===getComputedStyle(this).marginTop&&"0px"===getComputedStyle(this).marginBottom?this.P=this.animate({transform:[`translateY(-${n.bottom}px)`,"translateY(0px)"]},{duration:i,easing:s}):this.P=this.animate({transform:["scaleY(0)","scaleY(1)"]},{duration:i,easing:s}))}{let t,e,i;this.addEventListener("keydown",t=t=>{"Escape"===t.code&&t.preventDefault()}),document.addEventListener("keydown",e=t=>{"Escape"===t.code&&t.target===document.body&&t.preventDefault()}),this.addEventListener("close",i=s=>{s.target===this&&(this.removeEventListener("close",i),this.removeEventListener("keydown",t),document.removeEventListener("keydown",e))})}{let t,e,i,s=!0;this.addEventListener("pointerdown",t=t=>{s=!1===_n(t,this)}),this.addEventListener("click",e=t=>{t.target===this&&!0===t.isTrusted&&!1===t.defaultPrevented&&!0===s&&!1===_n(t,this)&&!0===this.hasAttribute("open")&&(this.close(),this.dispatchEvent(new CustomEvent("userclose")))}),this.addEventListener("close",i=s=>{s.target===this&&(this.removeEventListener("pointerdown",t),this.removeEventListener("click",e),this.removeEventListener("close",i))})}this.P&&(await this.P.finished,this.P=null),t()}else t()}))},close(){return new Promise((async t=>{if(this.P&&await this.P.finished,this.T&&await this.T.finished,!1===this.hasAttribute("hidden")){let t=getComputedStyle(this),e=t.getPropertyValue("transition-property"),i=t.getPropertyValue("transition-duration")||"0s",s=1e3*parseFloat(i),n=t.getPropertyValue("transition-timing-function")||"ease",a=this.getBoundingClientRect();"transform"===e&&("0px"===getComputedStyle(this).left&&"0px"!==getComputedStyle(this).right?this.T=this.animate({transform:["translateX(0px)",`translateX(-${a.right}px)`]},{duration:s,easing:n}):"0px"===getComputedStyle(this).right&&"0px"!==getComputedStyle(this).left?this.T=this.animate({transform:["translateX(0px)",`translateX(${a.width}px)`]},{duration:s,easing:n}):"0px"===getComputedStyle(this).marginTop&&"0px"===getComputedStyle(this).marginBottom?this.T=this.animate({transform:["translateY(0px)",`translateY(-${a.bottom+50}px)`]},{duration:s,easing:n}):this.T=this.animate({transform:["scaleY(1)","scaleY(0)"]},{duration:s,easing:n}))}this.T&&(await this.T.finished,this.T=null),this.hasAttribute("open")&&qn.apply(this,arguments),t()}))}};for(let[t,e]of Object.entries(Object.getOwnPropertyDescriptors(Vn)))Object.defineProperty(HTMLDialogElement.prototype,t,e);class Kn extends HTMLElement{static observedAttributes=["expanded"];static#E=Hs`<template><main id="main"><div id="arrow-container"><svg id="arrow" part="arrow" viewBox="0 0 100 100" preserveAspectRatio="none" tabindex="1"><path id="arrow-path"></path></svg></div><slot></slot></main></template>`;static#z=Os`:host{display:block;width:100%;margin:8px 0;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:.5}:host([animating]){overflow:hidden}#main{position:relative;width:100%;height:100%}#arrow-container{position:absolute;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:flex-start;pointer-events:none}#arrow{display:flex;width:16px;height:16px;transform:rotate(0);transition:transform .25s cubic-bezier(.4, 0, .2, 1);color:currentColor;--path-data:M 26 20 L 26 80 L 74 50 Z}#arrow:focus{background:0 0;outline:0}:host([expanded]) #arrow{transform:rotate(90deg)}#arrow-path{fill:currentColor}`;get expanded(){return this.hasAttribute("expanded")}set expanded(t){t?this.setAttribute("expanded",""):this.removeAttribute("expanded")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#$=null;#M=null;#L=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Kn.#z],this.#S.append(document.importNode(Kn.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$=new ResizeObserver((()=>this.#A())),this.addEventListener("click",(t=>this.#R(t))),this["#arrow"].addEventListener("keydown",(t=>this.#P(t)))}connectedCallback(){this.#T(),Gn.addEventListener("themechange",this.#L=()=>this.#T()),this.#$.observe(this)}disconnectedCallback(){Gn.removeEventListener("themechange",this.#L),this.#$.unobserve(this)}attributeChangedCallback(t,e,i){e!==i&&"expanded"===t&&this.#A()}expand(t=!0){return new Promise((async e=>{if(!1===this.expanded){let e=this.getBoundingClientRect();if(this.#M&&this.#M.finish(),this.removeAttribute("animating"),t){this.expanded=!0;let t=this.getBoundingClientRect();this.setAttribute("animating","");let i=this.animate({height:[e.height+"px",t.height+"px"]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});this.#M=i,await i.finished,this.#M===i&&this.removeAttribute("animating")}else this["#arrow"].style.transition="none",this.expanded=!0,this["#arrow"].style.transition=null}e()}))}collapse(t=!0){return new Promise((async e=>{if(!0===this.expanded){let e=this.getBoundingClientRect();if(this.#M&&this.#M.finish(),this.removeAttribute("animating"),t){this.expanded=!1;let t=this.getBoundingClientRect();this.setAttribute("animating","");let i=this.animate({height:[e.height+"px",t.height+"px"]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});this.#M=i,await i.finished,this.#M===i&&this.removeAttribute("animating")}else this["#arrow"].style.transition="none",this.expanded=!1,this["#arrow"].style.transition=null}e()}))}#A(){let t=this.querySelector(":scope > header");this["#arrow-container"].style.height=t?t.getBoundingClientRect().height+"px":null}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#P(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||this.querySelector("header").click()}#R(t){let e=this.querySelector("header"),i=t.target.closest("[tabindex]");e.contains(t.target)&&!1===this.contains(i)&&(this.expanded?(this.collapse(),this.dispatchEvent(new CustomEvent("collapse"))):(this.expand(),this.dispatchEvent(new CustomEvent("expand"))))}}customElements.define("x-accordion",Kn);class Jn extends HTMLElement{static#z=Os`:host{display:block;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;touch-action:none;cursor:default;background:rgba(0,0,0,.5)}:host([hidden]){display:none}`;get ownerElement(){return this.#D?this.#D:document.body.firstElementChild}set ownerElement(t){this.#D=t}#S=null;#D=null;#B=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Jn.#z],this.addEventListener("pointerdown",(t=>t.preventDefault()))}connectedCallback(){this.addEventListener("wheel",this.#B=t=>t.preventDefault())}disconnectedCallback(){this.removeEventListener("wheel",this.#B)}show(t=!0){this.title="",this.style.top="0px",this.style.left="0px",this.ownerElement.before(this),this.hidden=!1;let e=this.getBoundingClientRect(),i=0,s=0;0===e.top&&0===e.left||(i=-e.top,s=-e.left);{let t=parseFloat(getComputedStyle(this.ownerElement).zIndex);this.style.zIndex=t-1}if(this.style.top=i+"px",this.style.left=s+"px",t){return this.animate({opacity:["0","1"]},{duration:100,easing:"ease-out"}).finished}}hide(t=!0){if(t){let t=this.animate({opacity:["1","0"]},{duration:100,easing:"ease-in"});return t.finished.then((()=>{this.remove()})),t.finished}this.remove()}}customElements.define("x-backdrop",Jn);class Qn extends HTMLElement{static#E=Hs`<template><slot></slot></template>`;static#z=Os`:host{display:flex;box-sizing:border-box;align-items:center;justify-content:flex-start}:host([vertical]){flex-flow:column;align-items:flex-start;justify-content:center}:host([hidden]){display:none}`;get vertical(){return this.hasAttribute("vertical")}set vertical(t){t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Qn.#z],this.#S.append(document.importNode(Qn.#E.content,!0))}}customElements.define("x-box",Qn);class ta extends HTMLElement{static observedAttributes=["disabled","skin"];static#E=Hs`<template><slot></slot><svg id="arrow" part="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></template>`;static#z=Os`:host{display:flex;align-items:center;justify-content:center;width:fit-content;height:fit-content;min-height:32px;padding:2px 14px;box-sizing:border-box;opacity:1;position:relative}:host(:focus){outline:0}:host(:focus:not(:active)){z-index:1}:host([mixed]){opacity:.75}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}#arrow{color:currentColor;width:8px;height:8px;min-width:8px;margin:0 0 0 4px;--path-data:M 11.7 19.9 L 49.8 57.9 L 87.9 19.9 L 99.7 31.6 L 49.8 81.4 L -0.0 31.6 Z}#arrow path{fill:currentColor}#arrow[hidden]{display:none}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get togglable(){return this.hasAttribute("togglable")}set togglable(t){t?this.setAttribute("togglable",""):this.removeAttribute("togglable")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get condensed(){return this.hasAttribute("condensed")}set condensed(t){t?this.setAttribute("condensed",""):this.removeAttribute("condensed")}get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):null}set skin(t){null===t?this.removeAttribute("skin"):this.setAttribute("skin",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get expanded(){return this.hasAttribute("expanded")}get expandable(){return this.#I()||this.#H()}get ownerButtons(){if(this.parentElement){if("x-buttons"===this.parentElement.localName)return this.parentElement;if(["a","x-box"].includes(this.parentElement.localName)&&this.parentElement.parentElement&&"x-buttons"===this.parentElement.parentElement.localName)return this.parentElement.parentElement}return null}#S=null;#O=!1;#j=null;#N=0;#L=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[ta.#z],this.#S.append(document.importNode(ta.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("pointerenter",(()=>this.#G())),this.addEventListener("pointerleave",(()=>this.#X())),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#_(t))),this.addEventListener("close",(t=>this.#Z(t))),(async()=>{await customElements.whenDefined("x-backdrop"),this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)"})()}connectedCallback(){this.parentElement&&"a"===this.parentElement.localName&&-1!==this.parentElement.tabIndex&&(this.parentElement.tabIndex=-1),this.#T(),this.#U(),this.#Y(),this.#q(),Gn.addEventListener("themechange",this.#L=()=>this.#T())}disconnectedCallback(){Gn.removeEventListener("themechange",this.#L)}attributeChangedCallback(t){"disabled"===t?this.#Y():"skin"===t&&this.#q()}expand(){return new Promise((async t=>{this.#I()?await this.#W():this.#H()&&await this.#V(),t()}))}collapse(t=null){return new Promise((async e=>{this.#K()?await this.#J(t):this.#Q()&&await this.#tt(t),e()}))}#W(){return new Promise((async t=>{if(this.#I()){let t=this.querySelector(":scope > x-menu"),e=this.querySelector(":scope > x-tooltip");e&&e.close(!1),this.#O=this.matches(":focus"),this.setAttribute("expanded",""),this["#backdrop"].ownerElement=t,this["#backdrop"].show(!1),await t.openNextToElement(this,"vertical",3),t.focus()}t()}))}#J(t=null){return new Promise((async e=>{if(this.#K()){let e=this.querySelector(":scope > x-menu");if(e.setAttribute("closing",""),await t,e.close(),this["#backdrop"].hide(!1),this.removeAttribute("expanded"),"chromium"===On()&&this.replaceWith(this),this.#O)this.focus();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}e.removeAttribute("closing")}e()}))}#I(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-menu");if(e&&!1===e.hasAttribute("opened")&&!1===e.hasAttribute("closing")){null!==e.querySelector("x-menuitem")&&(t=!0)}}return t}#K(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-menu");e&&e.opened&&(t=!0)}return t}#V(){return new Promise((async t=>{if(this.#H()){let t=this.querySelector(":scope > x-popover"),e=this.querySelector(":scope > x-tooltip");e&&e.close(!1),this.#O=this.matches(":focus"),this.setAttribute("expanded",""),await t.open(this)}t()}))}#tt(t=null){return new Promise((async e=>{if(this.#Q()){let e=this.querySelector(":scope > x-popover");if(e.setAttribute("closing",""),await t,await e.close(),this.removeAttribute("expanded"),e.modal&&"chromium"===On()&&this.replaceWith(this),this.#O)this.focus();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}e.removeAttribute("closing")}e()}))}#H(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-popover");e&&!1===e.hasAttribute("opened")&&(t=!0)}return t}#Q(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-popover");e&&e.opened&&(t=!0)}return t}#et(){return new Promise((t=>{if(this.#it()){this.querySelector(":scope > dialog").showModal()}t()}))}#it(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > dialog");e&&!1===e.hasAttribute("open")&&!1===e.hasAttribute("closing")&&(t=!0)}return t}#st(){return new Promise((t=>{if(this.#nt()){this.querySelector(":scope > x-notification").opened=!0}t()}))}#nt(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-notification");!e||e.hasAttribute("opened")||e.hasAttribute("closing")||(t=!0)}return t}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#U(){let t=this.querySelector(":scope > x-menu, :scope > x-popover");this["#arrow"].style.display=t?null:"none"}#Y(){this.setAttribute("role","button"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#q(){!1===this.hasAttribute("skin")&&this.setAttribute("skin","default")}#F(t){let e=this.querySelector(":scope > x-menu[opened]"),i=this.querySelector(":scope > x-popover[opened]"),s=this.querySelector(":scope > dialog[open]"),n=this.querySelector(":scope > x-notification[opened]");if(this.#j=t,t.target===this["#backdrop"])this.#at(t);else{if(e&&e.contains(t.target))return;if(i&&i.contains(t.target))return;if(s&&s.contains(t.target))return;if(n&&n.contains(t.target))return;this.#lt(t)}}#rt=!1;#Z(t){t.target.parentElement===this&&["x-menu","x-popover"].includes(t.target.localName)&&this.#j&&!1===_n(this.#j,this)&&(this.#rt=!1)}#G(){let t=this.querySelector(":scope > x-tooltip");if(t&&!1===t.disabled&&!1===this.expanded&&!1===this.#rt){if(this.parentElement&&"x-buttons"===this.parentElement.localName)for(let t of this.parentElement.children)if(t!==this&&"x-button"===t.localName){let e=t.querySelector(":scope > x-tooltip");e&&e.close(!1)}t.open(this)}}#X(){let t=this.querySelector(":scope > x-tooltip");t&&t.close(),this.#rt=!1}#R(t){let e=this.querySelector(":scope > x-menu[opened]"),i=this.querySelector(":scope > x-popover[opened]"),s=this.querySelector(":scope > dialog[open]"),n=this.querySelector(":scope > x-notification[opened]");if(t.target!==this["#backdrop"])if(e&&e.contains(t.target))!1===e.hasAttribute("closing")&&t.target.closest("x-menuitem")&&this.#ot(t);else{if(i&&i.contains(t.target))return;if(s&&s.contains(t.target))return;if(n&&n.contains(t.target))return;this.#rt=!0,this.#ht(t)}}#at(t){this.collapse()}async#lt(t){if(t.buttons>1)t.preventDefault();else if(this.querySelector(":scope > dialog[open]"))t.preventDefault();else if(!1!==this.contains(t.target)){if(this.setPointerCapture(t.pointerId),t.preventDefault(),!1===this.matches(":focus")){let t,e=Zn(this.parentNode,"*[tabindex]:not(a)");this.addEventListener("pointerup",t=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),e?e.focus():this.blur()}),this.addEventListener("pointercancel",t)}if(!1===this.#I()&&!1===this.#H()&&!1===this.#Q()){let t,e=Date.now(),i=!0,s=parseInt(getComputedStyle(this).getPropertyValue("--min-pressed-time")||"150ms");this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),i=!1;let n=Date.now()-e;n<s&&await jn(s-n),this.removeAttribute("pressed")}),this.addEventListener("pointercancel",t),(async()=>{if(this.ownerButtons)if(0===this.ownerButtons.tracking||2===this.ownerButtons.tracking)await jn(10);else if(1!==this.ownerButtons.tracking||!1!==this.toggled&&!this.mixed){if(3===this.ownerButtons.tracking){let t=[...this.ownerButtons.querySelectorAll(":scope > x-button, :scope > x-box > x-button")].filter((t=>t.toggled));(!1===this.toggled||t.length>1)&&await jn(10)}}else await jn(10);else this.togglable&&await jn(10);i&&this.setAttribute("pressed","")})()}this.#I()?"touch"!==t.pointerType&&this.#W():this.#H()?"touch"!==t.pointerType&&this.#V():this.#Q()&&this.#tt()}}async#ht(t){let e=this.querySelector(":scope > x-menu, :scope > x-popover");if(e){if(e.hasAttribute("closing"))return;e.focus()}!1===this.#Q()&&(this.#it()?this.#et():this.#nt()&&this.#st()),this.#j&&"touch"===this.#j.pointerType&&(this.#I()?this.#W():this.#H()&&this.#V()),this.togglable&&!1===t.defaultPrevented&&(this.removeAttribute("pressed"),this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle")))}#ot(t){let e=t.target.closest("x-menuitem");this.querySelector(":scope > x-menu").hasAttribute("closing")||this.collapse(e.whenTriggerEnd)}#_(t){!1===t.defaultPrevented&&("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code?this.#I()?(t.preventDefault(),this.#W().then((()=>this.querySelector(":scope > x-menu").focusFirstMenuItem()))):this.#H()?(t.preventDefault(),this.#V()):this.#it()?(t.preventDefault(),this.#et()):this.#nt()?(t.preventDefault(),this.#st()):this.matches(":focus")&&(this.#Q()?this.#tt():this.#K()?this.#J():(t.preventDefault(),this.click())):"ArrowDown"===t.code?this.#I()?(this.querySelector(":scope > x-menu"),t.preventDefault(),this.#W().then((()=>this.querySelector(":scope > x-menu").focusFirstMenuItem()))):this.#H()?(t.preventDefault(),this.#V()):(t.preventDefault(),this.click()):"ArrowUp"===t.code?this.#I()?(t.preventDefault(),this.#W().then((()=>this.querySelector(":scope > x-menu").focusLastMenuItem()))):this.#H()?(t.preventDefault(),this.#V()):(t.preventDefault(),this.click()):"Escape"===t.code&&(this.#K()||this.#Q())&&(t.preventDefault(),this.collapse()))}}customElements.define("x-button",ta);let{isArray:ea}=Array;class ia extends HTMLElement{static#E=Hs`<template><slot></slot></template>`;static#z=Os`:host{display:flex;flex-flow:row;align-items:center;justify-content:flex-start;box-sizing:border-box;width:fit-content}:host([hidden]){display:none}`;get tracking(){return this.hasAttribute("tracking")?parseInt(this.getAttribute("tracking")):-1}set tracking(t){this.setAttribute("tracking",t)}get vertical(){return this.hasAttribute("vertical")}set vertical(t){!0===t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}get value(){if(2===this.tracking||3===this.tracking){return this.#dt().filter((t=>t.toggled)).map((t=>t.value)).filter((t=>null!=t))}if(1===this.tracking||0===this.tracking){let t=this.#dt().find((t=>t.toggled));return t&&void 0!==t.value?t.value:null}if(-1===this.tracking)return null}set value(t){if(2===this.tracking||3===this.tracking){let e=this.#dt();if(ea(t))for(let i of e)i.toggled=t.includes(i.value);else for(let i of e)i.toggled=i.value===t}else if(1===this.tracking||0===this.tracking){let e=this.#dt(),i=e.find((e=>e.value===t));for(let t of e)t.toggled=t===i}}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[ia.#z],this.#S.append(document.importNode(ia.#E.content,!0)),this.addEventListener("click",(t=>this.#R(t)),!0),this.addEventListener("keydown",(t=>this.#_(t)))}connectedCallback(){for(let t of this.children)if("x-button"===t.localName){"none"!==getComputedStyle(t).boxShadow?this.setAttribute("hasboxshadow",""):this.removeAttribute("hasboxshadow");break}}#dt(){return[...this.querySelectorAll(":scope > x-button, :scope > x-box > x-button")]}#R(t){if(t.buttons>1)return;let e=t.target.closest("x-button");if(e&&!1===e.disabled&&!1===e.expandable){let t=this.#dt().filter((t=>t!==e));if(0===this.tracking){e.mixed||(e.toggled=!e.toggled),e.mixed=!1;for(let e of t)e.toggled=!1,e.mixed=!1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}else if(1===this.tracking){if(!1===e.toggled||!0===e.mixed){e.toggled=!0,e.mixed=!1;for(let e of t)e.toggled=!1,e.mixed=!1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}}else if(2===this.tracking)e.mixed?e.mixed=!1:e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}));else if(3===this.tracking){let i=t.filter((t=>!0===t.toggled));(!1===e.toggled||i.length>0)&&(e.mixed?e.mixed=!1:e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e})))}}}#_(t){if("ArrowRight"===t.code){let t=[...this.children].find((t=>t.matches(":focus")));t&&(t.nextElementSibling?t.nextElementSibling.focus():t!==t.parentElement.firstElementChild&&t.parentElement.firstElementChild.focus())}else if("ArrowLeft"===t.code){let t=[...this.children].find((t=>t.matches(":focus")));t&&(t.previousElementSibling?t.previousElementSibling.focus():t!==t.parentElement.lastElementChild&&t.parentElement.lastElementChild.focus())}}}customElements.define("x-buttons",ia);class sa extends HTMLElement{static#E=Hs`<template><slot id="slot"></slot></template>`;static#z=Os`:host{display:block;width:100%;min-width:20px;min-height:48px;box-sizing:border-box;margin:30px 0}:host([hidden]){display:none}#slot{border-radius:inherit}`;#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[sa.#z],this.#S.append(document.importNode(sa.#E.content,!0))}}customElements.define("x-card",sa);class na extends HTMLElement{static observedAttributes=["toggled","mixed","disabled"];static#E=Hs`<template><main id="main"><div id="indicator" part="indicator"><svg id="checkmark" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="checkmark-path"></path></svg></div><div id="description"><slot></slot></div></main></template>`;static#z=Os`:host{display:block;width:fit-content}:host([disabled]){opacity:.4;pointer-events:none}:host([hidden]){display:none}:host(:focus){outline:0}#main{display:flex;align-items:center}#indicator{position:relative;width:19px;height:19px;box-sizing:border-box;border:2px solid currentColor;overflow:hidden;--path-data:M -4 -4 L 100 -4 L 100 100 L -4 100 L -4 -4 Z M 95 23 L 86 13 L 37 66 L 13.6 41 L 4.5 51 L 37 85 L 95 23 Z}:host([mixed]) #indicator{--path-data:M -4 -4 L 100 -4 L 100 100 L -4 100 L -4 -4 Z M 87 42.6 L 13 42.6 L 13 57.4 L 87 57.4 L 87 42.6 Z}#checkmark{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:visible;transition-property:opacity;transition-timing-function:inherit;transition-duration:inherit}:host([mixed]) #checkmark{opacity:1}:host([toggled]) #checkmark{opacity:1}#checkmark-path{fill:currentColor}#description{flex:1}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#N=0;#L=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[na.#z],this.#S.append(document.importNode(na.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#_(t)))}connectedCallback(){Gn.addEventListener("themechange",this.#L=()=>this.#ct()),this.#ct(),this.#Y()}disconnectedCallback(){Gn.removeEventListener("themechange",this.#L)}attributeChangedCallback(t){"toggled"===t?this.#ut():"mixed"===t?this.#pt():"disabled"===t&&this.#mt()}#ct(){let t=getComputedStyle(this["#indicator"]).getPropertyValue("--path-data");this["#checkmark-path"].setAttribute("d",t)}#Y(){this.setAttribute("role","checkbox"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#ut(){this.#ct(),this.setAttribute("aria-toggled",this.mixed?"mixed":this.toggled)}#pt(){this.#ct()}#mt(){this.#Y()}#F(t){if(t.buttons>1)t.preventDefault();else if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}}async#R(t){this.mixed?this.mixed=!1:this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0}))}#_(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-checkbox",na);class aa extends HTMLElement{static observedAttributes=["value","space","disabled"];static#E=Hs`<template><main id="main"><slot></slot><input id="input" type="text" spellcheck="false" autocomplete="false" part="input"><div id="arrow-container"><svg id="arrow" width="10" height="10" viewBox="0 0 100 100" preserveAspectRatio="none" part="arrow"><path id="arrow-path"></path></svg></div><slot></slot></main></template>`;static#z=Os`:host{display:block;position:relative;max-width:160px;height:32px;padding:0 2px 0 8px;box-sizing:border-box;background:#fff;font-size:14px}:host([size=small]){height:24px;padding:0 2px 0 6px;font-size:12.5px}:host([size=large]){height:38px}:host(:focus){z-index:10}:host([mixed]){color:rgba(0,0,0,.7)}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}#main{display:flex;align-items:center;width:100%;height:100%}#input{width:100%;padding:0;box-sizing:border-box;color:inherit;background:0 0;border:none;outline:0;font-family:inherit;font-size:inherit;font-weight:inherit;text-align:inherit}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host(:not(:focus)) ::selection{color:inherit;background:0 0}:host([error]) ::selection{color:#fff;background-color:#d50000}#arrow-container{display:flex;align-items:center;justify-content:center;height:100%;margin-left:4px;min-width:fit-content}#arrow{display:block;box-sizing:border-box;width:auto;min-width:fit-content;height:calc(100% - 4px);color:currentColor;cursor:default;--text-color:50%;--path-data:M 25 41 L 50 16 L 75 41 L 83 34 L 50 1 L 17 34 Z M 17 66 L 50 100 L 83 66 L 75 59 L 50 84 L 25 59 Z}:host([size=small]) #arrow{padding:2px 2px}:host([size=large]) #arrow{padding:6px 2px}#arrow path{fill:currentColor}`;get value(){return this.#bt}set value(t){t=Ts(ui(St(t),this.space),this.#gt),this.#bt===t||this.matches(":focus")||(this.#bt=t,this.isConnected&&(this.#ft(),this.#xt(),this.#wt&&this.reportValidity()))}get space(){return this.hasAttribute("space")?this.getAttribute("space"):"srgb"}set space(t){this.setAttribute("space",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#bt="#000000";#gt="srgb";#S=null;#N=0;#wt=null;#O=!1;#vt;#kt;#yt;#Ct;constructor(){super(),this.#S=this.attachShadow({mode:"closed",delegatesFocus:!1}),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,aa.#z],this.#S.append(document.importNode(aa.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#format-menu"]=Xn("x-menu"),this.append(this["#format-menu"]),this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.opacity="0",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>this.#Et(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("pointerenter",(()=>this.#G())),this.addEventListener("pointerleave",(()=>this.#X())),this.addEventListener("focusin",(t=>this.#zt(t))),this.addEventListener("focusout",(t=>this.#St(t))),this.addEventListener("keydown",(t=>this.#_(t))),this["#input"].addEventListener("input",(t=>this.#$t(t))),this["#input"].addEventListener("blur",(t=>this.#Mt(t))),this["#input"].addEventListener("search",(t=>this.#Lt(t))),this["#input"].addEventListener("contextmenu",(()=>this.#At())),this["#arrow"].addEventListener("pointerdown",(t=>this.#Rt(t))),this["#arrow"].addEventListener("click",(t=>this.#Pt(t))),this["#format-menu"].addEventListener("toggle",(t=>this.#Tt(t))),this["#format-menu"].addEventListener("click",(t=>this.#Dt(t)))}connectedCallback(){this.#gt=Gn.getConfig(`x-colorinput:${this.space}Format`,this.#Bt(this.space)),this.#It(),this.#wt&&this.reportValidity(),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t)),Gn.addEventListener("themechange",this.#kt=()=>this.#T())}disconnectedCallback(){Gn.removeEventListener("configchange",this.#vt),Gn.removeEventListener("themechange",this.#kt)}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Ot():"space"===t?this.#jt():"disabled"===t&&this.#mt())}selectAll(){this["#input"].select()}clear(){this.value="",this.#wt=null,this.#Nt()}reportValidity(){let t=this["#input"].value;return this.required&&0===t.length?this.#wt={href:"#required-field"}:!1===Bs(t)&&!1===Bs("#"+t)?this.#wt={href:"#invalid-color"}:this.#wt=null,this.#Nt(),null===this.#wt}async#Ft(){if(!1===this.#Gt())return;let t=this["#format-menu"];this["#backdrop"].show(!1),window.addEventListener("resize",this.#yt=()=>this.#Xt()),window.addEventListener("blur",this.#Ct=()=>this.#Xt());{let e=St(this.value);["srgb","hwb","hsl"].includes(e.spaceId)?t.innerHTML=`\n          <x-menuitem value="hex">\n            <x-label>${Ts(e,"hex")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hex-alt">\n            <x-label>${Ts(e,"hex").toUpperCase()}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="color">\n            <x-label>${Ts(e,"color")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="color-alt">\n            <x-label>${Ts(e,"color-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="rgb">\n            <x-label>${Ts(e,"rgb")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="rgb-alt">\n            <x-label>${Ts(e,"rgb-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="hsl">\n            <x-label>${Ts(e,"hsl")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hsl-alt">\n            <x-label>${Ts(e,"hsl-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="hwb">\n            <x-label>${Ts(e,"hwb")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hwb-alt">\n            <x-label>${Ts(e,"hwb-alt")}</x-label>\n          </x-menuitem>\n        `:["srgb-linear","p3","rec2020","prophoto","a98rgb","xyz","xyz-d65","xyz-d50"].includes(e.spaceId)?t.innerHTML=`\n          <x-menuitem value="color">\n            <x-label>${Ts(e,"color")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="color-alt">\n            <x-label>${Ts(e,"color-alt")}</x-label>\n          </x-menuitem>\n        `:"oklch"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="oklch">\n            <x-label>${Ts(e,"oklch")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="oklch-alt">\n            <x-label>${Ts(e,"oklch-alt")}</x-label>\n          </x-menuitem>\n        `:"oklab"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="oklab">\n            <x-label>${Ts(e,"oklab")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="oklab-alt">\n            <x-label>${Ts(e,"oklab-alt")}</x-label>\n          </x-menuitem>\n        `:"lch"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="lch">\n            <x-label>${Ts(e,"lch")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="lch-alt">\n            <x-label>${Ts(e,"lch-alt")}</x-label>\n          </x-menuitem>\n        `:"lab"===e.spaceId&&(t.innerHTML=`\n          <x-menuitem value="lab">\n            <x-label>${Ts(e,"lab")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="lab-alt">\n            <x-label>${Ts(e,"lab-alt")}</x-label>\n          </x-menuitem>\n        `)}{let e=t.querySelector(`[value="${this.#gt}"]`);e&&(e.toggled=!0)}{let e=t.querySelector("x-menuitem[toggled]"),i=t.querySelector("x-menuitem").firstElementChild;e?t.openOverElement(this["#input"],e.querySelector("x-label")):t.openOverElement(this["#input"],i)}{let e=t.getBoundingClientRect(),i=this.getBoundingClientRect(),s=parseFloat(getComputedStyle(this).paddingRight);e.right-s<i.right&&(t.style.minWidth=i.right-e.left+s+"px")}{let t=this.getBoundingClientRect();t.right+7>window.innerWidth&&(this.style.maxWidth=window.innerWidth-t.left-7+"px")}}async#Xt(t=null){if(!1===this.#_t())return;let e=this["#format-menu"];if(e.setAttribute("closing",""),await t,this["#backdrop"].hide(!1),this.#O)this.focus(),this.selectAll();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}window.removeEventListener("resize",this.#yt),window.removeEventListener("blur",this.#Ct),await e.close(),e.removeAttribute("closing")}#Gt(){if(this.disabled)return!1;{let t=this["#format-menu"];return t.querySelector("x-menuitem"),null!==t&&!1===t.opened&&!1===t.hasAttribute("closing")}}#_t(){if(this.disabled)return!1;{let t=this["#format-menu"];return t.querySelector("x-menuitem"),null!==t&&!0===t.opened&&!1===t.hasAttribute("closing")}}#Zt(t="increment",e=1){let{value:i}=this["#input"],s=this.#Ut();if(s){let[n,a]=s,l=i.substring(n,a),r="",o=1;l.endsWith("%")?r="%":l.endsWith("deg")&&(r="deg"),o="%"===r||"deg"===r?1:i.indexOf("/")>-1&&i.indexOf("/")<n||"color-alt"===this.#gt?.01:1,o*=e,"decrement"===t&&(o*=-1);let h=xi(parseFloat(l)+o,5)+r;this["#input"].value=i.substring(0,n)+h+i.substring(a),this["#input"].selectionStart=n,this["#input"].selectionEnd=n+h.length,this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}}#Yt(){let{value:t,selectionStart:e,selectionEnd:i}=this["#input"],s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=-1,a=-1;t=t.toLowerCase();for(let i=e-1;i>=0;i-=1){let e=t[i];if(!s.includes(e)){if("#"===e){n=i;break}return null}n=i}for(let n=e;n<t.length;n+=1){let e=t[n];if(!s.includes(e)){if(" "!==e||i>n)return null;break}a=n+1}return-1===n&&-1!==a?n=e:-1===a&&-1!==n&&(a=i),[n,a]}#Ut(){let{value:t,selectionStart:e,selectionEnd:i}=this["#input"],s=["0","1","2","3","4","5","6","7","8","9",".","+","-","%","d","e","g"],n=-1,a=-1;t=t.toLowerCase();for(let i=e-1;i>=0;i-=1){let e=t[i];if(!s.includes(e)){if(!1===[" ","(","/"].includes(e))return null;break}n=i}for(let n=e;n<=t.length;n+=1){let e=t[n];if(!s.includes(e)){if(!1===[" ",")","/"].includes(e)||i>n)return null;break}a=n+1}return-1===n&&-1!==a?n=e:-1===a&&-1!==n&&(a=i),[n,a]}#qt(){let t,e=this["#input"].value;try{t=St(e)}catch(i){t=St("#"+e)}return!1===this.alpha&&(t.alpha=1),e=Ts(ui(t,this.space),this.#gt),e}#Bt(t){let e="color";return"srbg"===t?e="hex":"oklch"===t?e="oklch":"oklab"===t?e="oklab":"lch"===t?e="lch":"lab"===t&&(e="lab"),e}#Ht(t){let{key:e,value:i,origin:s}=t.detail;e===`x-colorinput:${this.space}Format`&&(this.#gt=i||this.#Bt(this.space),this.#bt=Ts(ui(St(this["#input"].value),this.space),this.#gt),this.#ft())}#jt(){this.#gt=Gn.getConfig(`x-colorinput:${this.space}Format`,this.#Bt(this.space)),this.isConnected&&this.#ft()}#Ot(){this.isConnected&&(this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&this.selectAll())}#mt(){this["#input"].disabled=this.disabled,this.#Y()}#R(t){if(2===t.detail){let t=this.#Ut(),e=this.#Yt();if(t){let[e,i]=t;this["#input"].setSelectionRange(e,i)}else if(e){let[t,i]=e;this["#input"].setSelectionRange(t,i)}}this.#Nt()}#Et(t){this.#Xt()}#G(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#X(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#zt(){this.#Nt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#St(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),this.reportValidity()}#_(t){if("Enter"===t.code||"NumpadEnter"===t.code){if(t.preventDefault(),this.reportValidity(),null===this.#wt){let t=this.#qt();t!==this.#bt&&(this.#bt=t,this.#ft(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#ft(),this.selectAll()}}else"ArrowUp"===t.code?(t.preventDefault(),this.#Zt("increment",t.shiftKey?10:1)):"ArrowDown"===t.code&&(t.preventDefault(),this.#Zt("decrement",t.shiftKey?10:1))}#Mt(){if(this.reportValidity(),null===this.#wt){let t=this.#qt();t!==this.#bt&&(this.#bt=t,this.#ft(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#ft()}}#$t(t){this.#wt&&this.reportValidity(),t.stopPropagation(),this.#xt(),this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}#Lt(){this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#At(){this["#input"].selectionStart===this["#input"].selectionEnd&&this.selectAll()}#Rt(t){this.#O=this.matches(":focus")}#Pt(t){this.#Ft()}#Dt(t){let e=t.target.closest("x-menuitem");if(e){if(!1===e.toggled){for(let t of this["#format-menu"].querySelectorAll("x-menuitem"))t.toggled=t===e;Gn.setConfig(`x-colorinput:${this.space}Format`,e.value)}this.#Xt(e.whenTriggerEnd)}}#Tt(t){t.preventDefault()}#It(){this.#ft(),this.#T(),this.#xt(),this.#Y()}#ft(){let t=St(this.#bt);!1===this.alpha&&(t.alpha=1);let e=Ts(ui(t,this.space),this.#gt);this.matches(":focus")?(this["#input"].selectionStart=0,this["#input"].selectionEnd=this["#input"].value.length,document.execCommand("insertText",!1,e)):this["#input"].value=e}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#Nt(){let t=this.#wt;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Xn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;jn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#xt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#Y(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}}customElements.define("x-colorinput",aa);let{PI:la,sin:ra,cos:oa,pow:ha,atan2:da,sqrt:ca,min:ua,max:pa}=Math,{isNaN:ma}=Number;const ba=150,ga=.4;class fa extends HTMLElement{static observedAttributes=["value","alpha","spaces","disabled"];static#E=Hs`<template><header id="header"><x-select id="space-select" size="small"><x-menu id="space-select-menu"><x-menuitem value="srgb"><x-label>sRGB</x-label></x-menuitem><x-menuitem value="srgb-linear"><x-label><x-message href="#color-space.srgb-linear">Linear sRGB</x-message></x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem><hr><x-menuitem value="lch"><x-label>CIE LCH</x-label></x-menuitem><x-menuitem value="oklch"><x-label>OK LCH</x-label></x-menuitem><hr><x-menuitem value="lab"><x-label>CIE LAB</x-label></x-menuitem><x-menuitem value="oklab"><x-label>OK LAB</x-label></x-menuitem><hr><x-menuitem value="xyz-d65"><x-label>CIE XYZ D65</x-label></x-menuitem><x-menuitem value="xyz-d50"><x-label>CIE XYZ D50</x-label></x-menuitem></x-menu></x-select><x-buttons id="type-buttons" tracking="1"><x-button value="planar" skin="flat"><x-icon href="#square"></x-icon></x-button><x-button value="polar" skin="flat"><x-icon href="#circle"></x-icon></x-button><x-button value="linear" skin="flat"><x-icon href="#bars"></x-icon></x-button></x-buttons></header><main id="main"></main><footer id="footer"><x-colorinput id="input" space="srgb" size="small"></x-colorinput><x-button id="grab-button" size="small" condensed togglable><x-icon href="#eye-dropper"></x-icon></x-button></footer></template>`;static#z=Os`:host{display:block;width:200px;box-sizing:border-box}:host([hidden]){display:none}#header{display:flex;align-items:center}#space-select{min-width:110px;font-size:13px}#space-select x-menuitem[data-warn] x-label::after{content:" ⚠"}#type-buttons{margin-left:auto}#type-buttons x-button{margin-left:4px;min-height:1px}#type-buttons x-button x-icon{width:18px;height:18px}#main{margin-top:10px}#sliders{width:100%}:host-context(x-popover) #sliders{height:250px}:host-context(x-popover):host([alpha]) #sliders{height:290px}#footer{display:flex;margin-top:10px}#input{max-width:none;min-height:1px;flex:1;font-size:13px}#input:focus{z-index:1}#grab-button{margin:0 0 0 5px;padding:0 6px}#grab-button x-icon{width:14px;height:14px}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"}set value(t){this.setAttribute("value",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get spaces(){return this.hasAttribute("spaces")?this.getAttribute("spaces").replace(/\s+/g," ").split(" "):["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto","lch","oklch","lab","oklab","xyz-d65","xyz-d50"]}set spaces(t){this.setAttribute("spaces",t.join(" "))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S;#vt;#Wt=!1;constructor(){super(),this.#S=this.attachShadow({mode:"open"}),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,fa.#z],this.#S.append(document.importNode(fa.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#space-select"].addEventListener("change",(()=>this.#Vt())),this["#space-select"].addEventListener("open",(()=>this.#Kt())),this["#type-buttons"].addEventListener("toggle",(t=>this.#Jt())),this["#main"].addEventListener("pointerdown",(t=>this.#Qt(t)),!0),this["#main"].addEventListener("changestart",(t=>this.#te(t))),this["#main"].addEventListener("change",(t=>this.#ee(t))),this["#main"].addEventListener("changeend",(t=>this.#ie(t))),this["#input"].addEventListener("change",(t=>this.#se(t))),this["#input"].addEventListener("keydown",(t=>this.#ne(t))),this["#grab-button"].addEventListener("toggle",(()=>this.#ae()))}connectedCallback(){Gn.addEventListener("configchange",this.#vt=t=>{this.#Ht(t)}),this["#type-buttons"].value=Gn.getConfig(`${this.localName}:type`,"planar"),this.#It()}disconnectedCallback(){Gn.removeEventListener("configchange",this.#vt)}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Ot():"alpha"===t?this.#le():"spaces"===t?this.#re():"disabled"===t&&this.#mt())}grab(){return new Promise((async t=>{if(void 0===window.EyeDropper)window.alert("Your web browser does not support Eye Dropper API"),t(null);else{let e,i=new EyeDropper,s=new AbortController;try{e=await i.open({signal:s.signal})}catch(t){e=null}t(e?.sRGBHex||null)}}))}#Ot(){this.isConnected&&(this.#Wt?this.#oe():this.#It())}#le(){for(let t of this["#main"].children)this.alpha?t.setAttribute("alpha",""):t.removeAttribute("alpha");this.alpha?this["#input"].setAttribute("alpha",""):this["#input"].removeAttribute("alpha")}#re(){this.isConnected&&this.#It()}#mt(){this.isConnected&&this.#It()}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s&&e===`${this.localName}:type`){let t=i||"planar";null===this.offsetParent&&this["#type-buttons"].value!==t&&(this["#type-buttons"].value=t,this.#It())}}#Vt(){let t=St(this.value);if(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),"srgb"===this["#space-select"].value)this.value=pi(ui(t,"srgb",{inGamut:!0}),{format:"hex"});else{let e=ui(t,this["#space-select"].value,{inGamut:!0});for(let t=0;t<e.coords.length;t+=1)ma(e.coords[t])&&(e.coords[t]=0);this.value=pi(e,{precision:3})}this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#Jt(t){Gn.setConfig(`${this.localName}:type`,this["#type-buttons"].value),this.#It()}#Qt(t){this["#input"].matches(":focus")&&t.stopImmediatePropagation()}#te(t){this.#Wt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))}#ee(t){let e=t.target;if("srgb"===e.space){let[e,i,s,n]=t.target.value;this.value=pi({space:"srgb",coords:[e,i,s],alpha:n},{format:"hex"})}else if(["srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(e.space)){let[i,s,n,a]=t.target.value;this.value=pi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("lch"===e.space||"oklch"===e.space){let[i,s,n,a]=t.target.value;this.value=pi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("lab"===e.space||"oklab"===e.space){let[i,s,n,a]=t.target.value;this.value=pi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("xyz-d65"===e.space||"xyz-d50"===e.space){let[i,s,n,a]=t.target.value;this.value=pi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#ie(t){this.#Wt=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#se(t){this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=St(this["#input"].value);"srgb"===this["#space-select"].value?this.value=pi(ui(e,"srgb",{inGamut:!0}),{format:"hex"}):this.value=pi(ui(e,this["#space-select"].value,{inGamut:!0}),{precision:3}),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#ne(t){"Enter"!==t.key&&"Space"!==t.code||this.closest("x-popover")&&t.stopPropagation()}#ae(){return new Promise((async t=>{let e=await this.grab();this["#grab-button"].toggled=!1,null!==e&&(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),"srgb"===this["#space-select"].value?this.value=e:this.value=pi(ui(St(e),this["#space-select"].value,{inGamut:!0}),{precision:3}),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})))}))}#It(){let t=this.#he();this.#de(t),this.#ce(t),this.#ue(t),this.#ft(t),this.#pe()}#de(t=this.#he()){let e=this.spaces;if(1===e.length)this["#space-select"].hidden=!0;else{this["#space-select"].hidden=!1,this["#space-select"].disabled=this.disabled,this["#space-select"].value=t.spaceId;for(let t of this["#space-select-menu"].children)"x-menuitem"===t.localName&&(t.disabled=!e.includes(t.value))}}#Kt(){let t=this.#he();for(let e of this["#space-select-menu"].children)if("x-menuitem"===e.localName){Qt(t,e.value)?e.removeAttribute("data-warn"):e.setAttribute("data-warn","")}}#ce(t=this.#he()){let e;["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(t.spaceId)?e=["planar","polar","linear"]:["lch","oklch","lab","oklab","xyz-d65","xyz-d50"].includes(t.spaceId)&&(e=["planar","linear"]),!1===e.includes(this["#type-buttons"].value)&&(this["#type-buttons"].value=e[0]);for(let t of this["#type-buttons"].children)t.disabled=this.disabled,t.hidden=!1===e.includes(t.value)||e.length<=1}#ue(t=this.#he()){let e,i=this["#type-buttons"].value,s=t.spaceId,n=[...t.coords,t.alpha];["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(s)?"linear"===i?e="x-rgblinearsliders":"planar"===i?e="x-rgbplanarsliders":"polar"===i&&(e="x-rgbpolarsliders"):"lch"===s||"oklch"===s?"linear"===i?e="x-lchlinearsliders":"planar"===i&&(e="x-lchplanarsliders"):"lab"===s||"oklab"===s?"linear"===i?e="x-lablinearsliders":"planar"===i&&(e="x-labplanarsliders"):"xyz-d65"!==s&&"xyz-d50"!==s||("linear"===i?e="x-xyzlinearsliders":"planar"===i&&(e="x-xyzplanarsliders")),this["#main"].firstElementChild?.localName!==e&&(this["#main"].innerHTML="",this["#sliders"]=Xn(e),this["#sliders"].setAttribute("id","sliders"),this["#sliders"].setAttribute("exportparts","slider"),this["#main"].append(this["#sliders"])),this["#sliders"].space=s,this["#sliders"].value=n,this["#sliders"].alpha=this.alpha,this["#sliders"].disabled=this.disabled}#ft(t=this.#he()){this["#input"].space=t.spaceId,this["#input"].alpha=this.alpha,this["#input"].value=pi(t),this["#input"].disabled=this.disabled}#oe=Fn(this.#ft,50,this);#pe(){this["#grab-button"].disabled=this.disabled}#he(){let t=St(this.value);!1===this.spaces.includes(t.spaceId)&&(t="hsl"===t.spaceId||"hwb"===t.spaceId?ui(t,"srgb",{inGamut:!0}):ui(t,"p3",{inGamut:!0}));for(let e=0;e<t.coords.length;e+=1)ma(t.coords[e])&&(t.coords[e]=0);return void 0===t.spaceId&&(t.spaceId=t.space.id),t.coords=t.coords.map((t=>1*t)),t}}void 0===customElements.get("x-colorpicker")&&customElements.define("x-colorpicker",fa);class xa extends HTMLElement{static#E=Hs`<template><div id="coord-0-slider" class="slider" part="slider"><div id="coord-0-slider-track" class="slider-track"><svg id="coord-0-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-0-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-0-slider-marker" class="slider-marker"><span id="coord-0-slider-label" class="slider-label"></span></div></div></div><div id="coord-1-slider" class="slider" part="slider"><div id="coord-1-slider-track" class="slider-track"><svg id="coord-1-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-1-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-1-slider-marker" class="slider-marker"><span id="coord-1-slider-label" class="slider-label"></span></div></div></div><div id="coord-2-slider" class="slider" part="slider"><div id="coord-2-slider-track" class="slider-track"><svg id="coord-2-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-2-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-2-slider-marker" class="slider-marker"><span id="coord-2-slider-label" class="slider-label"></span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem><x-menuitem value="hwb"><x-label>HWB</x-label></x-menuitem><hr><x-menuitem value="okhsv" data-srgb-only><x-label>OK HSV</x-label></x-menuitem><x-menuitem value="okhsl" data-srgb-only><x-label>OK HSL</x-label></x-menuitem><x-menuitem value="hsluv" data-srgb-only><x-label>HSLuv</x-label></x-menuitem><hr><x-menuitem value="rgb"><x-label>RGB</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}.slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}`;get value(){let t=this.#me();if("rgb"===t){let[t,e,i]=this.#be;return[t,e,i,this.#ge]}if("hsv"===t){let[e,i,s]=this.#be,[n,a,l]=ui({space:t,coords:[360*e,100*i,100*s]},"srgb").coords;return[n,a,l,this.#ge]}if("okhsv"===t){let[e,i,s]=this.#be,[n,a,l]=ui({space:t,coords:[360*e,i,s]},"srgb").coords;return[n,a,l,this.#ge]}if("hsl"===t||"hsluv"===t){let[e,i,s]=this.#be,[n,a,l]=ui({space:t,coords:[360*e,100*i,100*s]},"srgb").coords;return[n,a,l,this.#ge]}if("okhsl"===t){let[e,i,s]=this.#be,[n,a,l]=ui({space:t,coords:[360*e,i,s]},"srgb").coords;return[n,a,l,this.#ge]}if("hwb"===t){let[t,e,i]=this.#be,[s,n,a]=ui({space:"hwb",coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#ge]}}set value([t,e,i,s]){let n=this.#me();if("rgb"===n)this.#be=[t,e,i],this.#ge=s;else if("hsv"===n){let[a,l,r]=ui({space:"srgb",coords:[t,e,i]},n).coords;this.#be=[a/360,l/100,r/100],this.#ge=s}else if("okhsv"===n){let[a,l,r]=ui({space:"srgb",coords:[t,e,i]},n).coords;this.#be=[a/360,l,r],this.#ge=s}else if("hsl"===n||"hsluv"===n){let[a,l,r]=ui({space:"srgb",coords:[t,e,i]},n).coords;this.#be=[a/360,l/100,r/100],this.#ge=s}else if("okhsl"===n){let[a,l,r]=ui({space:"srgb",coords:[t,e,i]},n).coords;this.#be=[a/360,l,r],this.#ge=s}else if("hwb"===n){let[n,a,l]=ui({space:"srgb",coords:[t,e,i]},"hwb").coords;this.#be=[n/360,a/100,l/100],this.#ge=s}for(let t=0;t<this.#be.length;t+=1)ma(this.#be[t])&&(this.#be[t]=0);this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#Wt=!1;#fe="srgb";#xe="hsv";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(xa.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,xa.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#coord-0-slider"].addEventListener("pointerdown",(t=>this.#ke(t))),this["#coord-1-slider"].addEventListener("pointerdown",(t=>this.#ye(t))),this["#coord-2-slider"].addEventListener("pointerdown",(t=>this.#Ce(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#xe=Gn.getConfig(`${this.localName}:model`,"hsv"),this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){Gn.removeEventListener("configchange",this.#vt)}#me(){return this.#xe,"okhsv"===this.#xe?"srgb"===this.#fe?"okhsv":"hsv":"okhsl"===this.#xe?"srgb"===this.#fe?"okhsl":"hsl":"hsluv"===this.#xe?"srgb"===this.#fe?"hsluv":"hsl":this.#xe}#$e(){return"none"===this.#we||"srgb"===this.#we&&["srgb","srgb-linear"].includes(this.#fe)||"p3"===this.#we&&["srgb","srgb-linear","p3"].includes(this.#fe)||"a98rgb"===this.#we&&["srgb","srgb-linear","a98rgb"].includes(this.#fe)||"rec2020"===this.#we&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#fe)||"prophoto"===this.#we?"none":this.#we}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#xe){let[e,i,s]=this.value;this.#xe=t,this.value=[e,i,s,this.#ge]}}else if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#color-model-menu"]){let t=e.value,[i,s,n]=this.value;this.#xe=t,Gn.setConfig(`${this.localName}:model`,t),this.value=[i,s,n,this.#ge]}else e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css"))):"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It())}#Se(){this.#Le()}#ke(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#coord-0-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#coord-0-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#be[0]&&(this.#be[0]=e,this.#Ae(),this.#Re(),this.#Pe(),this.#Te(),this.#De(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#coord-0-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#coord-0-slider"].addEventListener("pointerup",i=()=>{this["#coord-0-slider"].removeEventListener("pointermove",e),this["#coord-0-slider"].removeEventListener("pointerup",i),this["#coord-0-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#coord-0-slider"].addEventListener("pointercancel",i)}#ye(t){if(t.button>0||this.#Wt)return;let e,i,s=this.#me(),n=this["#coord-1-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#coord-1-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let a=t=>{let e=(t-n.x)/n.width;e=vi(e,0,1),e!==this.#be[1]&&(this.#be[1]=e,"rgb"===s&&this.#He(),this.#Oe(),this.#je(),this.#Re(),this.#Te(),this.#De(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};a(t.clientX),this["#coord-1-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&a(e.clientX)}),this["#coord-1-slider"].addEventListener("pointerup",i=()=>{this["#coord-1-slider"].removeEventListener("pointermove",e),this["#coord-1-slider"].removeEventListener("pointerup",i),this["#coord-1-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#coord-1-slider"].addEventListener("pointercancel",i)}#Ce(t){if(t.button>0||this.#Wt)return;let e,i,s=this.#me(),n=this["#coord-2-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#coord-2-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let a=t=>{let e=(t-n.x)/n.width;e=vi(e,0,1),e!==this.#be[2]&&(this.#be[2]=e,"rgb"===s&&(this.#He(),this.#Re()),this.#Oe(),this.#Pe(),this.#Ne(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};a(t.clientX),this["#coord-2-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&a(e.clientX)}),this["#coord-2-slider"].addEventListener("pointerup",i=()=>{this["#coord-2-slider"].removeEventListener("pointermove",e),this["#coord-2-slider"].removeEventListener("pointerup",i),this["#coord-2-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#coord-2-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#Ae(),this.#He(),this.#Oe(),this.#je(),this.#Re(),this.#Pe(),this.#Ne(),this.#Te(),this.#De(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#Ae(){this["#coord-0-slider-marker"].style.left=100*this.#be[0]+"%"}#He(){let t=this.#me();if("rgb"===t){let[,t,e]=this.#be,i="srgb-linear"===this.#fe?"srgb-linear":"srgb",s=[{space:this.#fe,coords:[0,t,e]},{space:this.#fe,coords:[1,t,e]}];s=s.map((t=>pi(t))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let t="srgb-linear"===this.#fe?"srgb-linear":"srgb",e=[{space:this.#fe,coords:[1,0,0]},{space:this.#fe,coords:[1,1,0]},{space:this.#fe,coords:[0,1,0]},{space:this.#fe,coords:[0,1,1]},{space:this.#fe,coords:[0,0,1]},{space:this.#fe,coords:[1,0,1]},{space:this.#fe,coords:[1,0,0]}];e=e.map((t=>pi(t))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in ${t} to right, ${e})`}else if("okhsv"===t||"okhsl"===t){let t=[];for(let e=0;e<=360;e+=60)t.push({space:"okhsv",coords:[e,1,1]});t=t.map((t=>pi(ui(t,"srgb")))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in srgb to right, ${t})`}else if("hsluv"===t){let t=[];for(let e=0;e<=360;e+=60)t.push({space:"okhsv",coords:[e,1,1]});t=t.map((t=>pi(ui(t,"srgb")))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in srgb to right, ${t})`}}#Oe(){let t=this.#$e();if("none"===t)this["#coord-0-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#me(),s=this["#coord-0-slider"].clientWidth,n=1/window.devicePixelRatio,[,a,l]=this.#be,r=null;for(let o=0;o<=s;o+=n){let n,h=o/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#fe,coords:ui({space:i,coords:[360*h,100*a,100*l]},"srgb").coords}:"rgb"===i&&(n={space:this.#fe,coords:[h,a,l]}),Qt(n,t)?(null===r&&(r=[],e.push(r)),r.push(100*h)):r=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-0-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-0-slider-gamut-path"].removeAttribute("d")}}#je(){this["#coord-1-slider-marker"].style.left=100*this.#be[1]+"%"}#Re(){let t=this.#me();if("rgb"===t){let[t,,e]=this.#be,i="srgb-linear"===this.#fe?"srgb-linear":"srgb",s=[{space:this.#fe,coords:[t,0,e]},{space:this.#fe,coords:[t,1,e]}];s=s.map((t=>pi(t))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let e,[i]=this.#be,s="srgb-linear"===this.#fe?"srgb":this.space,n="srgb-linear"===this.#fe?"srgb-linear":"srgb";"hsv"===t?e=[{space:this.#fe,coords:ui({space:"hsv",coords:[360*i,0,100]},s).coords},{space:this.#fe,coords:ui({space:"hsv",coords:[360*i,100,100]},s).coords}]:"hsl"===t?e=[{space:this.#fe,coords:ui({space:"hsl",coords:[360*i,0,50]},s).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*i,100,50]},s).coords}]:"hwb"===t&&(e=[{space:this.#fe,coords:ui({space:"hwb",coords:[360*i,0,0]},s).coords},{space:this.#fe,coords:ui({space:"hwb",coords:[360*i,100,0]},s).coords}]),e=e.map((t=>pi(t))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in ${n} to right, ${e})`}else if("okhsv"===t||"okhsl"===t){let[e]=this.#be,i=[];for(let s=0;s<=1;s+=.01)i.push({space:t,coords:[360*e,s,"okhsv"===t?1:.65]});i=i.map((t=>pi(ui(t,"srgb")))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in srgb to right, ${i})`}else if("hsluv"===t){let[e]=this.#be,i=[];for(let s=0;s<=100;s+=1)i.push({space:t,coords:[360*e,s,65]});i=i.map((t=>pi(ui(t,"srgb")))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in srgb to right, ${i})`}}#Pe(){let t=this.#$e();if("none"===t)this["#coord-1-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#me(),s=this["#coord-1-slider"].clientWidth,n=1/window.devicePixelRatio,[a,,l]=this.#be,r=null;for(let o=0;o<=s;o+=n){let n,h=o/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#fe,coords:ui({space:i,coords:[360*a,100*h,100*l]},"srgb").coords}:"rgb"===i&&(n={space:this.#fe,coords:[a,h,l]}),Qt(n,t)?(null===r&&(r=[],e.push(r)),r.push(100*h)):r=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-1-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-1-slider-gamut-path"].removeAttribute("d")}}#Ne(){this["#coord-2-slider-marker"].style.left=100*this.#be[2]+"%"}#Te(){let t=this.#me();if("rgb"===t){let[t,e]=this.#be,i="srgb-linear"===this.#fe?"srgb-linear":"srgb",s=[{space:this.#fe,coords:[t,e,0]},{space:this.#fe,coords:[t,e,1]}];s=s.map((t=>pi(t))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let e="srgb-linear"===this.#fe?"srgb":this.#fe,i="srgb-linear"===this.#fe?"srgb-linear":"srgb",s=[];if("hsv"===t){let[t,i]=this.#be;s=[{space:this.#fe,coords:ui({space:"hsv",coords:[360*t,100*i,0]},e).coords},{space:this.#fe,coords:ui({space:"hsv",coords:[360*t,100*i,100]},e).coords}]}else if("hsl"===t){let[t,i]=this.#be;s=[{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,100*i,0]},e).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,100*i,50]},e).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,100*i,100]},e).coords}]}else if("hwb"===t){let[t,i]=this.#be;for(let n=0;n<=100;n+=10)s.push({space:this.#fe,coords:ui({space:"hwb",coords:[360*t,100*i,n]},e).coords})}s=s.map((t=>pi(t))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("okhsv"===t||"okhsl"===t){let[e,i]=this.#be,s=[];for(let n=0;n<=1;n+=.01)s.push({space:t,coords:[360*e,i,n]});s=s.map((t=>pi(ui(t,"srgb")))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in srgb to right, ${s})`}else if("hsluv"===t){let[e,i]=this.#be,s=[];for(let n=0;n<=100;n+=1)s.push({space:t,coords:[360*e,100*i,n]});s=s.map((t=>pi(ui(t,"srgb")))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in srgb to right, ${s})`}}#De(){let t=this.#$e();if("none"===t)this["#coord-2-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#me(),s=this["#coord-2-slider"].clientWidth,n=1/window.devicePixelRatio,[a,l]=this.#be,r=null;for(let o=0;o<=s;o+=n){let n,h=o/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#fe,coords:ui({space:i,coords:[360*a,100*l,100*h]},"srgb").coords}:"rgb"===i&&(n={space:this.#fe,coords:[a,l,h]}),Qt(n,t)?(null===r&&(r=[],e.push(r)),r.push(100*h)):r=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-2-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-2-slider-gamut-path"].removeAttribute("d")}}#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){let t=this.#me();if("rgb"===t){let[t,e,i]=this.#be,s=[{space:this.#fe,coords:[t,e,i],alpha:0},{space:this.#fe,coords:[t,e,i],alpha:1}];s=s.map((t=>pi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${s})`}else if("okhsv"===t||"okhsl"===t){let[e,i,s]=this.#be,n="srgb-linear"===this.#fe?"srgb":this.#fe,a=[];for(let l of[0,1])a.push({space:this.#fe,coords:ui({space:t,coords:[360*e,i,s]},n).coords,alpha:l});a=a.map((t=>pi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${a})`}else{let[e,i,s]=this.#be,n="srgb-linear"===this.#fe?"srgb":this.#fe,a=[];for(let l of[0,1])a.push({space:this.#fe,coords:ui({space:t,coords:[360*e,100*i,100*s]},n).coords,alpha:l});a=a.map((t=>pi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${a})`}}#Ie(){let t=this.#$e();if("none"===t)this["#coord-0-slider-marker"].removeAttribute("data-warn"),this["#coord-1-slider-marker"].removeAttribute("data-warn"),this["#coord-2-slider-marker"].removeAttribute("data-warn");else{let e,i=this.#me();if("hsv"===i||"hsl"===i||"hwb"===i){let[t,s,n]=this.#be;e={space:this.#fe,coords:ui({space:i,coords:[360*t,100*s,100*n]},"srgb").coords}}else"rgb"===i&&(this.#be,e={space:this.#fe,coords:[...this.#be]});Qt(e,t)?(this["#coord-0-slider-marker"].removeAttribute("data-warn"),this["#coord-1-slider-marker"].removeAttribute("data-warn"),this["#coord-2-slider-marker"].removeAttribute("data-warn")):(this["#coord-0-slider-marker"].setAttribute("data-warn",""),this["#coord-1-slider-marker"].setAttribute("data-warn",""),this["#coord-2-slider-marker"].setAttribute("data-warn",""))}}#Me(){if(this.#ve){let t=this.#me();"hsv"===t||"okhsv"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="S",this["#coord-2-slider-label"].textContent="V"):"hsl"===t||"okhsl"===t||"hsluv"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="S",this["#coord-2-slider-label"].textContent="L"):"hwb"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="W",this["#coord-2-slider-label"].textContent="B"):"rgb"===t&&(this["#coord-0-slider-label"].textContent="R",this["#coord-1-slider-label"].textContent="G",this["#coord-2-slider-label"].textContent="B"),this["#alpha-slider-label"].textContent="α"}else this["#coord-0-slider-label"].textContent="",this["#coord-1-slider-label"].textContent="",this["#coord-2-slider-label"].textContent="",this["#alpha-slider-label"].textContent=""}#Le(){let t=this.#me();for(let e of this["#color-model-menu"].querySelectorAll("x-menuitem"))e.toggled=e.value===t,e.hidden=e.hasAttribute("data-srgb-only")&&"srgb"!==this.#fe;for(let t of this["#color-model-menu"].querySelectorAll("hr"))t.hidden="srgb"!==this.#fe&&"rgb"!==t.nextElementSibling?.value;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-rgblinearsliders")&&customElements.define("x-rgblinearsliders",xa);class wa extends HTMLElement{static#E=Hs`<template><div id="hue-slider" class="slider" part="slider"><div id="hue-slider-track" class="slider-track"><svg id="hue-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="hue-slider-marker" class="slider-marker"><span id="hue-slider-label" class="slider-label">H</span></div></div></div><div id="chroma-slider" class="slider" part="slider"><div id="chroma-slider-track" class="slider-track"><svg id="chroma-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="chroma-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="chroma-slider-marker" class="slider-marker"><span id="chroma-slider-label" class="slider-label">C</span></div></div></div><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}.slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}`;get value(){let[t,e,i]=this.#be;return[t,e,i,this.#ge]}set value([t,e,i,s]){this.#be=[t,e,i],this.#ge=s,this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#Wt=!1;#fe="lch";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(wa.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,wa.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Ge(t))),this["#chroma-slider"].addEventListener("pointerdown",(t=>this.#Xe(t))),this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#_e(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){Gn.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css"))):"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It()))}#Se(){this.#Le()}#Ge(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),360*e!==this.#be[2]&&(this.#be[2]=360*e,this.#Ze(),this.#Ue(),this.#Ye(),this.#qe(),this.#We(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#Xe(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#chroma-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#chroma-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklch"===this.#fe?e=vi(e*ga,0,ga):"lch"===this.#fe&&(e=vi(e*ba,0,ba)),e!==this.#be[1]&&(this.#be[1]=e,this.#Ve(),this.#Ke(),this.#qe(),this.#We(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#chroma-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#chroma-slider"].addEventListener("pointerup",i=()=>{this["#chroma-slider"].removeEventListener("pointermove",e),this["#chroma-slider"].removeEventListener("pointerup",i),this["#chroma-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#chroma-slider"].addEventListener("pointercancel",i)}#_e(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklch"===this.#fe?e=vi(e,0,1):"lch"===this.#fe&&(e=vi(100*e,0,100)),e!==this.#be[0]&&(this.#be[0]=e,this.#Ve(),this.#Ye(),this.#Je(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#Ze(),this.#Qe(),this.#Ve(),this.#Ke(),this.#Ue(),this.#Ye(),this.#Je(),this.#qe(),this.#We(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#Ze(){let[t,e,i]=this.#be;this["#hue-slider-marker"].style.left=i/360*100+"%"}#Qe(){let t=[];if("oklch"===this.#fe)for(let e=0;e<=360;e+=5)t.push({space:"oklch",coords:[.8,ga,e]});else if("lch"===this.#fe)for(let e=0;e<=360;e+=5)t.push({space:"lch",coords:[75,ba,e]});t=t.map((t=>pi(t))),this["#hue-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${t.join(",")})`}#Ve(){if("none"===this.#we)this["#hue-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#hue-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i=l/e;Qt({space:this.#fe,coords:[s,n,360*i]},this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Ke(){let[t,e,i]=this.#be;"oklch"===this.#fe?this["#chroma-slider-marker"].style.left=e>ga?"calc(100% + 18px)":e/ga*100+"%":"lch"===this.#fe&&(this["#chroma-slider-marker"].style.left=e>ba?"calc(100% + 18px)":e/ba*100+"%")}#Ue(){let[,,t]=this.#be,e=[];if("oklch"===this.#fe)for(let i=0;i<=ga;i+=.03)e.push({space:"oklch",coords:[.75,i,t]});else if("lch"===this.#fe)for(let i=0;i<=ba;i+=10)e.push({space:"lch",coords:[75,i,t]});e=e.map((t=>pi(t))),this["#chroma-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${e.join(",")})`}#Ye(){if("none"===this.#we)this["#chroma-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#chroma-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i=l/e,r="lch"===this.#fe?ba:ga;Qt({space:this.#fe,coords:[s,i*r,n]},this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#chroma-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#chroma-slider-gamut-path"].removeAttribute("d")}}#Je(){let[t,e,i]=this.#be;"oklch"===this.#fe?this["#lightness-slider-marker"].style.left=100*t+"%":"lch"===this.#fe&&(this["#lightness-slider-marker"].style.left=t+"%")}#qe(){let[,t,e]=this.#be,i=[];if("oklch"===this.#fe)for(let s=0;s<=1;s+=.02)i.push({space:"oklch",coords:[s,t,e]});else if("lch"===this.#fe)for(let s=0;s<=100;s+=2)i.push({space:"lch",coords:[s,t,e]});i=i.map((t=>pi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${i.join(",")})`}#We(){if("none"===this.#we)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i=l/e;Qt({space:this.#fe,coords:["oklch"===this.#fe?i:100*i,s,n]},this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){let[t,e,i]=this.#be,s=[{space:this.#fe,coords:[t,e,i],alpha:0},{space:this.#fe,coords:[t,e,i],alpha:1}];s=s.map((t=>pi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#fe} to right, ${s.join(",")})`}#Ie(){if("none"===this.#we)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#chroma-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{Qt({space:this.#fe,coords:this.#be},this.#we)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#chroma-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#chroma-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Me(){this["#hue-slider-label"].hidden=!this.#ve,this["#chroma-slider-label"].hidden=!this.#ve,this["#lightness-slider-label"].hidden=!this.#ve,this["#alpha-slider-label"].hidden=!this.#ve}#Le(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-lchlinearsliders")&&customElements.define("x-lchlinearsliders",wa);class va extends HTMLElement{static#E=Hs`<template><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="a-slider" class="slider" part="slider"><div id="a-slider-track" class="slider-track"><svg id="a-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="a-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="a-slider-marker" class="slider-marker"><span id="a-slider-label" class="slider-label">A</span></div></div></div><div id="b-slider" class="slider" part="slider"><div id="b-slider-track" class="slider-track"><svg id="b-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="b-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="b-slider-marker" class="slider-marker"><span id="b-slider-label" class="slider-label">B</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}.slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}`;get value(){let[t,e,i]=this.#be;return[t,e,i,this.#ge]}set value([t,e,i,s]){this.#be=[t,e,i],this.#ge=s,this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#Wt=!1;#fe="lab";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(va.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,va.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#_e(t))),this["#a-slider"].addEventListener("pointerdown",(t=>this.#ti(t))),this["#b-slider"].addEventListener("pointerdown",(t=>this.#ei(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){Gn.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css"))):"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It()))}#Se(){this.#Le()}#_e(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklab"===this.#fe?e=vi(e,0,1):"lab"===this.#fe&&(e=vi(100*e,0,100)),e!==this.#be[0]&&(this.#be[0]=e,this.#ii(),this.#si(),this.#ni(),this.#ai(),this.#Je(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#ti(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#a-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#a-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),"oklab"===this.#fe?e=.8*e-.4:"lab"===this.#fe&&(e=250*e-125),e!==this.#be[1]&&(this.#be[1]=e,this.#qe(),this.#We(),this.#li(),this.#ni(),this.#ai(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#a-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#a-slider"].addEventListener("pointerup",i=()=>{this["#a-slider"].removeEventListener("pointermove",e),this["#a-slider"].removeEventListener("pointerup",i),this["#a-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#a-slider"].addEventListener("pointercancel",i)}#ei(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#b-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#b-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),"oklab"===this.#fe?e=.8*e-.4:"lab"===this.#fe&&(e=250*e-125),e!==this.#be[2]&&(this.#be[2]=e,this.#qe(),this.#We(),this.#ii(),this.#si(),this.#ri(),this.#ni(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#b-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#b-slider"].addEventListener("pointerup",i=()=>{this["#b-slider"].removeEventListener("pointermove",e),this["#b-slider"].removeEventListener("pointerup",i),this["#b-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#b-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#Je(),this.#qe(),this.#We(),this.#li(),this.#ii(),this.#si(),this.#ri(),this.#ni(),this.#ai(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#Je(){let[t,e,i]=this.#be;"oklab"===this.#fe?this["#lightness-slider-marker"].style.left=100*t+"%":"lab"===this.#fe&&(this["#lightness-slider-marker"].style.left=t+"%")}#qe(){let t=[],[e,i,s]=this.#be;if("oklab"===this.#fe)for(let e=0;e<=1;e+=.02)t.push({space:"oklab",coords:[e,i,s]});else if("lab"===this.#fe)for(let e=0;e<=100;e+=2)t.push({space:"lab",coords:[e,i,s]});t=t.map((t=>pi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${t.join(",")})`}#We(){if("none"===this.#we)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i,r=l/e;"lab"===this.#fe?i={space:this.#fe,coords:[100*r,s,n]}:"oklab"===this.#fe&&(i={space:this.#fe,coords:[r,s,n]}),Qt(i,this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*r)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#li(){let[t,e,i]=this.#be;"oklab"===this.#fe?this["#a-slider-marker"].style.left=e<-.4?"calc(0% - 18px)":e>.4?"calc(100% + 18px)":(e+.4)/.8*100+"%":"lab"===this.#fe&&(this["#a-slider-marker"].style.left=e<-125?"calc(0% - 18px)":e>125?"calc(100% + 18px)":(e+125)/250*100+"%")}#ii(){let[t,,e]=this.#be,i=[];if("oklab"===this.#fe)for(let s=-.4;s<=.4;s+=.05)i.push({space:"oklab",coords:[t,s,e]});else if("lab"===this.#fe)for(let s=-125;s<=125;s+=5)i.push({space:"lab",coords:[t,s,e]});i=i.map((t=>pi(t))),this["#a-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${i.join(",")})`}#si(){if("none"===this.#we)this["#a-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#a-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i,r=l/e;"lab"===this.#fe?i={space:this.#fe,coords:[s,250*r-125,n]}:"oklab"===this.#fe&&(i={space:this.#fe,coords:[s,.8*r-.4,n]}),Qt(i,this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*r)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#a-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#a-slider-gamut-path"].removeAttribute("d")}}#ri(){let[t,e,i]=this.#be;"oklab"===this.#fe?this["#b-slider-marker"].style.left=i<-.4?"calc(0% - 18px)":i>.4?"calc(100% + 18px)":(i+.4)/.8*100+"%":"lab"===this.#fe&&(this["#b-slider-marker"].style.left=i<-125?"calc(0% - 18px)":i>125?"calc(100% + 18px)":(i+125)/250*100+"%")}#ni(){let[t,e]=this.#be,i=[];if("oklab"===this.#fe)for(let s=-.4;s<=.4;s+=.05)i.push({space:"oklab",coords:[t,e,s]});else if("lab"===this.#fe)for(let s=-125;s<=125;s+=5)i.push({space:"lab",coords:[t,e,s]});i=i.map((t=>pi(t))),this["#b-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${i.join(",")})`}#ai(){if("none"===this.#we)this["#b-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#b-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i,r=l/e;"lab"===this.#fe?i={space:this.#fe,coords:[s,n,250*r-125]}:"oklab"===this.#fe&&(i={space:this.#fe,coords:[s,n,.8*r-.4]}),Qt(i,this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*r)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#b-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#b-slider-gamut-path"].removeAttribute("d")}}#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){let[t,e,i]=this.#be,s=[{space:this.#fe,coords:[t,e,i],alpha:0},{space:this.#fe,coords:[t,e,i],alpha:1}];s=s.map((t=>pi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#fe} to right, ${s.join(",")})`}#Ie(){if("none"===this.#we)this["#a-slider-marker"].removeAttribute("data-warn"),this["#b-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{Qt({space:this.#fe,coords:this.#be},this.#we)?(this["#a-slider-marker"].removeAttribute("data-warn"),this["#b-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#a-slider-marker"].setAttribute("data-warn",""),this["#b-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Me(){this["#a-slider-label"].hidden=!this.#ve,this["#b-slider-label"].hidden=!this.#ve,this["#lightness-slider-label"].hidden=!this.#ve,this["#alpha-slider-label"].hidden=!this.#ve}#Le(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-lablinearsliders")&&customElements.define("x-lablinearsliders",va);class ka extends HTMLElement{static#E=Hs`<template><div id="x-slider" class="slider" part="slider"><div id="x-slider-track" class="slider-track"><svg id="x-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="x-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="x-slider-marker" class="slider-marker"><span id="x-slider-label" class="slider-label">X</span></div></div></div><div id="y-slider" class="slider" part="slider"><div id="y-slider-track" class="slider-track"><svg id="y-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="y-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="y-slider-marker" class="slider-marker"><span id="y-slider-label" class="slider-label">Y</span></div></div></div><div id="z-slider" class="slider" part="slider"><div id="z-slider-track" class="slider-track"><svg id="z-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="z-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="z-slider-marker" class="slider-marker"><span id="z-slider-label" class="slider-label">Z</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}.slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}`;get value(){let[t,e,i]=this.#be;return[t,e,i,this.#ge]}set value([t,e,i,s]){this.#be=[t,e,i],this.#ge=s,this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#Wt=!1;#fe="xyz-d65";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(ka.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,ka.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#x-slider"].addEventListener("pointerdown",(t=>this.#oi(t))),this["#y-slider"].addEventListener("pointerdown",(t=>this.#hi(t))),this["#z-slider"].addEventListener("pointerdown",(t=>this.#di(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){Gn.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css"))):"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It()))}#Se(){this.#Le()}#oi(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#x-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#x-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#be[0]&&(this.#be[0]=e,this.#ci(),this.#ui(),this.#pi(),this.#mi(),this.#bi(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#x-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#x-slider"].addEventListener("pointerup",i=()=>{this["#x-slider"].removeEventListener("pointermove",e),this["#x-slider"].removeEventListener("pointerup",i),this["#x-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#x-slider"].addEventListener("pointercancel",i)}#hi(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#y-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#y-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#be[1]&&(this.#be[1]=e,this.#gi(),this.#fi(),this.#xi(),this.#ui(),this.#mi(),this.#bi(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#y-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#y-slider"].addEventListener("pointerup",i=()=>{this["#y-slider"].removeEventListener("pointermove",e),this["#y-slider"].removeEventListener("pointerup",i),this["#y-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#y-slider"].addEventListener("pointercancel",i)}#di(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#z-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#z-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#be[2]&&(this.#be[2]=e,this.#gi(),this.#fi(),this.#ui(),this.#pi(),this.#wi(),this.#mi(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#z-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#z-slider"].addEventListener("pointerup",i=()=>{this["#z-slider"].removeEventListener("pointermove",e),this["#z-slider"].removeEventListener("pointerup",i),this["#z-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#z-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#ci(),this.#gi(),this.#fi(),this.#xi(),this.#ui(),this.#pi(),this.#wi(),this.#mi(),this.#bi(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#ci(){let[t]=this.#be;this["#x-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#gi(){let[,t,e]=this.#be,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#fe,coords:[s,t,e]});i=i.map((t=>pi(t))),this["#x-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${i.join(",")})`}#fi(){if("none"===this.#we)this["#x-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#x-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i=l/e;Qt({space:this.#fe,coords:[i,s,n]},this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#x-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#x-slider-gamut-path"].removeAttribute("d")}}#xi(){let[,t]=this.#be;this["#y-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#ui(){let[t,,e]=this.#be,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#fe,coords:[t,s,e]});i=i.map((t=>pi(t))),this["#y-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${i.join(",")})`}#pi(){if("none"===this.#we)this["#y-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#y-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i=l/e;Qt({space:this.#fe,coords:[s,i,n]},this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#y-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#y-slider-gamut-path"].removeAttribute("d")}}#wi(){let[,,t]=this.#be;this["#z-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#mi(){let[t,e]=this.#be,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#fe,coords:[t,e,s]});i=i.map((t=>pi(t))),this["#z-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${i.join(",")})`}#bi(){if("none"===this.#we)this["#z-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#z-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i=l/e;Qt({space:this.#fe,coords:[s,n,i]},this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#z-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#z-slider-gamut-path"].removeAttribute("d")}}#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){let[t,e,i]=this.#be,s=[{space:this.#fe,coords:[t,e,i],alpha:0},{space:this.#fe,coords:[t,e,i],alpha:1}];s=s.map((t=>pi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#fe} to right, ${s.join(",")})`}#Ie(){if("none"===this.#we)this["#x-slider-marker"].removeAttribute("data-warn"),this["#y-slider-marker"].removeAttribute("data-warn"),this["#z-slider-marker"].removeAttribute("data-warn");else{Qt({space:this.#fe,coords:this.#be},this.#we)?(this["#x-slider-marker"].removeAttribute("data-warn"),this["#y-slider-marker"].removeAttribute("data-warn"),this["#z-slider-marker"].removeAttribute("data-warn")):(this["#x-slider-marker"].setAttribute("data-warn",""),this["#y-slider-marker"].setAttribute("data-warn",""),this["#z-slider-marker"].setAttribute("data-warn",""))}}#Me(){this["#x-slider-label"].hidden=!this.#ve,this["#y-slider-label"].hidden=!this.#ve,this["#z-slider-label"].hidden=!this.#ve,this["#alpha-slider-label"].hidden=!this.#ve}#Le(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-xyzlinearsliders")&&customElements.define("x-xyzlinearsliders",ka);class ya extends HTMLElement{static#E=Hs`<template><div id="hue-slider" part="slider"><div id="hue-slider-track"><svg id="hue-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path"></path></svg><div id="hue-slider-marker"><span id="hue-slider-label">H</span></div></div></div><div id="planar-slider" part="slider"><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#hue-slider{width:100%;height:35px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#hue-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#hue-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#hue-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#hue-slider-gamut-svg{width:100%;height:100%}#hue-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#hue-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-gamut-svg{width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){if("hsv"===this.#xe||"hsl"===this.#xe){let[t,e,i]=this.#be,[s,n,a]=ui({space:this.#xe,coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#ge]}}set value([t,e,i,s]){if("hsv"===this.#xe||"hsl"===this.#xe){let[n,a,l]=ui({space:"srgb",coords:[t,e,i]},this.#xe).coords;this.#be=[n/360,a/100,l/100],this.#ge=s}for(let t=0;t<this.#be.length;t+=1)ma(this.#be[t])&&(this.#be[t]=0);this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#$=new ResizeObserver((()=>this.#vi()));#Wt=!1;#fe="srgb";#xe="hsv";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(ya.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,ya.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Ge(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#ki(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#xe=Gn.getConfig(`${this.localName}:model`,"hsv"),this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),this.#$.observe(this),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#$.unobserve(this),Gn.removeEventListener("configchange",this.#vt)}#$e(){return"none"===this.#we||"srgb"===this.#we&&["srgb","srgb-linear"].includes(this.#fe)||"p3"===this.#we&&["srgb","srgb-linear","p3"].includes(this.#fe)||"a98rgb"===this.#we&&["srgb","srgb-linear","a98rgb"].includes(this.#fe)||"rec2020"===this.#we&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#fe)||"prophoto"===this.#we?"none":this.#we}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#xe){let[e,i,s]=this.value;this.#xe=t,this.value=[e,i,s,this.#ge]}}else if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#gamut-hints-menu"])e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css")));else if(e.parentElement===this["#color-model-menu"]){if(e.value!==this.#xe){let[t,i,s]=this.value;this.#xe=e.value,this.value=[t,i,s,this.#ge],Gn.setConfig(`${this.localName}:model`,e.value)}}else"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It())}#Se(){this.#Le()}#vi(){this.#yi()}#Ge(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this["#planar-slider-gamut-path"].style.transition="d 60ms ease",this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#be[0]&&(this.#be[0]=e,this.#Ze(),this.#Ve(),this.#Ci(),this.#Ei(),this.#yi(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this["#planar-slider-gamut-path"].style.transition="none",this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#ki(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#Wt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;if(i=vi(i,0,1),n=vi(n,0,1),"hsv"===this.#xe){let[t,e,s]=this.#be;e=i,s=1-n,this.#be=[t,e,s]}else if("hsl"===this.#xe){let[t,e,s]=this.#be;e=i,s=1-n,this.#be=[t,e,s]}this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ve(),this.#Ci(),this.#Be(),this.#Ie()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#Ze(),this.#Qe(),this.#Ve(),this.#Ci(),this.#Ei(),this.#zi(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#Ze(){if("hsv"===this.#xe||"hsl"===this.#xe){let[t]=this.#be;this["#hue-slider-marker"].style.left=100*t+"%"}}#Qe(){if("hsv"===this.#xe||"hsl"===this.#xe){let t="srgb-linear"===this.#fe?"srgb-linear":"srgb",e=[{space:this.#fe,coords:[1,0,0]},{space:this.#fe,coords:[1,1,0]},{space:this.#fe,coords:[0,1,0]},{space:this.#fe,coords:[0,1,1]},{space:this.#fe,coords:[0,0,1]},{space:this.#fe,coords:[1,0,1]},{space:this.#fe,coords:[1,0,0]}];e=e.map((t=>pi(t))).join(","),this["#hue-slider"].style.background=`linear-gradient(in ${t} to right, ${e})`}}#Ve(){let t=this.#$e();if("none"===t)this["#hue-slider-gamut-path"].removeAttribute("d");else if("hsv"===this.#xe||"hsl"===this.#xe){let[e,i,s]=this.#be,n=this["#hue-slider"].clientWidth,a=1/window.devicePixelRatio,l=[];{let e=null;for(let r=0;r<=n;r+=a){let a=r/n;Qt({space:this.#fe,coords:ui({space:this.#xe,coords:[360*a,100*i,100*s]},"srgb").coords},t)?(null===e&&(e=[],l.push(e)),e.push(100*a)):e=null}l=l.map((t=>[t.at(0),t.at(-1)]))}if(l.length>0){let t=l.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Ci(){if("hsv"===this.#xe||"hsl"===this.#xe){let[t,e,i]=this.#be,s=100*e,n=100-100*i;this["#planar-slider-marker"].style.left=`${s}%`,this["#planar-slider-marker"].style.top=`${n}%`}}#Ei(){let[t]=this.#be,e="srgb-linear"===this.#fe?"srgb-linear":"srgb",i="srgb-linear"===this.#fe?"srgb":this.#fe;if("hsv"===this.#xe){let s=[{space:this.#fe,coords:ui({space:"hsv",coords:[360*t,0,100]},i).coords},{space:this.#fe,coords:ui({space:"hsv",coords:[360*t,100,100]},i).coords}],n=[{space:this.#fe,coords:ui({space:"hsv",coords:[360*t,0,100]},i).coords},{space:this.#fe,coords:ui({space:"hsv",coords:[360*t,0,0]},i).coords}];this["#planar-slider"].style.background=`\n        linear-gradient(in ${e} to bottom, ${n.map((t=>pi(t))).join(",")}),\n        linear-gradient(in ${e} to right,  ${s.map((t=>pi(t))).join(",")})\n      `,this["#planar-slider"].style.backgroundBlendMode="multiply, normal"}else if("hsl"===this.#xe){let s=[{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,0,50]},i).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,100,50]},i).coords}],n=[{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,0,0]},i).coords}],a=[{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,0,0]},i).coords,alpha:0},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,0,0]},i).coords,alpha:0}];s=s.map((t=>pi(t))),n=n.map((t=>pi(t))),a=a.map((t=>pi(t))),this["#planar-slider"].style.background=`\n        linear-gradient(in ${e} to bottom, ${a.join(",")}),\n        linear-gradient(in ${e} to bottom, ${n.join(",")}),\n        linear-gradient(in ${e} to right, ${s.join(",")})\n      `,this["#planar-slider"].style.backgroundBlendMode="normal, multiply, normal"}}#zi(){let t=this.#$e();if("none"===t)this["#planar-slider-gamut-path"].removeAttribute("d");else{let e=this["#planar-slider"].clientWidth,i=this["#planar-slider"].clientHeight,s=1/window.devicePixelRatio,[n]=this.#be,a=[],l=(e,i,s)=>Qt({space:this.#fe,coords:ui({space:this.#xe,coords:[360*e,100*i,100*s]},"srgb").coords},t);if("hsv"===this.#xe){let t=0;for(let r=0;r<i;r+=s)for(;t<=e;){if(!1===l(n,t/e,1-r/i)){a.push([t,r]);break}t+=s}a.length>0&&a.at(-1)[0]<e&&a.push([e,a.at(-1)[1]])}else if("hsl"===this.#xe)for(let t=0;t<i;t+=s){let r=e;for(;r>=0&&!l(n,r/e,1-t/i);)r-=10;let o=ua(r+10,e);for(;r<=o&&(r+=s,!1!==l(n,r/e,1-t/i)););a.push([r,t])}if(0===a.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=a.map((([t,e],i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ");this["#planar-slider-gamut-path"].setAttribute("d",t),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${e} ${i}`)}}}#yi=Fn(this.#zi,40,this);#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){if("hsv"===this.#xe||"hsl"===this.#xe){let[t,e,i]=this.#be,s="srgb-linear"===this.#fe?"srgb":this.#fe,n=[{space:this.#fe,coords:ui({space:this.#xe,coords:[360*t,100*e,100*i]},s).coords,alpha:0},{space:this.#fe,coords:ui({space:this.#xe,coords:[360*t,100*e,100*i]},s).coords,alpha:1}];n=n.map((t=>pi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(in srgb to right, ${n})`}}#Ie(){let t=this.#$e();if("none"===t)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else if("hsv"===this.#xe||"hsl"===this.#xe){let[e,i,s]=this.#be;Qt({space:this.#fe,coords:ui({space:this.#xe,coords:[360*e,100*i,100*s]},"srgb").coords},t)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Me(){this["#hue-slider-label"].hidden=!this.#ve,this["#alpha-slider-label"].hidden=!this.#ve}#Le(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#xe;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-rgbplanarsliders")&&customElements.define("x-rgbplanarsliders",ya);class Ca extends HTMLElement{static#E=Hs`<template><div id="hue-slider" part="slider"><div id="hue-slider-track"><svg id="hue-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path"></path></svg><div id="hue-slider-marker"><span id="hue-slider-label">H</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#hue-slider{width:100%;height:35px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#hue-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#hue-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#hue-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#hue-slider-gamut-svg{width:100%;height:100%}#hue-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#hue-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){let[t,e,i]=this.#be;return[t,e,i,this.#ge]}set value([t,e,i,s]){this.#be=[t,e,i],this.#ge=s,this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#$=new ResizeObserver((()=>this.#vi()));#Wt=!1;#fe="lch";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(Ca.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,Ca.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Ge(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#ki(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),this.#$.observe(this),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#$.unobserve(this),Gn.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css"))):"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It()))}#Se(){this.#Le()}#vi(){this.#yi()}#Ge(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this["#planar-slider-gamut-path"].style.transition="d 60ms ease",this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),360*e!==this.#be[2]&&(this.#be[2]=360*e,this.#Ze(),this.#Ve(),this.#Ci(),this.#Ei(),this.#yi(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this["#planar-slider-gamut-path"].style.transition="none",this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#ki(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#Wt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=vi(i,0,1),n=vi(n,0,1);let[a,l,r]=this.#be;"lch"===this.#fe?(a=100*i,l=(1-n)*ba):"oklch"===this.#fe&&(a=i,l=(1-n)*ga),this.#be=[a,l,r],this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ve(),this.#Ci(),this.#Be(),this.#Ie()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#Ze(),this.#Qe(),this.#Ve(),this.#Ci(),this.#Ei(),this.#zi(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#Ze(){let[t,e,i]=this.#be;this["#hue-slider-marker"].style.left=i/360*100+"%"}#Qe(){let t=[];if("oklch"===this.#fe)for(let e=0;e<=360;e+=5)t.push({space:"oklch",coords:[.8,ga,e]});else if("lch"===this.#fe)for(let e=0;e<=360;e+=5)t.push({space:"lch",coords:[75,ba,e]});t=t.map((t=>pi(t))),this["#hue-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${t.join(",")})`}#Ve(){if("none"===this.#we)this["#hue-slider-gamut-path"].removeAttribute("d");else{let[t,e]=this.#be,i=this["#hue-slider"].clientWidth,s=1/window.devicePixelRatio,n=[];{let a=null;for(let l=0;l<=i;l+=s){let s,r=l/i;"lch"===this.#fe?s={space:"lch",coords:[t,e,360*r]}:"oklch"===this.#fe&&(s={space:"oklch",coords:[t,e,360*r]}),Qt(s,this.#we)?(null===a&&(a=[],n.push(a)),a.push(100*r)):a=null}n=n.map((t=>[t.at(0),t.at(-1)]))}if(n.length>0){let t=n.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Ci(){if("lch"===this.#fe){let[t,e]=this.#be,i=t,s=100-e/ba*100;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}else if("oklch"===this.#fe){let[t,e]=this.#be,i=100*t,s=100-e/ga*100;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}}#Ei(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[,,n]=this.#be;e.clearRect(0,0,t.width,t.height);for(let t=0;t<=i;t+=1){let a=[];for(let e=0;e<=s;e+=10){let l,r=t/i,o=1-e/s;"lch"===this.#fe?l={space:"lch",coords:[100*r,o*ba,n]}:"oklch"===this.#fe&&(l={space:"oklch",coords:[r,o*ga,n]}),a.push(l)}let l=e.createLinearGradient(t,0,i,s);for(let t=0;t<a.length;t+=1){let e=a[t];l.addColorStop(t/a.length,pi(e))}e.fillStyle=l,e.fillRect(t,0,1,s)}}#zi(){if("none"===this.#we)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this.clientWidth,e=this.clientHeight,i=1/window.devicePixelRatio,[,,s]=this.#be,n=[],a=(t,e,i)=>{let s;return"lch"===this.#fe?s={space:"lch",coords:[100*t,e*ba,i]}:"oklch"===this.#fe&&(s={space:"oklch",coords:[t,e*ga,i]}),Qt(s,this.#we)};for(let l=0;l<=t;l+=i){let r=e;for(;r>=0&&a(l/t,1-r/e,s);)r-=10;let o=pa(r+10,e);for(;r<=o&&(r+=i,!a(l/t,1-r/e,s)););n.push([l,r])}if(0===n.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=n.map((([t,e],i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ");this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#yi=Fn(this.#zi,40,this);#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){let[t,e,i]=this.#be,s=[{space:this.#fe,coords:[t,e,i],alpha:0},{space:this.#fe,coords:[t,e,i],alpha:1}];s=s.map((t=>pi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#fe} to right, ${s.join(",")})`}#Ie(){if("none"===this.#we)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else{Qt({space:this.#fe,coords:[...this.#be]},this.#we)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Me(){this["#hue-slider-label"].hidden=!this.#ve,this["#alpha-slider-label"].hidden=!this.#ve}#Le(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-lchplanarsliders")&&customElements.define("x-lchplanarsliders",Ca);class Ea extends HTMLElement{static#E=Hs`<template><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#lightness-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#lightness-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#lightness-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#lightness-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#lightness-slider-gamut-svg{width:100%;height:100%}#lightness-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#lightness-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){let[t,e,i]=this.#be;return[t,e,i,this.#ge]}set value([t,e,i,s]){this.#be=[t,e,i],this.#ge=s,this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#$=new ResizeObserver((()=>this.#vi()));#Wt=!1;#fe="lab";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(Ea.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,Ea.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#_e(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#ki(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),this.#$.observe(this),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#$.unobserve(this),Gn.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css"))):"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It()))}#Se(){this.#Le()}#vi(){this.#yi()}#_e(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklab"===this.#fe?e=vi(e,0,1):"lab"===this.#fe&&(e=vi(100*e,0,100)),e!==this.#be[0]&&(this.#be[0]=e,this.#Je(),this.#yi(),this.#Ei(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#ki(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#Wt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=vi(i,0,1),n=vi(n,0,1);let[a,l,r]=this.#be;"lab"===this.#fe?(l=250*i-125,r=250*(1-n)-125):"oklab"===this.#fe&&(l=.8*i-.4,r=.8*(1-n)-.4),this.#be=[a,l,r],this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ci(),this.#qe(),this.#We(),this.#Be(),this.#Ie()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#Ci(),this.#Ei(),this.#zi(),this.#Je(),this.#qe(),this.#We(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#Ci(){let t,e,[i,s,n]=this.#be;"lab"===this.#fe?(t=s<-125?"calc(0% - 18px)":s>125?"calc(100% + 18px)":(s+125)/250*100+"%",e=n<-125?"calc(0% - 18px)":n>125?"calc(100% + 18px)":100-(n+125)/250*100+"%"):"oklab"===this.#fe&&(t=s<-.4?"calc(0% - 18px)":s>.4?"calc(100% + 18px)":(s+.4)/.8*100+"%",e=n<-.4?"calc(0% - 18px)":n>.4?"calc(100% + 18px)":100-(n+.4)/.8*100+"%"),this["#planar-slider-marker"].style.left=t,this["#planar-slider-marker"].style.top=e}#Ei(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[n]=this.#be;e.clearRect(0,0,i,s);for(let t=0;t<=i;t+=1){let a=[];for(let e=0;e<=s;e+=10){let l,r=t/i,o=1-e/s;"lab"===this.#fe?l={space:"lab",coords:[n,250*r-125,250*o-125]}:"oklab"===this.#fe&&(l={space:"oklab",coords:[n,.8*r-.4,.8*o-.4]}),a.push(l)}let l=e.createLinearGradient(t,0,i,s);for(let t=0;t<a.length;t+=1){let e=a[t];l.addColorStop(t/a.length,pi(e))}e.fillStyle=l,e.fillRect(t,0,1,s)}}#zi(){if("none"===this.#we)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this["#planar-slider-gamut-svg"].clientWidth,e=this["#planar-slider-gamut-svg"].clientHeight,i=ca(ha(t/2,2)+ha(e/2,2)),s={x:t/2,y:e/2},[n,a,l]=this.#be,r=[];for(let a=0;a<360;a+=3){let l;for(let r=i;r>=0;r-=15){let i,o,h=Ei({x:t/2,y:e/2-r},s,a);if("lab"===this.#fe?(i=h.x/t*250-125,o=-(h.y/e*250-125)):"oklab"===this.#fe&&(i=h.x/t*.8-.4,o=-(h.y/e*.8-.4)),Qt({space:this.#fe,coords:[n,i,o]},this.#we)){l=r;break}}for(let o=l;o<=i;o+=1){let i,l,h=Ei({x:t/2,y:e/2-o},s,a);if("lab"===this.#fe?(i=h.x/t*250-125,l=-(h.y/e*250-125)):"oklab"===this.#fe&&(i=h.x/t*.8-.4,l=-(h.y/e*.8-.4)),!1===Qt({space:this.#fe,coords:[n,i,l]},this.#we)){r.push(h);break}}}if(0===r.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=r.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#yi=Fn(this.#zi,40,this);#Je(){let[t,e,i]=this.#be;"oklab"===this.#fe?this["#lightness-slider-marker"].style.left=100*t+"%":"lab"===this.#fe&&(this["#lightness-slider-marker"].style.left=t+"%")}#qe(){let[,t,e]=this.#be,i=[];if("oklab"===this.#fe)for(let s=0;s<=1;s+=.02)i.push({space:"oklab",coords:[s,t,e]});else if("lab"===this.#fe)for(let s=0;s<=100;s+=2)i.push({space:"lab",coords:[s,t,e]});i=i.map((t=>pi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${i.join(",")})`}#We(){if("none"===this.#we)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#be,a=null;for(let l=0;l<=e;l+=i){let i,r=l/e;"lab"===this.#fe?i={space:this.#fe,coords:[100*r,s,n]}:"oklab"===this.#fe&&(i={space:this.#fe,coords:[r,s,n]}),Qt(i,this.#we)?(null===a&&(a=[],t.push(a)),a.push(100*r)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){let[t,e,i]=this.#be,s=[{space:this.#fe,coords:[t,e,i],alpha:0},{space:this.#fe,coords:[t,e,i],alpha:1}];s=s.map((t=>pi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#fe} to right, ${s.join(",")})`}#Ie(){if("none"===this.#we)this["#planar-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{Qt({space:this.#fe,coords:[...this.#be]},this.#we)?(this["#planar-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#planar-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Me(){this["#lightness-slider-label"].hidden=!this.#ve,this["#alpha-slider-label"].hidden=!this.#ve}#Le(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-labplanarsliders")&&customElements.define("x-labplanarsliders",Ea);class za extends HTMLElement{static#E=Hs`<template><div id="linear-slider" class="slider" part="slider"><div id="linear-slider-track" class="slider-track"><svg id="linear-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="linear-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="linear-slider-marker" class="slider-marker"><span id="linear-slider-label" class="slider-label">L</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="x-zy"><x-label>X-ZY</x-label></x-menuitem><x-menuitem value="y-xz"><x-label>Y-XZ</x-label></x-menuitem><x-menuitem value="z-xy"><x-label>Z-XY</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#linear-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#linear-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#linear-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#linear-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#linear-slider-gamut-svg{width:100%;height:100%}#linear-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#linear-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){let[t,e,i]=this.#be;return[t,e,i,this.#ge]}set value([t,e,i,s]){this.#be=[t,e,i],this.#ge=s,this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#$=new ResizeObserver((()=>this.#vi()));#Wt=!1;#fe="xyz-d65";#xe="x-zy";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(za.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,za.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#planar-slider"].addEventListener("pointerdown",(t=>this.#ki(t))),this["#linear-slider"].addEventListener("pointerdown",(t=>this.#Si(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#xe=Gn.getConfig(`${this.localName}:model`,"x-zy"),this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),this.#$.observe(this),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#$.unobserve(this),Gn.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"x-zy";t!==this.#xe&&(this.#xe=t,this.#It())}else if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#color-model-menu"]?e.value!==this.#xe&&(this.#xe=e.value,this.#It(),Gn.setConfig(`${this.localName}:model`,e.value)):e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css"))):"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It()))}#Se(){this.#Le()}#vi(){this.#yi()}#Si(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#linear-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#linear-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e,i=(t-s.x)/s.width;i=vi(i,0,1),"x-zy"===this.#xe?e=0:"y-xz"===this.#xe?e=1:"z-xy"===this.#xe&&(e=2),i!==this.#be[e]&&(this.#be[e]=i,this.#Ei(),this.#yi(),this.#$i(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#linear-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#linear-slider"].addEventListener("pointerup",i=()=>{this["#linear-slider"].removeEventListener("pointermove",e),this["#linear-slider"].removeEventListener("pointerup",i),this["#linear-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#linear-slider"].addEventListener("pointercancel",i)}#ki(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#Wt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=vi(i,0,1),n=vi(n,0,1);let[a,l,r]=this.#be;"x-zy"===this.#xe?this.#be=[a,n,i]:"y-xz"===this.#xe?this.#be=[i,l,n]:"z-xy"===this.#xe&&(this.#be=[i,n,r]),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ci(),this.#Mi(),this.#Li(),this.#Be(),this.#Ie()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#$i(),this.#Mi(),this.#Li(),this.#Ci(),this.#Ei(),this.#zi(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#$i(){let[t,e,i]=this.#be;"x-zy"===this.#xe?this["#linear-slider-marker"].style.left=100*t+"%":"y-xz"===this.#xe?this["#linear-slider-marker"].style.left=100*e+"%":"z-xy"===this.#xe&&(this["#linear-slider-marker"].style.left=100*i+"%")}#Mi(){let[t,e,i]=this.#be,s=[];if("x-zy"===this.#xe)for(let t=0;t<=1;t+=.02)s.push({space:this.#fe,coords:[t,e,i]});else if("y-xz"===this.#xe)for(let e=0;e<=1;e+=.02)s.push({space:this.#fe,coords:[t,e,i]});else if("z-xy"===this.#xe)for(let i=0;i<=1;i+=.02)s.push({space:this.#fe,coords:[t,e,i]});s=s.map((t=>pi(t))),this["#linear-slider"].style.background=`linear-gradient(in ${this.#fe} to right, ${s.join(",")})`}#Li(){if("none"===this.#we)this["#linear-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#linear-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n,a]=this.#be,l=null;for(let r=0;r<=e;r+=i){let i,o=r/e;"x-zy"===this.#xe?i={space:this.#fe,coords:[o,n,a]}:"y-xz"===this.#xe?i={space:this.#fe,coords:[s,o,a]}:"z-xy"===this.#xe&&(i={space:this.#fe,coords:[s,n,o]}),Qt(i,this.#we)?(null===l&&(l=[],t.push(l)),l.push(100*o)):l=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#linear-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#linear-slider-gamut-path"].removeAttribute("d")}}#Ci(){let t,e,[i,s,n]=this.#be;"x-zy"===this.#xe?(t=n<0?"calc(0% - 18px)":n>1?"calc(100% + 18px)":100*n+"%",e=s<0?"calc(0% - 18px)":s>1?"calc(100% + 18px)":100*s+"%"):"y-xz"===this.#xe?(t=i<0?"calc(0% - 18px)":i>1?"calc(100% + 18px)":100*i+"%",e=n<0?"calc(0% - 18px)":n>1?"calc(100% + 18px)":100*n+"%"):"z-xy"===this.#xe&&(t=i<0?"calc(0% - 18px)":i>1?"calc(100% + 18px)":100*i+"%",e=s<0?"calc(0% - 18px)":s>1?"calc(100% + 18px)":100*s+"%"),this["#planar-slider-marker"].style.left=t,this["#planar-slider-marker"].style.top=e}#Ei(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[n,a,l]=this.#be;e.clearRect(0,0,i,s);for(let t=0;t<=i;t+=1){let r=[];for(let e=0;e<=s;e+=10){let o;if("x-zy"===this.#xe){let a=t/i,l=e/s;o={space:this.#fe,coords:[n,l,a]}}else if("y-xz"===this.#xe){let n=t/i,l=e/s;o={space:this.#fe,coords:[n,a,l]}}else if("z-xy"===this.#xe){let n=t/i,a=e/s;o={space:this.#fe,coords:[n,a,l]}}r.push(o)}let o=e.createLinearGradient(t,0,i,s);for(let t=0;t<r.length;t+=1){let e=r[t];o.addColorStop(t/r.length,pi(e))}e.fillStyle=o,e.fillRect(t,0,1,s)}}#zi(){if("none"===this.#we)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this["#planar-slider-gamut-svg"].clientWidth,e=this["#planar-slider-gamut-svg"].clientHeight,i=ca(ha(t/2,2)+ha(e/2,2)),s={x:t/2,y:e/2},n=[];for(let a=0;a<360;a+=3){let l,[r,o,h]=this.#be;for(let n=i;n>=0;n-=15){let i=Ei({x:t/2,y:e/2-n},s,a);if("x-zy"===this.#xe?(h=i.x/t,o=i.y/e):"y-xz"===this.#xe?(r=i.x/t,h=i.y/e):"z-xy"===this.#xe&&(r=i.x/t,o=i.y/e),Qt({space:this.#fe,coords:[r,o,h]},this.#we)){l=n;break}}for(let r=l;r<=i;r+=1){let i=Ei({x:t/2,y:e/2-r},s,a),[l,o,h]=this.#be;if("x-zy"===this.#xe?(h=i.x/t,o=i.y/e):"y-xz"===this.#xe?(l=i.x/t,h=i.y/e):"z-xy"===this.#xe&&(l=i.x/t,o=i.y/e),!1===Qt({space:this.#fe,coords:[l,o,h]},this.#we)){n.push(i);break}}}if(0===n.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=n.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#yi=Fn(this.#zi,40,this);#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){let[t,e,i]=this.#be,s=[{space:this.#fe,coords:[t,e,i],alpha:0},{space:this.#fe,coords:[t,e,i],alpha:1}];s=s.map((t=>pi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#fe} to right, ${s.join(",")})`}#Ie(){if("none"===this.#we)this["#linear-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else{Qt({space:this.#fe,coords:[...this.#be]},this.#we)?(this["#linear-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#linear-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Me(){this["#linear-slider-label"].hidden=!this.#ve,this["#linear-slider-label"].textContent=this.#xe[0].toUpperCase(),this["#alpha-slider-label"].hidden=!this.#ve}#Le(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#xe;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-xyzplanarsliders")&&customElements.define("x-xyzplanarsliders",za);class Sa extends HTMLElement{static#E=Hs`<template><div id="polar-slider" part="slider"><div id="polar-slider-circle"><canvas id="polar-slider-canvas" width="100" height="100"></canvas><svg id="polar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="polar-slider-gamut-path"></path></svg><div id="polar-slider-marker"></div></div></div><div id="linear-slider" part="slider"><div id="linear-slider-track"><div id="linear-slider-marker"><span id="linear-slider-label"></span></div><svg id="linear-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="linear-slider-gamut-path"></path></svg></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">H</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Os`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#polar-slider{display:flex;align-items:center;width:100%;max-width:200px;height:200px;margin:0 auto}#polar-slider-circle{touch-action:pinch-zoom;position:relative;width:100%;height:fit-content;aspect-ratio:1/1;border-radius:999px!important}#polar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#polar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#polar-slider-canvas{position:absolute;width:100%;height:100%;border-radius:9999px}#polar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%;transform:rotate(-90deg)}#polar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#linear-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#linear-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#linear-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#linear-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#linear-slider-gamut-svg{width:100%;height:100%}#linear-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#linear-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){if("hsv"===this.#xe||"hsl"===this.#xe){let[t,e,i]=this.#be,[s,n,a]=ui({space:this.#xe,coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#ge]}}set value([t,e,i,s]){if("hsv"===this.#xe||"hsl"===this.#xe){let[n,a,l]=ui({space:"srgb",coords:[t,e,i]},this.#xe).coords;this.#be=[n/360,a/100,l/100],this.#ge=s}for(let t=0;t<this.#be.length;t+=1)ma(this.#be[t])&&(this.#be[t]=0);this.#It()}get space(){return this.#fe}set space(t){this.#fe!==t&&(this.#fe=t,this.#It())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#vt;#$=new ResizeObserver((()=>this.#vi()));#Wt=!1;#fe="srgb";#xe="hsv";#we="srgb";#ve=!0;#be=[0,0,0];#ge=1;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.append(document.importNode(Sa.#E.content,!0)),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,Sa.#z];for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#polar-slider"].addEventListener("pointerdown",(t=>this.#Ai(t))),this["#linear-slider"].addEventListener("pointerdown",(t=>this.#Si(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#context-menu"].addEventListener("click",(t=>this.#ze(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#xe=Gn.getConfig(`${this.localName}:model`,"hsv"),this.#we=Ds(Gn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ve=Gn.getConfig("x-colorpicker:labels",!0),this.#$.observe(this),Gn.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#$.unobserve(this),Gn.removeEventListener("configchange",this.#vt)}#$e(){return"none"===this.#we||"srgb"===this.#we&&["srgb","srgb-linear"].includes(this.#fe)||"p3"===this.#we&&["srgb","srgb-linear","p3"].includes(this.#fe)||"a98rgb"===this.#we&&["srgb","srgb-linear","a98rgb"].includes(this.#fe)||"rec2020"===this.#we&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#fe)||"prophoto"===this.#we?"none":this.#we}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#xe){let[e,i,s]=this.value;this.#xe=t,this.value=[e,i,s,this.#ge]}}else if("x-colorpicker:gamutHints"===e){let t=Ds(i||"srgb","color.js");t!==this.#we&&(this.#we=t,this.#It())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ve&&(this.#ve=t,this.#Me())}}#ze(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#gamut-hints-menu"])e.value!==this.#we&&(this.#we=e.value,this.#It(),Gn.setConfig("x-colorpicker:gamutHints",Ds(this.#we,"css")));else if(e.parentElement===this["#color-model-menu"]){if(e.value!==this.#xe){let[t,i,s]=this.value;this.#xe=e.value,this.value=[t,i,s,this.#ge],Gn.setConfig(`${this.localName}:model`,e.value)}}else"labels"===e.value&&(this.#ve=!e.toggled,Gn.setConfig("x-colorpicker:labels",this.#ve),this.#It())}#Se(){this.#Le()}#vi(){this.#Ri()}#Ai(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#polar-slider"].getBoundingClientRect();this.#Wt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#polar-slider"].style.cursor="default",this["#polar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=s.width/2,n=t-s.left-i,a=e-s.top-i,l=ha(n,2)+ha(a,2),r=da(a,n);l>ha(i,2)&&(n=i*oa(r),a=i*ra(r),l=ha(n,2)+ha(a,2),r=da(a,n)),this.#be[0]=(r+la)/(2*la),"hsv"!==this.#xe&&"hsl"!==this.#xe||(this.#be[1]=ca(l)/i),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Pi(),this.#Mi(),this.#Li(),this.#Be(),this.#Ie()};n(t.clientX,t.clientY),this["#polar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#polar-slider"].addEventListener("pointerup",i=()=>{this["#polar-slider"].removeEventListener("pointermove",e),this["#polar-slider"].removeEventListener("pointerup",i),this["#polar-slider"].removeEventListener("pointercancel",i),this["#polar-slider"].style.cursor=null,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#polar-slider"].addEventListener("pointercancel",i)}#Si(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#linear-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#linear-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#be[2]&&(this.#be[2]=e,this.#$i(),this.#Ri(),this.#Be(),this.#Ie(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#linear-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#linear-slider"].addEventListener("pointerup",i=()=>{this["#linear-slider"].removeEventListener("pointermove",e),this["#linear-slider"].removeEventListener("pointerup",i),this["#linear-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#linear-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Wt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Wt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=vi(e,0,1),e!==this.#ge&&(this.#ge=e,this.#Fe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Wt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#It(){this.#Pi(),this.#Ti(),this.#Di(),this.#$i(),this.#Mi(),this.#Li(),this.#Fe(),this.#Be(),this.#Ie(),this.#Me()}#Pi(){let[t,e,i]=this.#be;if("hsv"===this.#xe||"hsl"===this.#xe){let i=100,s=fi*(360*t)/180,n=e*i/2,a={x:i/2,y:i/2},l=(i-(a.x+n*oa(s)))/i*100,r=(a.y-n*ra(s))/i*100;this["#polar-slider-marker"].style.left=l+"%",this["#polar-slider-marker"].style.top=r+"%"}}#Ti(){let t="srgb-linear"===this.#fe?"srgb-linear":"srgb",e="srgb-linear"===this.#fe?"srgb":this.#fe;if("hsv"===this.#xe){let i=[{space:this.#fe,coords:ui({space:"hsv",coords:[0,0,100]},e).coords},{space:this.#fe,coords:ui({space:"hsv",coords:[0,0,0]},e).coords}],s=[{space:this.#fe,coords:[1,0,0]},{space:this.#fe,coords:[1,1,0]},{space:this.#fe,coords:[0,1,0]},{space:this.#fe,coords:[0,1,1]},{space:this.#fe,coords:[0,0,1]},{space:this.#fe,coords:[1,0,1]},{space:this.#fe,coords:[1,0,0]}];i=i.map((t=>pi(t))).join(","),s=s.map((t=>pi(t))).join(","),this["#polar-slider-circle"].style.background=`\n        radial-gradient(circle closest-side in ${t}, ${i} 100%),\n        conic-gradient(from -90deg in hsl, ${s})\n      `,this["#polar-slider-circle"].style.backgroundBlendMode="screen, normal"}else if("hsl"===this.#xe){let i=[{space:this.#fe,coords:ui({space:"hsl",coords:[0,0,50]},e).coords,alpha:1},{space:this.#fe,coords:ui({space:"hsl",coords:[0,0,50]},e).coords,alpha:0}],s=[{space:this.#fe,coords:[1,0,0]},{space:this.#fe,coords:[1,1,0]},{space:this.#fe,coords:[0,1,0]},{space:this.#fe,coords:[0,1,1]},{space:this.#fe,coords:[0,0,1]},{space:this.#fe,coords:[1,0,1]},{space:this.#fe,coords:[1,0,0]}];i=i.map((t=>pi(t))).join(","),s=s.map((t=>pi(t))).join(","),this["#polar-slider-circle"].style.background=`\n        radial-gradient(circle closest-side in ${t}, ${i}),\n        conic-gradient(from -90deg in hsl, ${s})\n      `,this["#polar-slider-circle"].style.backgroundBlendMode="normal, normal"}}#Di(){let t=this.#$e();if("none"===t)this["#polar-slider-gamut-path"].removeAttribute("d");else{let e=this["#polar-slider-gamut-svg"].clientWidth,i=this["#polar-slider-gamut-svg"].clientHeight,s=1/window.devicePixelRatio,[n,a,l]=this.#be,r=(e,i,s)=>Qt({space:this.#fe,coords:ui({space:this.#xe,coords:[360*e,100*i,100*s]},"srgb").coords},t),o=[];if("hsv"===this.#xe||"hsl"===this.#xe)for(let t=0;t<=1;t+=.01)for(let n=i/2;n>=0;n-=s){if(r(t,n/(i/2),l)){let s=Ei({x:e/2,y:i/2-n},{x:e/2,y:i/2},360*t);o.push(s);break}}if(0===o.length)this["#polar-slider-gamut-path"].removeAttribute("d");else{let t=o.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#polar-slider-gamut-path"].setAttribute("d",t),this["#polar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${e} ${i}`)}}}#Ri=Fn(this.#Di,40,this);#$i(){let[,t,e]=this.#be;"hsv"!==this.#xe&&"hsl"!==this.#xe||(this["#linear-slider-marker"].style.left=100*e+"%")}#Mi(){if("hsv"===this.#xe){let[t,e]=this.#be,i="srgb-linear"===this.#fe?"srgb-linear":"srgb",s="srgb-linear"===this.#fe?"srgb":this.#fe,n=[{space:this.#fe,coords:ui({space:"hsv",coords:[360*t,100*e,0]},s).coords},{space:this.#fe,coords:ui({space:"hsv",coords:[360*t,100*e,100]},s).coords}];n=n.map((t=>pi(t))).join(","),this["#linear-slider"].style.background=`linear-gradient(in ${i} to right, ${n})`}else if("hsl"===this.#xe){let[t,e]=this.#be,i="srgb-linear"===this.#fe?"srgb-linear":"srgb",s="srgb-linear"===this.#fe?"srgb":this.#fe,n=[{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,100*e,0]},s).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,100*e,50]},s).coords},{space:this.#fe,coords:ui({space:"hsl",coords:[360*t,100*e,100]},s).coords}];n=n.map((t=>pi(t))).join(","),this["#linear-slider"].style.background=`linear-gradient(in ${i} to right, ${n})`}}#Li(){let t=this.#$e();if("none"===t)this["#linear-slider-gamut-path"].removeAttribute("d");else{let[e,i,s]=this.#be,n=this["#linear-slider"].clientWidth,a=1/window.devicePixelRatio,l=[];{let s=null;for(let r=0;r<=n;r+=a)if("hsv"===this.#xe||"hsl"===this.#xe){let a=r/n;Qt({space:this.#fe,coords:ui({space:this.#xe,coords:[360*e,100*i,100*a]},"srgb").coords},t)?(null===s&&(s=[],l.push(s)),s.push(100*a)):s=null}l=l.map((t=>[t.at(0),t.at(-1)]))}if(l.length>0){let t=l.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#linear-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#linear-slider-gamut-path"].removeAttribute("d")}}#Fe(){this["#alpha-slider-marker"].style.left=100*this.#ge+"%"}#Be(){if("hsv"===this.#xe||"hsl"===this.#xe){let[t,e,i]=this.#be,s="srgb-linear"===this.#fe?"srgb":this.#fe,n=[{space:this.#fe,coords:ui({space:this.#xe,coords:[360*t,100*e,100*i]},s).coords,alpha:0},{space:this.#fe,coords:ui({space:this.#xe,coords:[360*t,100*e,100*i]},s).coords,alpha:1}];n=n.map((t=>pi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(in srgb to right, ${n})`}}#Ie(){let t=this.#$e();if("none"===t)this["#polar-slider-marker"].removeAttribute("data-warn"),this["#linear-slider-marker"].removeAttribute("data-warn");else{let[e,i,s]=this.#be;Qt({space:this.#fe,coords:ui({space:this.#xe,coords:[360*e,100*i,100*s]},"srgb").coords},t)?(this["#polar-slider-marker"].removeAttribute("data-warn"),this["#linear-slider-marker"].removeAttribute("data-warn")):(this["#polar-slider-marker"].setAttribute("data-warn",""),this["#linear-slider-marker"].setAttribute("data-warn",""))}}#Me(){this.#ve?("hsv"===this.#xe?this["#linear-slider-label"].textContent="V":"hsl"===this.#xe&&(this["#linear-slider-label"].textContent="L"),this["#alpha-slider-label"].textContent="A"):(this["#linear-slider-label"].textContent="",this["#alpha-slider-label"].textContent="")}#Le(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#xe;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;this["#labels-menu-item"].toggled=this.#ve}}void 0===customElements.get("x-rgbpolarsliders")&&customElements.define("x-rgbpolarsliders",Sa);class $a extends HTMLElement{static observedAttributes=["value","alpha","spaces","disabled","size"];static#E=Hs`<template><div id="preview"></div><x-popover id="popover" part="popover" modal><main><x-colorpicker id="color-picker"></x-colorpicker></main></x-popover></template>`;static#z=Os`:host{display:block;width:32px;height:32px;box-sizing:border-box;position:relative;overflow:hidden;background:var(--checkboard-background)}:host([hidden]){display:none}:host([disabled]){pointer-events:none;opacity:.4}#preview{width:100%;height:100%}#popover{--align:left}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"}set value(t){this.setAttribute("value",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get spaces(){return this.hasAttribute("spaces")?this.getAttribute("spaces").replace(/\s+/g," ").split(" "):["srgb","p3"]}set spaces(t){this.setAttribute("spaces",t.join(" "))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#O=!1;#Bi=!1;#N=0;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,$a.#z],this.#S.append(document.importNode($a.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("keydown",(t=>this.#_(t))),this["#preview"].addEventListener("click",(t=>this.#R(t))),this["#popover"].addEventListener("close",(()=>this.#Ii())),this["#color-picker"].addEventListener("changestart",(()=>this.#Hi())),this["#color-picker"].addEventListener("change",(t=>this.#Oi(t))),this["#color-picker"].addEventListener("changeend",(()=>this.#ji()))}connectedCallback(){this["#color-picker"].setAttribute("value",this.value),this.#Y(),this.#Ni()}attributeChangedCallback(t){"value"===t?this.#Ot():"alpha"===t?this.#le():"spaces"===t?this.#re():"disabled"===t?this.#mt():"size"===t&&this.#Fi()}async#Ft(){!1===this.hasAttribute("expanded")&&(this.#O=this.matches(":focus"),this.setAttribute("expanded",""),await this["#popover"].open(this),this["#popover"].focus())}async#Xt(t=null){if(this.hasAttribute("expanded")){if(this["#popover"].setAttribute("closing",""),await this["#popover"].close(),this.removeAttribute("expanded"),this.#O)this.focus();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}this["#popover"].removeAttribute("closing")}}#Ni(){this["#preview"].style.background=this.value}#Y(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#Ot(){!1===this.#Bi&&(this.#Ni(),this["#color-picker"].getAttribute("value")!==this.getAttribute("value")&&this["#color-picker"].setAttribute("value",this.getAttribute("value")))}#le(){this["#color-picker"].alpha=this.alpha}#re(){this["#color-picker"].spaces=this.spaces}#mt(){this.#Y()}#Fi(){this["#color-picker"].size=this.size}#Hi(){this.#Bi=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))}#Oi(t){this.value=this["#color-picker"].value,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ni()}#ji(){this.#Bi=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#R(t){!1===this["#popover"].opened&&(t.preventDefault(),this.#Ft())}#_(t){"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code?(t.preventDefault(),t.stopPropagation(),this.hasAttribute("expanded")?this.#Xt():this.#Ft()):"Escape"===t.code?this.hasAttribute("expanded")&&(t.preventDefault(),this.#Xt()):"Tab"===t.code&&this.hasAttribute("expanded")&&t.preventDefault()}#Ii(){this.dispatchEvent(new CustomEvent("collapse")),this.#Xt()}}customElements.define("x-colorselect",$a);class Ma extends HTMLElement{static#E=Hs`<template><slot></slot></template>`;static#z=Os`:host{display:block;position:fixed;width:0;height:0;z-index:1001}`;get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;#Gi=null;#Xi=null;#_i=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Ma.#z],this.#S.append(document.importNode(Ma.#E.content,!0)),this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)",this["#backdrop"].addEventListener("contextmenu",(t=>this.#Zi(t))),this["#backdrop"].addEventListener("pointerdown",(t=>this.#at(t))),this.addEventListener("blur",(t=>this.#Ui())),this.addEventListener("keydown",(t=>this.#_(t)),!0),this.addEventListener("click",(t=>this.#R(t)))}connectedCallback(){this.#Gi=this.parentElement||this.parentNode.host,window.addEventListener("blur",this.#Xi=()=>{this.#Ui()}),this.#Gi.addEventListener("contextmenu",this.#_i=t=>{this.#Yi(t)})}disconnectedCallback(){window.removeEventListener("blur",this.#Xi),this.#Gi.removeEventListener("contextmenu",this.#_i),this.#Gi=null}open(t,e){let i=this.querySelector("x-menu");!1===i.opened&&(i.openAtPoint(t,e),this["#backdrop"].ownerElement=i,this["#backdrop"].show(!1),i.focus())}close(){return new Promise((async t=>{this["#backdrop"].hide(!1);let e=this.querySelector("x-menu");if(e&&!0===e.opened){await e.close();let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}t()}))}#Ui(){this.close()}#Yi(t){!1===this.disabled&&(t.preventDefault(),this.open(t.clientX,t.clientY))}#Zi(t){t.preventDefault(),t.stopImmediatePropagation(),this.close().then((()=>{let e=((t,e,i=!0)=>{let s=document.elementFromPoint(t,e);if(i&&s)for(;;){let i=s.shadowRoot||s._shadowRoot;if(!i)break;{let n=i.elementFromPoint(t,e);if(n.getRootNode()!==i&&(n=null),!n||n===s)break;s=n}}return s})(t.clientX,t.clientY,!0),i=new MouseEvent(t.type,t);e.dispatchEvent(i)}))}#at(t){t.buttons<=1&&(t.preventDefault(),t.stopImmediatePropagation(),this.close())}async#R(t){let e=t.target.closest("x-menuitem");if(e&&!1===e.disabled){let t=e.querySelector("x-menu");t?t.opened?t.close():t.openNextToElement(e,"horizontal"):(this.setAttribute("closing",""),await e.whenTriggerEnd,await this.close(),this.removeAttribute("closing"))}}#_(t){if("Escape"===t.code){this.querySelector("x-menu").opened&&(t.preventDefault(),this.close())}else if("Tab"===t.code){t.preventDefault(),t.stopPropagation(),this.querySelector("x-menu").focusNextMenuItem()}}}customElements.define("x-contextmenu",Ma);class La extends HTMLElement{static observedAttributes=["href"];static#E=Hs`<template><svg id="svg" preserveAspectRatio="none" viewBox="0 0 100 100" width="0px" height="0px"></svg></template>`;static#z=Os`:host{display:block;color:currentColor;display:flex;align-items:center;justify-content:center;width:17px;height:17px}:host([disabled]){opacity:.5}:host([hidden]){display:none}#svg{width:100%;height:100%;fill:currentColor;stroke:none;overflow:inherit;pointer-events:none}`;get href(){return this.hasAttribute("href")?this.getAttribute("href"):""}set href(t){this.setAttribute("href",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#qi=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[La.#z],this.#S.append(document.importNode(La.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){Gn.addEventListener("iconschange",this.#qi=()=>{this.#It()})}disconnectedCallback(){Gn.removeEventListener("iconschange",this.#qi)}attributeChangedCallback(t,e,i){e!==i&&"href"===t&&this.#It()}async#It(){let t=null,e=this.href.trim();if(""!==e){let i=null,s=null;if(e.includes("#")){let t=e.split("#");""!==t[0]&&(i=t[0]),""!==t[1]&&(s=t[1])}if(null!==s)if(null===i)await Gn.whenIconsReady,t=Gn.queryIcon("#"+CSS.escape(s));else{let e=await Fs(i);e&&(t=e.querySelector("#"+CSS.escape(s)))}}t?(this["#svg"].setAttribute("viewBox",t.getAttribute("viewBox")),this["#svg"].innerHTML=t.innerHTML):this["#svg"].innerHTML=""}}customElements.define("x-icon",La);class Aa extends HTMLElement{static observedAttributes=["type","value","spellcheck","minlength","maxlength","readonly","disabled","validation"];static#E=Hs`<template><main id="main"><slot></slot><input id="input" spellcheck="false" part="input"></main></template>`;static#z=Os`:host{display:block;position:relative;max-width:160px;height:32px;box-sizing:border-box;background:#fff;font-size:12.5px}:host(:focus){z-index:10}:host(:hover){cursor:text}:host([mixed]){color:rgba(0,0,0,.7)}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host([error]) ::selection{color:#fff;background-color:#d50000}#main{display:flex;align-items:center;width:100%;height:100%}#input{width:100%;height:100%;padding:0 6px;box-sizing:border-box;color:inherit;background:0 0;border:none;outline:0;font-family:inherit;font-size:inherit;font-weight:inherit;text-align:inherit;cursor:inherit}#input:-webkit-autofill{z-index:1}#input:-internal-autofill-previewed,#input:-internal-autofill-selected{-webkit-box-shadow:var(--autofill-background-color) 0 0 0 30px inset}:host(:not(:focus)) ::selection{color:inherit;background:0 0}`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"text"}set type(t){this.setAttribute("type",t)}get value(){return this["#input"].value}set value(t){this["#input"].value!==t&&(this.matches(":focus")?(this["#input"].selectionStart=0,this["#input"].selectionEnd=this["#input"].value.length,document.execCommand("insertText",!1,t)):this["#input"].value=t,"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Wi)&&this.reportValidity(),this.#xt())}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get minLength(){return this.hasAttribute("minlength")?parseInt(this.getAttribute("minlength")):0}set minLength(t){this.setAttribute("minlength",t)}get maxLength(){return this.hasAttribute("maxlength")?parseInt(this.getAttribute("maxlength")):Infinity}set maxLength(t){this.setAttribute("maxlength",t)}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get readOnly(){return this.hasAttribute("readonly")}set readOnly(t){!0===t?this.setAttribute("readonly",t):this.removeAttribute("readonly")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get validation(){return this.hasAttribute("validation")?this.getAttribute("validation"):"auto"}set validation(t){this.setAttribute("validation",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#S=null;#N=0;#Vi=0;#wt=null;#Wi=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#S.adoptedStyleSheets=[Aa.#z],this.#S.append(document.importNode(Aa.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("pointerenter",(()=>this.#G())),this.addEventListener("pointerleave",(()=>this.#X())),this.addEventListener("focusin",(t=>this.#zt(t))),this.addEventListener("focusout",(t=>this.#St(t))),this.addEventListener("keydown",(t=>this.#_(t))),this["#input"].addEventListener("input",(t=>this.#$t(t))),this["#input"].addEventListener("change",(t=>this.#se(t))),this["#input"].addEventListener("search",(t=>this.#Lt(t)))}connectedCallback(){this.#Y(),this.#xt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Wi)&&this.reportValidity()}attributeChangedCallback(t){"type"===t?this.#Ki():"value"===t?this.#Ot():"spellcheck"===t?this.#Ji():"minlength"===t?this.#Qi():"maxlength"===t?this.#ts():"readonly"===t?this.#es():"disabled"===t?this.#mt():"validation"===t&&this.#is()}selectAll(){this["#input"].select()}clear(){this.value="",this.#wt=null,this.#Wi=null,this.#Nt()}reportValidity(){let t=new CustomEvent("beforevalidate",{bubbles:!1,cancelable:!0});return this.dispatchEvent(t),!1===t.defaultPrevented&&(this.value.length<this.minLength?this.#wt={href:"#entered-text-is-too-short"}:this.value.length>this.maxLength?this.#wt={href:"#entered-text-is-too-long"}:this.required&&0===this.value.length?this.#wt={href:"#required-field"}:"email"===this.type&&!1===this["#input"].validity.valid?this.#wt={href:"#invalid-email"}:"url"===this.type&&!1===this["#input"].validity.valid?this.#wt={href:"#invalid-url"}:"color"===this.type&&!1===Bs(this["#input"].value)?this.#wt={href:"#invalid-color"}:this.#wt=null,this.#Nt()),null===this.#wt&&null===this.#Wi}setCustomValidity(t){this.#Wi=""===t?null:t,this.#Nt()}#Nt(){let t=this.#Wi||this.#wt;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Xn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;jn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#xt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#Y(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.setAttribute("aria-readonly",this.readOnly),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#Ki(){"color"===this.type?this["#input"].type="text":this["#input"].type=this.type}#Ot(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&this.selectAll()}#Ji(){this["#input"].spellcheck=this.spellcheck}#Qi(){this["#input"].minLength=this.minLength}#ts(){this["#input"].maxLength=this.maxLength}#es(){this["#input"].readOnly=this.readOnly,this.#Y()}#mt(){this["#input"].disabled=this.disabled,this.#Y()}#is(){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Wi)&&this.reportValidity()}#R(){this.#Nt()}#G(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#X(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#zt(){this.#Nt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#St(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),"auto"===this.validation||"instant"===this.validation?this.reportValidity():"manual"===this.validation&&this.#Nt()}#_(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(document.execCommand("selectAll"),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||this.reportValidity())}#$t(t){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Wi)&&this.reportValidity(),t.stopPropagation(),this.#xt(),this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}#se(t){this.#Vi=t.timeStamp,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#Lt(t){t.timeStamp-this.#Vi>100&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}customElements.define("x-input",Aa);class Ra extends HTMLElement{static#E=Hs`<template><slot></slot></template>`;static#z=Os`:host{display:block;line-height:1.2;cursor:inherit;user-select:none;-webkit-user-select:none;box-sizing:border-box}:host([disabled]){opacity:.5}:host([hidden]){display:none}slot{text-decoration:inherit}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Ra.#z],this.#S.append(document.importNode(Ra.#E.content,!0))}}customElements.define("x-label",Ra);let{isFinite:Pa,isNaN:Ta,parseFloat:Da}=Number;class Ba extends HTMLElement{static observedAttributes=["href","args","autocapitalize","ellipsis"];get href(){return this.hasAttribute("href")?this.getAttribute("href"):""}set href(t){this.setAttribute("href",t)}get args(){let t=Object.create(null),e=this.hasAttribute("args")?this.getAttribute("args").trim():"";if(""!==e)for(let i of e.split(",")){let[e,...s]=i.split(":"),n=s.join(":");e=e.trim(),n=n.trim();let a=parseFloat(n),l=n-a+1>=0;t[e]=l?a:n}return t}set args(t){let e=Object.keys(t).map((e=>`${e}: ${t[e]}`)).join(", ");0===t.length?this.removeAttribute("args"):this.setAttribute("args",e)}get autocapitalize(){return!!this.hasAttribute("autocapitalize")}set autocapitalize(t){t?this.setAttribute("autocapitalize",""):this.removeAttribute("autocapitalize")}get ellipsis(){return this.hasAttribute("ellipsis")}set ellipsis(t){t?this.setAttribute("ellipsis",""):this.removeAttribute("ellipsis")}get whenReady(){return new Promise((t=>{null===this.#ss?t():this.#ss.push(t)}))}#ns=null;#kt=null;#ss=[];#as="";constructor(){super(),this.textContent.length>0&&(this.#as=this.textContent)}connectedCallback(){this.#It(),Gn.addEventListener("localeschange",this.#ns=()=>{this.#It()}),Gn.addEventListener("themechange",this.#kt=()=>{this.#It()})}disconnectedCallback(){Gn.removeEventListener("localeschange",this.#ns),Gn.removeEventListener("themechange",this.#kt)}attributeChangedCallback(t,e,i){e!==i&&!1!==this.isConnected&&("href"===t||"args"===t||"autocapitalize"===t||"ellipsis"===t)&&this.#It()}async#It(){await Gn.whenLocalesReady;let t=Gn.queryMessage(this.href,this.args);if(t.fallback&&this.#as?this.textContent=this.#as:"html"===t.format?this.innerHTML=t.content+(this.ellipsis?"…":""):!0===this.autocapitalize&&"titlecase"===Gn.autocapitalize?this.textContent=(t=>{let e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|v.?|vs.?|via)$/i,i=/([A-Za-z0-9\u00C0-\u00FF])/;return t.split(/([ :–—-])/).map(((t,s,n)=>t.search(e)>-1&&0!==s&&s!==n.length-1&&":"!==n[s-3]&&":"!==n[s+1]&&("-"!==n[s+1]||"-"===n[s-1]&&"-"===n[s+1])?t.toLowerCase():t.substr(1).search(/[A-Z]|\../)>-1||":"===n[s+1]&&""!==n[s+2]?t:t.replace(i,(t=>t.toUpperCase())))).join("")})(t.content)+(this.ellipsis?"…":""):this.textContent=t.content+(this.ellipsis?"…":""),null!==this.#ss){for(let t of this.#ss)t();this.#ss=null}}}customElements.define("x-message",Ba);let Ia=t=>{let[e,i,...s]=t.trim().split(" ");return[i,parseFloat(e),s.join(" ")]},{abs:Ha}=Math;class Oa extends HTMLElement{static observedAttributes=["opened"];static#E=Hs`<template><slot id="slot"></slot></template>`;static#z=Os`:host{display:none;top:0;left:0;width:fit-content;padding:4px 0;z-index:1001;box-sizing:border-box;background:#fff;cursor:default;overflow:auto;flex-direction:column;-webkit-app-region:no-drag;--align:start;--scrollbar-background:rgba(0, 0, 0, 0.2);--scrollbar-width:6px;--open-transition:100 transform cubic-bezier(0.4, 0, 0.2, 1);--close-transition:200 opacity cubic-bezier(0.4, 0, 0.2, 1)}:host([animating]),:host([opened]){display:flex}:host(:focus){outline:0}:host-context([debug]):host(:focus){outline:2px solid red}::-webkit-scrollbar{max-width:var(--scrollbar-width);background:0 0}::-webkit-scrollbar-thumb{background-color:var(--scrollbar-background)}::-webkit-scrollbar-corner{display:none}`;get opened(){return this.hasAttribute("opened")}#S=null;#ls=[];#rs=null;#os=null;#hs=0;#ds=0;#cs=!1;#us=!1;#ps=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Oa.#z],this.#S.append(document.importNode(Oa.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("pointerover",(t=>this.#ms(t))),this.addEventListener("pointerout",(t=>this.#bs(t))),this.addEventListener("pointermove",(t=>this.#gs(t))),this.addEventListener("keydown",(t=>this.#_(t))),this.addEventListener("wheel",(t=>this.#fs(t)),{passive:!1}),this.addEventListener("scroll",(t=>this.#xs(t)),{passive:!0})}connectedCallback(){this.setAttribute("role","menu"),this.setAttribute("aria-hidden",!this.opened),this.setAttribute("tabindex","0")}attributeChangedCallback(t){"opened"===t&&this.#ws()}openOverElement(t,e){return new Promise((async i=>{let s=this.querySelectorAll(":scope > x-menuitem");if(s.length>0){this.#cs=!0,this.#ps=Nn(),this.#vs(),this.setAttribute("opened","");let i=[...s].find((t=>t.contains(e)))||s[0],n=this.getBoundingClientRect(),a=t.getBoundingClientRect(),l=e.getBoundingClientRect(),r=0,o=0;i.focus(),0===n.top&&0===n.left||(r=-n.left,o=-n.top),this.style.left=a.x-(l.x-n.x)+r+"px",this.style.top=a.y-(l.y-n.y)+o+"px",n=this.getBoundingClientRect(),n.left<7&&(this.style.left=7+r+"px",n=this.getBoundingClientRect());7-n.top>0&&(this.style.height=n.bottom-7+"px",this.style.top=7+o+"px",this.scrollTop=9999,n=this.getBoundingClientRect());if(n.bottom+7>window.innerHeight){let t=n.bottom-window.innerHeight,e=n.height-t-7;this.style.height=e+"px"}if(n.right+7>window.innerWidth){let t=n.right-window.innerWidth,e=n.width-t-7;this.style.width=`${e}px`}{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Ia(t);if("transform"===e){let t=this.getBoundingClientRect(),e=a.y+a.height/2-t.top;await this.animate({transform:["scaleY(0)","scaleY(1)"],transformOrigin:[`0 ${e}px`,`0 ${e}px`]},{duration:i,easing:s}).finished}}this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),this.#ds=o}i()}))}openOverLabel(t){return new Promise((async e=>{let i=this.querySelectorAll(":scope > x-menuitem");if(i.length>0){this.#vs(),this.setAttribute("opened",""),this.#cs=!0,this.#ps=Nn();let e=[...i].find((e=>{let i=e.querySelector("x-label");return!(!i||i.textContent!==t.textContent)}));e||(e=i[0]);let s=e.querySelector("x-label");await this.openOverElement(t,s)}e()}))}openNextToElement(t,e="horizontal",i=0){return new Promise((async s=>{this.#cs=!1,this.#ps=Nn(),this.#vs(),this.setAttribute("opened",""),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),"x-menuitem"===t.localName&&t.setAttribute("expanded","");let n=getComputedStyle(this).getPropertyValue("--align").trim(),a=t.getBoundingClientRect(),l=this.getBoundingClientRect(),r=0,o=0;if(0===l.top&&0===l.left||(r=-l.left,o=-l.top),"horizontal"===e){this.style.top=a.top+o+"px",this.style.left=a.left+a.width+i+r+"px";let t="right";{let t=this.getBoundingClientRect();t.width>window.innerWidth-10&&(this.style.width=window.innerWidth-10+"px"),t.height>window.innerHeight-10&&(this.style.height=window.innerHeight-10+"px")}{let e=this.getBoundingClientRect();e.left+e.width+7>window.innerWidth&&(a.left>e.width+7?(this.style.left=a.left-e.width+r+"px",t="left"):a.left>window.innerWidth-(a.left+a.width)?(this.style.left=7+r+"px",t="left"):(this.style.left=window.innerWidth-e.width-7+r+"px",t="right"))}{let t=this.getBoundingClientRect();if(t.top+t.height+7>window.innerHeight){let e=t.top+t.height+7-window.innerHeight;this.style.top=t.top-e+o+"px"}}{let e=getComputedStyle(this).getPropertyValue("--open-transition"),[i,s,n]=Ia(e);"transform"===i&&await this.animate({transform:["scale(0, 0)","scale(1, 1)"],transformOrigin:["left"===t?"100% 0":"0 0","left"===t?"100% 0":"0 0"]},{duration:s,easing:n}).finished}}else if("vertical"===e){this.style.top=a.top+a.height+i+o+"px",this.style.left="0px";let e="bottom";{let t=this.getBoundingClientRect();t.width>window.innerWidth-10&&(this.style.width=window.innerWidth-10+"px"),t.height>window.innerHeight-10&&(this.style.height=window.innerHeight-10+"px")}if(t.parentElement&&"x-menubar"===t.parentElement.localName){let t=this.getBoundingClientRect();t.top+t.height+7>window.innerHeight&&(this.style.height=window.innerHeight-(a.top+a.height)-10+"px")}else{let t=this.getBoundingClientRect();t.top+t.height+7>window.innerHeight&&(a.top>t.height+7?(this.style.top=a.top-t.height-i+o+"px",e="top"):a.top>window.innerHeight-(a.top+a.height)?(this.style.top=7+o+"px",e="top"):(this.style.top=window.innerHeight-t.height-7+o+"px",e="bottom"))}if("start"===n){this.style.left=a.left+r+"px";{let t=this.getBoundingClientRect();t.left+t.width+7>window.innerWidth&&(this.style.left=a.left+a.width-t.width+r+"px")}this.getBoundingClientRect().left<7&&(this.style.left=7+r+"px")}else if("end"===n){this.style.left=a.left+a.width-l.width+r+"px";this.getBoundingClientRect().left<7&&(this.style.left=a.left+r+"px");{let t=this.getBoundingClientRect();t.left+t.width+7>window.innerWidth&&(this.style.left=window.innerWidth-7+r+"px")}}{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[i,s,n]=Ia(t);"transform"===i&&await this.animate({transform:["scale(1, 0)","scale(1, 1)"],transformOrigin:["top"===e?"0 100%":"0 0","top"===e?"0 100%":"0 0"]},{duration:s,easing:n}).finished}}this.#ds=o,s()}))}openAtPoint(t,e){return new Promise((async i=>{this.#cs=!1,this.#ps=Nn(),this.#vs(),this.setAttribute("opened",""),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this}));let s=0,n=0,a=[...this.querySelectorAll(":scope > x-menuitem > x-label > x-message")];await Promise.all(a.map((t=>t.whenReady)));let l=this.getBoundingClientRect();0===l.top&&0===l.left||(s=-l.left,n=-l.top),this.style.left=t+s+"px",this.style.top=e+n+"px",l=this.getBoundingClientRect(),l.right+7>window.innerWidth&&(t-=l.width,this.style.left=t+s+"px",l=this.getBoundingClientRect()),l.bottom+7>window.innerHeight&&(e=e+window.innerHeight-(l.top+l.height)-7,this.style.top=e+n+"px",l=this.getBoundingClientRect(),l.top<7&&(e=7,this.style.top=e+n+"px",this.style.height=window.innerHeight-7-7+"px"));{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Ia(t);"transform"===e&&await this.animate({transform:["scale(0)","scale(1)"],transformOrigin:["0 0","0 0"]},{duration:80,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"}).finished}this.#ds=n,i()}))}close(t=!0){return new Promise((async e=>{if(this.opened){this.removeAttribute("opened"),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this}));let e=this.closest("x-menuitem");if(e&&e.removeAttribute("expanded"),t){this.setAttribute("animating","");let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Ia(t);"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished,this.removeAttribute("animating")}for(let t of this.querySelectorAll(":scope > x-menuitem")){let e=t.querySelector("x-menu[opened]");e&&e.close()}}e()}))}focusNextMenuItem(){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){let e=null;for(let i=t.nextElementSibling;i;i=i.nextElementSibling)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(null===e&&null!=t.parentElement)for(let i of t.parentElement.children)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(e){e.focus();let i=t.querySelector("x-menu");i&&i.close()}}else this.focusFirstMenuItem()}focusPreviousMenuItem(){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){let e=null;for(let i=t.previousElementSibling;i;i=i.previousElementSibling)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(null===e&&null!=t.parentElement)for(let i of[...t.parentElement.children].reverse())if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(e){e.focus();let i=t.querySelector("x-menu");i&&i.close()}}else this.focusLastMenuItem()}focusFirstMenuItem(){let t=this.querySelectorAll("x-menuitem:not([disabled]):not([hidden])")[0]||null;t&&t.focus()}focusLastMenuItem(){let t=this.querySelectorAll("x-menuitem:not([disabled]):not([hidden])"),e=t.length>0?t[t.length-1]:null;e&&e.focus()}#ks(t){let e=0;{let t=this.#ls[this.#ls.length-1],i=this.#ls[0];if(this.querySelector("x-menu[opened]")&&t){i||(i=t);let s=this.getBoundingClientRect(),n={x:s.left,y:s.top-75},a={x:s.left+s.width,y:n.y},l={x:s.left,y:s.top+s.height+75},r={x:s.left+s.width,y:l.y},o=!0;if((i.x<s.left||i.x>r.x||i.y<s.top||i.y>r.y)&&(o=!1),this.#os&&t.x===this.#os.x&&t.y===this.#os.y&&(o=!1),o){let s,n;s=a,n=r;let l=(t,e)=>(e.y-t.y)/(e.x-t.x),o=l(t,s),h=l(t,n),d=l(i,s),c=l(i,n);o<d&&h>c?(this.#os=t,e=300):this.#os=null}}}e>0?this.#rs=setTimeout((()=>{this.#ks(t)}),e):t()}#ys(){this.#rs&&(clearTimeout(this.#rs),this.#rs=null)}#vs(){this.style.position="fixed",this.style.top="0px",this.style.left="0px",this.style.width=null,this.style.height=null,this.style.minWidth=null,this.style.maxWidth=null}#Cs(){return this.matches("*[closing], *[closing] x-menu")}#ws(){this.setAttribute("aria-hidden",!this.opened)}#F(t){if(t.target!==this&&"hr"!==t.target.localName||t.stopPropagation(),"touch"===t.pointerType&&t.target.closest("x-menu")===this){!1===this.#us&&this.#Es();{let e=t.target.closest("x-menuitem");e&&!1===e.disabled&&e.closest("x-menu")===this?!1===e.matches(":focus")&&this.#ks((async()=>{let t=this.querySelector(":scope > x-menuitem:focus");if(t){let e=t.querySelector("x-menu");e&&e.close()}e.closest("x-menu");let i=e.querySelector("x-menu"),s=[...this.querySelectorAll(":scope > x-menuitem")].filter((t=>t!==e));i&&(await jn(60),e.matches(":focus")&&!1===i.opened&&i.openNextToElement(e,"horizontal"));for(let t of s){let e=t.querySelector("x-menu");e&&e.close()}})):this.#ks((()=>{this.focus()}))}}}#ms(t){if(!this.#Cs()&&"touch"!==t.pointerType&&t.target.closest("x-menu")===this){!1===this.#us&&this.#Es();{let e=t.target.closest("x-menuitem");e&&!1===e.disabled&&e.closest("x-menu")===this?!1===e.matches(":focus")&&this.#ks((async()=>{let t=this.querySelector(":scope > x-menuitem:focus");if(t){let e=t.querySelector("x-menu");e&&e.close()}e.focus(),e.closest("x-menu");let i=e.querySelector("x-menu"),s=[...this.querySelectorAll(":scope > x-menuitem")].filter((t=>t!==e));i&&(await jn(60),e.matches(":focus")&&!1===i.opened&&i.openNextToElement(e,"horizontal"));for(let t of s){let e=t.querySelector("x-menu");e&&e.close()}})):this.#ks((()=>{this.focus()}))}}}#bs(t){t.relatedTarget&&Zn(t.relatedTarget,"x-menu")===this||!0===this.#us&&this.#zs()}#Es(){this.#Cs()||(this.#us=!0,this.#ys())}#zs(){this.#Cs()||(this.#us=!1,this.#ys(),this.focus())}#gs(t){this.#ls.push({x:t.clientX,y:t.clientY}),this.#ls.length>3&&this.#ls.shift()}#fs(t){t.target.closest("x-menu")===this?(t.preventDefault(),this.scrollTop=this.scrollTop+t.deltaY,this.#us=!0):this.#us=!1}#xs(){if(this.#cs){let t=this.scrollTop-this.#hs;if(this.#hs=this.scrollTop,Nn()-this.#ps>100){let e=this.getBoundingClientRect();t<0?e.bottom+Ha(t)<=window.innerHeight-7?this.style.height=e.height+Ha(t)+"px":this.style.height=window.innerHeight-14+"px":t>0&&(e.top-t>=7?(this.style.top=this.#ds+e.top-t+"px",this.style.height=e.height+t+"px",this.scrollTop=0,this.#hs=0):(this.style.top=7+this.#ds+"px",this.style.height=window.innerHeight-14+"px"))}}}#_(t){if(this.#Cs())t.preventDefault(),t.stopPropagation();else if("ArrowUp"===t.code)t.preventDefault(),t.stopPropagation(),this.focusPreviousMenuItem();else if("ArrowDown"===t.code)t.preventDefault(),t.stopPropagation(),this.focusNextMenuItem();else if("ArrowRight"===t.code||"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector("x-menuitem:focus");if(e){let i=e.querySelector("x-menu");if(i){t.preventDefault(),t.stopPropagation(),!1===i.opened&&i.openNextToElement(e,"horizontal");let s=i.querySelector("x-menuitem:not([disabled]):not([hidden])");s&&s.focus()}}}else if("ArrowLeft"===t.code){let e=this.querySelector("x-menuitem:focus");if(e){let i=e.closest("x-menu").closest("x-menuitem");i&&i.closest("x-menu")&&(t.preventDefault(),t.stopPropagation(),i.focus(),this.close())}}}}customElements.define("x-menu",Oa);class ja extends HTMLElement{static observedAttributes=["disabled"];static#E=Hs`<template><svg id="backdrop" hidden><path id="backdrop-path"></path></svg><slot></slot></template>`;static#z=Os`:host{display:flex;align-items:center;width:100%;height:36px;font-size:14px;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:.6}:host([hidden]){display:none}#backdrop{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;pointer-events:none;touch-action:none}#backdrop[hidden]{display:none}#backdrop path{fill:red;fill-rule:evenodd;opacity:0;pointer-events:all}`;get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#Ss=!1;#$s=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[ja.#z],this.#S.append(document.importNode(ja.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("focusout",(t=>this.#St(t))),this.#S.addEventListener("pointerover",(t=>this.#Ms(t))),this.#S.addEventListener("click",(t=>this.#Ls(t))),this.#S.addEventListener("wheel",(t=>this.#As(t))),this.#S.addEventListener("keydown",(t=>this.#Rs(t)))}connectedCallback(){this.setAttribute("role","menubar"),this.setAttribute("aria-disabled",this.disabled),window.addEventListener("orientationchange",this.#$s=()=>{this.#Ps()})}disconnectedCallback(){window.removeEventListener("orientationchange",this.#$s)}attributeChangedCallback(t){"disabled"===t&&this.#mt()}#Ts(t){let e=t.querySelector(":scope > x-menu");if(e&&!1===e.opened){t.focus(),this.#Ss=!0,this.style.touchAction="none";{e.openNextToElement(t,"vertical");let i=[...this.querySelectorAll(":scope > x-menuitem > x-menu")].filter((t=>t!==e));for(let t of i)t&&t.close(!1)}{let{x:t,y:e,width:i,height:s}=this.getBoundingClientRect();this["#backdrop-path"].setAttribute("d",`\n          M 0 0\n          L ${window.innerWidth} 0\n          L ${window.innerWidth} ${window.innerHeight}\n          L 0 ${window.innerHeight}\n          L 0 0\n          M ${t} ${e}\n          L ${t+i} ${e}\n          L ${t+i} ${e+s}\n          L ${t} ${e+s}\n        `),this["#backdrop"].removeAttribute("hidden")}}}#Ds(){return new Promise((async t=>{this.#Ss=!1,this.style.touchAction=null,this["#backdrop"].setAttribute("hidden",""),this["#backdrop-path"].setAttribute("d","");{let t=this.querySelectorAll(":scope > x-menuitem > x-menu[opened]");for(let e of t)await e.close(!0)}let e=this.querySelector("x-menuitem:focus");e&&e.blur(),t()}))}#Bs(){let t=[...this.querySelectorAll(":scope > x-menuitem:not([disabled])")],e=this.querySelector(":focus").closest("x-menubar > x-menuitem");if(t.length>1&&e){let i=t.indexOf(e),s=t[i-1]||t[t.length-1];this.#Ts(s)}}#Is(){let t=[...this.querySelectorAll(":scope > x-menuitem:not([disabled])")],e=this.querySelector(":focus").closest("x-menubar > x-menuitem");if(e&&t.length>1){let i=t.indexOf(e),s=t[i+1]||t[0];this.#Ts(s)}}#mt(){this.setAttribute("aria-disabled",this.disabled)}#St(t){null!==t.relatedTarget&&!1!==this.contains(t.relatedTarget)||this.#Ds()}#Ps(){this.#Ds()}#As(t){let e=this.querySelector("x-menu[opened]");e&&!1===e.contains(t.target)&&t.preventDefault()}async#Ls(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");if(!e||!1!==e.disabled||i&&!i.contains(e))t.target===this["#backdrop-path"]&&(this.#Ds(),t.preventDefault(),t.stopPropagation());else{let t=e.querySelector("x-menu");e.parentElement===this?t&&(t.opened?this.#Ds():this.#Ts(e)):t?t.opened&&!1===t.opened&&t.openNextToElement(e,"horizontal"):(this.setAttribute("closing",""),await e.whenTriggerEnd,await this.#Ds(),this.removeAttribute("closing"))}}#Ms(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem");null===t.target.closest("x-menu")&&e&&e.parentElement===this&&this.#Ss&&"touch"!==t.pointerType&&(!1===e.hasAttribute("expanded")?this.#Ts(e):e.focus())}#Rs(t){if(this.hasAttribute("closing"))t.stopPropagation(),t.preventDefault();else if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector(":scope > x-menuitem:focus");e&&(t.preventDefault(),e.click())}else if("Escape"===t.code)this.#Ss&&(t.preventDefault(),this.#Ds());else if("Tab"===t.code){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){t.focus();let e=t.querySelector(":scope > x-menu");e&&(e.tabIndex=-1,e.close().then((()=>{e.tabIndex=-1})))}}else if("ArrowRight"===t.code)this.#Is();else if("ArrowLeft"===t.code)this.#Bs();else if("ArrowDown"===t.code){let e=this.querySelector("x-menuitem:focus > x-menu");e&&(t.preventDefault(),e.focusFirstMenuItem())}else if("ArrowUp"===t.code){let e=this.querySelector("x-menuitem:focus > x-menu");e&&(t.preventDefault(),e.focusLastMenuItem())}}}customElements.define("x-menubar",ja);class Na extends HTMLElement{static observedAttributes=["disabled"];static#E=Hs`<template><svg id="checkmark" part="checkmark" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="checkmark-path"></path></svg><slot></slot><svg id="arrow" part="arrow" viewBox="0 0 100 100" hidden><path id="arrow-path"></path></svg></template>`;static#z=Os`:host{display:flex;flex-flow:row;align-items:center;position:relative;padding:0 12px 0 23px;min-height:28px;box-sizing:border-box;cursor:default;user-select:none;-webkit-user-select:none;--trigger-effect:blink}:host([hidden]){display:none}:host([disabled]){pointer-events:none;opacity:.6}:host(:focus){outline:0}:host-context([debug]):host(:focus){outline:2px solid red}#checkmark{display:none;transition:transform .2s cubic-bezier(.4, 0, .2, 1);align-self:center;width:18px;height:18px;margin:0 2px 0 -20px;color:inherit;--path-data:M 44 61 L 29 47 L 21 55 L 46 79 L 79 27 L 70 21 L 44 61 Z}:host([togglable]) #checkmark{display:flex;transform:scale(0);transform-origin:50% 50%}:host([toggled]) #checkmark{display:flex;transform:scale(1)}#checkmark-path{fill:currentColor}#arrow{display:flex;width:16px;height:16px;transform:scale(1.1);align-self:center;margin-left:8px;opacity:1;color:inherit;--path-data:M 26 20 L 26 80 L 74 50 Z}#arrow[hidden]{display:none}#arrow path{fill:currentColor}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){this.value!==t&&(null===t?this.removeAttribute("value"):this.setAttribute("value",t))}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get togglable(){return this.hasAttribute("togglable")}set togglable(t){t?this.setAttribute("togglable",""):this.removeAttribute("togglable")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get whenTriggerEnd(){return new Promise((t=>{!1===this.#Hs?t():this.#Os.push(t)}))}#S=null;#N=0;#Hs=!1;#Os=[];#js=!1;#L=null;#Ns=new MutationObserver((()=>this.#Fs()));constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Na.#z],this.#S.append(document.importNode(Na.#E.content,!0)),this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#_(t)));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#ct(),this.#T(),this.#Fs(),this.#Y(),this.#Ns.observe(this,{childList:!0,attributes:!1,characterData:!1,subtree:!1}),Gn.addEventListener("themechange",this.#L=()=>this.#Gs())}disconnectedCallback(){this.#Ns.disconnect(),Gn.removeEventListener("themechange",this.#L)}attributeChangedCallback(t){"disabled"===t&&this.#Y()}#ct(){let t=getComputedStyle(this["#checkmark"]).getPropertyValue("--path-data");this["#checkmark-path"].setAttribute("d",t)}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#Fs(){if("x-menubar"===this.parentElement.localName)this["#arrow"].setAttribute("hidden","");else{this.querySelector("x-menu")?this["#arrow"].removeAttribute("hidden"):this["#arrow"].setAttribute("hidden","")}}#Y(){this.setAttribute("role","menuitem"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#Gs(){this.#ct(),this.#T()}async#F(t){if(this.#js=this.matches(":focus"),t.buttons>1)return!1;if(this.matches("[closing] x-menuitem"))return t.preventDefault(),void t.stopPropagation();if(t.target.closest("x-menuitem")===this){this.setPointerCapture(t.pointerId);{let e,i=!0,s=Date.now();this.addEventListener("pointerup",e=async()=>{this.removeEventListener("pointerup",e),this.removeEventListener("pointercancel",e),i=!1;let n=Date.now()-s,a="touch"===t.pointerType?600:150;n<a&&await jn(a-n),this.removeAttribute("pressed")}),this.addEventListener("pointercancel",e),i&&this.setAttribute("pressed","")}}}async#R(t){if(!(t.buttons>1||t.target.closest("x-menuitem")!==this||t.target.closest("x-menu")!==this.closest("x-menu")||this.matches("[closing] x-menuitem"))){if(this.togglable){let t=new CustomEvent("toggle",{bubbles:!0,cancelable:!0});this.dispatchEvent(t),!1===t.defaultPrevented&&(this.toggled=!this.toggled)}if(!this.querySelector(":scope > x-menu")){let t=getComputedStyle(this).getPropertyValue("--trigger-effect").trim();if("blink"===t){this.#Hs=!0,this.#js?(this.parentElement.focus(),await jn(150),this.focus(),await jn(150)):(this.focus(),await jn(150),this.parentElement.focus(),await jn(150));for(let t of this.#Os)t();this.#Os=[],this.#Hs=!1}else if("none"===t){this.#Hs=!0,await jn(50);for(let t of this.#Os)t();this.#Os=[],this.#Hs=!1}}}}#_(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.querySelector("x-menu")||(t.stopPropagation(),this.click()))}}customElements.define("x-menuitem",Na);class Fa extends HTMLElement{static observedAttributes=["opened"];static#E=Hs`<template><slot></slot></template>`;static#z=Os`:host{display:none;position:fixed;min-width:15px;min-height:15px;bottom:15px;left:50%;transform:translateX(-50%);padding:5px 12px;box-sizing:border-box;color:rgba(255,255,255,.9);background:#434343;z-index:9999;font-size:12px;user-select:text;-webkit-user-select:none;transition:transform .15s cubic-bezier(.4, 0, .2, 1)}:host([animating]),:host([opened]){display:block}:host(:focus){outline:0}`;get opened(){return this.hasAttribute("opened")}set opened(t){!0===t?this.setAttribute("opened",""):this.removeAttribute("opened"),this.#Xs=0}get timeout(){return this.hasAttribute("timeout")?parseFloat(this.getAttribute("timeout")):0}set timeout(t){this.setAttribute("timeout",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#Xs=0;#_s=null;#Zs=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Fa.#z],this.#S.append(document.importNode(Fa.#E.content,!0))}connectedCallback(){this.setAttribute("tabindex","0")}attributeChangedCallback(t,e,i){e!==i&&"opened"===t&&(this.opened?this.#Us():this.#Z())}#Us(){if(this.isConnected){let t=0-this.getBoundingClientRect().height-10+"px",e=getComputedStyle(this).bottom;this.animate({bottom:[t,e]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})}{this.#Xs=0,this.#_s=setInterval((()=>{this.#Xs+=100,this.timeout>0&&this.#Xs>this.timeout&&(this.opened=!1)}),100);let t=Nn();window.addEventListener("pointerdown",this.#Zs=e=>{let i=Nn(),s=this.getBoundingClientRect();var n,a;i-t>10&&!1==(n=s,(a=new DOMPoint(e.clientX,e.clientY)).x>=n.x&&a.x<=n.x+n.width&&a.y>=n.y&&a.y<=n.y+n.height)&&(this.opened=!1)},!0)}}async#Z(){if(clearInterval(this.#_s),this.isConnected){this.setAttribute("animating","");let t=getComputedStyle(this).bottom,e=0-this.getBoundingClientRect().height-10+"px",i=this.animate({bottom:[t,e]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});await i.finished,this.removeAttribute("animating")}window.removeEventListener("pointerdown",this.#Zs,!0)}}customElements.define("x-notification",Fa);let{isFinite:Ga}=Number;const Xa=["0","1","2","3","4","5","6","7","8","9","-","+",",","."];class _a extends HTMLElement{static observedAttributes=["value","min","max","prefix","suffix","disabled"];static#E=Hs`<template><main id="main"><div id="editor-container"><div id="editor" contenteditable="plaintext-only" spellcheck="false"></div></div><slot></slot></main></template>`;static#z=Os`:host{display:block;position:relative;max-width:160px;height:32px;box-sizing:border-box;font-size:12.5px;--inner-padding:0 6px}:host(:hover){cursor:text}:host([mixed]){color:rgba(0,0,0,.7)}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{display:flex;align-items:center;height:100%}#editor-container{display:flex;align-items:center;width:100%;height:100%;padding:var(--inner-padding);box-sizing:border-box;overflow:hidden}#editor{width:100%;overflow:auto;color:inherit;background:0 0;border:none;outline:0;font-family:inherit;font-size:inherit;line-height:10;white-space:nowrap;font-variant-numeric:tabular-nums}#editor::-webkit-scrollbar{display:none}#editor::before{content:attr(data-prefix);pointer-events:none}#editor::after{content:attr(data-suffix);pointer-events:none}:host(:focus) #editor::after,:host(:focus) #editor::before,:host([empty]) #editor::after,:host([empty]) #editor::before{content:""}`;get value(){return this.hasAttribute("value")?parseFloat(this.getAttribute("value")):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get min(){return this.hasAttribute("min")?parseFloat(this.getAttribute("min")):-Infinity}set min(t){Ga(t)?this.setAttribute("min",t):this.removeAttribute("min")}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):Infinity}set max(t){Ga(t)?this.setAttribute("max",t):this.removeAttribute("max")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get precision(){return this.hasAttribute("precision")?parseFloat(this.getAttribute("precision")):20}set precision(t){this.setAttribute("precision",t)}get step(){return this.hasAttribute("step")?parseFloat(this.getAttribute("step")):1}set step(t){this.setAttribute("step",t)}get prefix(){return this.hasAttribute("prefix")?this.getAttribute("prefix"):""}set prefix(t){this.setAttribute("prefix",t)}get suffix(){return this.hasAttribute("suffix")?this.getAttribute("suffix"):""}set suffix(t){this.setAttribute("suffix",t)}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get condensed(){return this.hasAttribute("condensed")}set condensed(t){t?this.setAttribute("condensed",""):this.removeAttribute("condensed")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#N=0;#Ys=!1;#qs=!1;#Ws=!1;#Vs=!1;#Ks=!1;constructor(){super(),this.#S=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#S.adoptedStyleSheets=[_a.#z],this.#S.append(document.importNode(_a.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.#S.addEventListener("pointerdown",(t=>this.#Js(t))),this.#S.addEventListener("wheel",(t=>this.#fs(t))),this["#editor"].addEventListener("paste",(t=>this.#Qs(t))),this["#editor"].addEventListener("input",(t=>this.#tn(t))),this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("pointerenter",(()=>this.#G())),this.addEventListener("pointerleave",(()=>this.#X())),this.addEventListener("keydown",(t=>this.#_(t))),this.addEventListener("keyup",(t=>this.#en(t))),this.addEventListener("keypress",(t=>this.#in(t))),this.addEventListener("incrementstart",(t=>this.#sn(t))),this.addEventListener("decrementstart",(t=>this.#nn(t))),this.addEventListener("focusin",(t=>this.#zt(t))),this.addEventListener("focusout",(t=>this.#St(t))),"gecko"===On()&&(this["#editor"].setAttribute("contenteditable",""),this["#editor"].addEventListener("beforeinput",(t=>{if("insertFromPaste"===t.inputType&&t.dataTransfer.types.includes("text/plain")){t.preventDefault();let e=window.getSelection(),i=e.getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(t.dataTransfer.getData("text/plain"))),e.collapseToEnd()}})))}connectedCallback(){this.#Y(),this.#It()}attributeChangedCallback(t){"value"===t?this.#Ot():"min"===t?this.#an():"max"===t?this.#ln():"prefix"===t?this.#rn():"suffix"===t?this.#on():"disabled"===t&&this.#mt()}#hn(t=!1){let e=this.value,i=this.value;i+=t?10*this.step:this.step,i=vi(i,this.min,this.max,yi(this.step)),e!==i&&(this.value=i),this.matches(":focus")&&document.execCommand("selectAll"),this.#dn()}#cn(t=!1){let e=this.value,i=this.value;i-=t?10*this.step:this.step,i=vi(i,this.min,this.max,yi(this.step)),e!==i&&(this.value=i),this.matches(":focus")&&document.execCommand("selectAll"),this.#dn()}#un(){this.#qs||(this.#qs=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})))}#pn=((t,e,i,s=!1)=>{let n=null,a=null;return(...l)=>{let r=s&&!n;return clearTimeout(n),n=setTimeout((()=>{n=null,s||(a=t.apply(i,l))}),e),r&&(a=t.apply(i,l)),a}})((()=>{!this.#qs||this.#Ws||this.#Vs||this.#Ks||(this.#qs=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})))}),500);#mn(){let t=this["#editor"].textContent,e=""===t.trim()?null:parseFloat(t),i=null===e?null:vi(e,this.min,this.max);i!==this.value?(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this.value=i,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))):e!==this.value&&(this.value=i)}#It(){this.#bn(),this.#dn(),this.#gn()}#bn(){if(this.hasAttribute("value"))if(this.step<1){let t=parseFloat(this.getAttribute("value")),e=yi(this.step),i=yi(t);this["#editor"].textContent=e>0&&i<e?t.toFixed(e):this.getAttribute("value").trim()}else this["#editor"].textContent=this.getAttribute("value").trim();else this["#editor"].textContent=""}#dn(){let t=null;if(this.matches(":focus")){let e=this["#editor"].textContent;t=""===e.trim()?null:parseFloat(e)}else t=this.value;null===t?this.setAttribute("empty",""):this.removeAttribute("empty")}#gn(){let t=this.querySelector("x-stepper");if(t){let e=this.value>this.min,i=this.value<this.max;!0===i&&!0===e?t.removeAttribute("disabled"):!1===i&&!1===e?t.setAttribute("disabled",""):!1===i?t.setAttribute("disabled","increment"):!1===e&&t.setAttribute("disabled","decrement")}}#Y(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#Ot(){this.#It()}#an(){this.#gn()}#ln(){this.#gn()}#rn(){this["#editor"].setAttribute("data-prefix",this.prefix)}#on(){this["#editor"].setAttribute("data-suffix",this.suffix)}#mt(){this["#editor"].disabled=this.disabled,this.#Y()}#zt(){document.execCommand("selectAll"),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#St(){"webkit"!==On()&&this.#S.getSelection().collapse(this["#main"]),this["#editor"].scrollLeft=0,this.#mn(),this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0}))}#tn(){this.#dn(),this.#gn()}#fs(t){this.matches(":focus")&&(t.preventDefault(),this.#un(),t.wheelDeltaX>0||t.wheelDeltaY>0?(this.#hn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))):(this.#cn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#pn())}#R(t){t.preventDefault()}#F(t){"x-stepper"===t.target.localName&&t.preventDefault()}#Js(t){if(t.buttons>1||!1===t.isPrimary)t.preventDefault();else if(t.target===this["#editor"]&&!1===this["#editor"].matches(":focus")){t.preventDefault();let e,i,s=this.value,n=t.clientX,a=new DOMPoint(t.clientX,t.clientY);this.style.cursor="col-resize",this["#editor"].setPointerCapture(t.pointerId),this["#editor"].addEventListener("pointermove",e=e=>{let i=new DOMPoint(e.clientX,e.clientY),l=e.timeStamp-t.timeStamp,r=e.clientX!==n,o=Ci(a,i)>3||l>80;if(n=e.clientX,r&&o&&e.isPrimary){!1===this.#Ys&&(this.#Ys=!0,this.#qs=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})));let i=e.clientX-t.clientX,n=s+i*this.step;n=vi(n,this.min,this.max,yi(this.step)),this.value=n,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}),this["#editor"].addEventListener("pointerup",i=()=>{this["#editor"].removeEventListener("pointermove",e),this["#editor"].removeEventListener("pointerup",i),this["#editor"].removeEventListener("pointercancel",i),this.style.cursor=null,!0===this.#Ys?(this.#Ys=!1,this.#qs=!1,this.dispatchEvent(new CustomEvent("changeend",{detail:this.value!==s,bubbles:!0}))):(this["#editor"].focus(),document.execCommand("selectAll"))}),this["#editor"].addEventListener("pointercancel",i)}}#G(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#X(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#sn(t){let e,i;this.matches(":focus")&&this.#mn(),this.#Ks=!0,this.addEventListener("increment",e=t=>{this.#un(),this.#hn(t.detail.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#pn()}),this.addEventListener("incrementend",i=t=>{this.#Ks=!1,this.removeEventListener("increment",e),this.removeEventListener("incrementend",i)})}#nn(t){let e,i;this.matches(":focus")&&this.#mn(),this.#Ks=!0,this.addEventListener("decrement",e=t=>{this.#un(),this.#cn(t.detail.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#pn()}),this.addEventListener("decrementend",i=t=>{this.#Ks=!1,this.removeEventListener("decrement",e),this.removeEventListener("decrementend",i)})}#_(t){"ArrowDown"===t.code?(t.preventDefault(),this.#Ws=!0,this.#un(),this.#cn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#pn()):"ArrowUp"===t.code?(t.preventDefault(),this.#Ws=!0,this.#un(),this.#hn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#pn()):"Backspace"===t.code?this.#Vs=!0:"Enter"!==t.code&&"NumpadEnter"!==t.code||(this.#mn(),document.execCommand("selectAll"))}#en(t){"ArrowDown"===t.code||"ArrowUp"===t.code?(this.#Ws=!1,this.#pn()):"Backspace"===t.code&&(this.#Vs=!1)}#in(t){!1===t.ctrlKey&&!1===t.altKey&&!1===t.metaKey&&!1===Xa.includes(t.key)&&t.preventDefault()}async#Qs(t){t.preventDefault();let e=t.clipboardData.getData("text/plain").trim();(t=>{let e=Da(t);return!1===Ta(e)&&Pa(e)})(e)&&(await jn(1),document.execCommand("insertText",!1,e))}}customElements.define("x-numberinput",_a);class Za extends HTMLElement{static observedAttributes=["modal"];static#E=Hs`<template><svg id="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg><slot id="slot"></slot></template>`;static#z=Os`:host{position:fixed;display:none;top:0;left:0;min-height:30px;z-index:1001;box-sizing:border-box;background:#fff;overflow:auto;-webkit-app-region:no-drag;--align:bottom;--arrow-size:20px;--open-transition:900 transform cubic-bezier(0.4, 0, 0.2, 1);--close-transition:200 opacity cubic-bezier(0.4, 0, 0.2, 1)}:host(:focus){outline:0}:host([animating]),:host([opened]){display:flex}#arrow{position:fixed;box-sizing:border-box;content:""}#arrow[data-align=bottom],#arrow[data-align=top]{width:var(--arrow-size);height:calc(var(--arrow-size) * .6);transform:translate(-50%,0)}#arrow[data-align=left],#arrow[data-align=right]{width:calc(var(--arrow-size) * .6);height:var(--arrow-size);transform:translate(0,-50%)}#arrow-path{stroke-width:1;vector-effect:non-scaling-stroke}#slot{border-radius:inherit}`;get opened(){return this.hasAttribute("opened")}get modal(){return this.hasAttribute("modal")}set modal(t){t?this.setAttribute("modal",""):this.removeAttribute("modal")}#S=null;#fn=null;#xn=new ResizeObserver((()=>this.#vi()));#wn=null;#vn;#kn;#kt;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Za.#z],this.#S.append(document.importNode(Za.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>{t.preventDefault()})),this["#backdrop"].addEventListener("pointerdown",(t=>{this.hasAttribute("animating")?t.stopPropagation():this.parentNode&&"x-button"!==this.parentNode.localName&&"x-colorselect"!==this.parentNode.localName&&this.close()}))}connectedCallback(){this.tabIndex=-1}attributeChangedCallback(t,e,i){e!==i&&"modal"===t&&(this.modal&&this.opened?this["#backdrop"].show():this["#backdrop"].hide())}#vi(){this.#yn(this.#wn)}open(t,e=!0){return new Promise((async i=>{if(this.#wn=t,!1===this.opened&&(this.modal&&this["#backdrop"].show(!1),this.setAttribute("opened",""),this.#xn.observe(this),window.addEventListener("resize",this.#kn=()=>this.#vi()),Gn.addEventListener("themechange",this.#kt=()=>this.#Cn()),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),await new Promise((t=>{requestAnimationFrame(t)})),this.#Cn(),this.#yn(t),this.#fn=Un(this),this.#fn&&this.#fn.addEventListener("scroll",this.#vn=()=>{this.close()},{once:!0}),e)){let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Ia(t);"transform"===e&&await this.animate({transform:["scale(1, 0)","scale(1, 1)"],transformOrigin:["0 0","0 0"]},{duration:i,easing:s}).finished}i()}))}close(t=!0){return new Promise((async e=>{if(!0===this.opened&&(this.removeAttribute("opened"),this.#xn.disconnect(),window.removeEventListener("resize",this.#kn),Gn.removeEventListener("themechange",this.#kt),this["#backdrop"].hide(),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this})),this.#fn.removeEventListener("scroll",this.#vn),t)){let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Ia(t);this.setAttribute("animating",""),"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished,this.removeAttribute("animating")}e()}))}#yn(t){let e=getComputedStyle(this).getPropertyValue("--align").trim(),i=parseInt(getComputedStyle(this).borderWidth),s=0,n=0,a=null;this.style.maxWidth=null,this.style.maxHeight=null,this.style.left="0px",this.style.top="0px";{let e=wi(this.getBoundingClientRect());0===e.top&&0===e.left||(s=-e.left,n=-e.top),a=t instanceof DOMPoint?new DOMRect(t.x,t.y,0,0):t instanceof DOMRect?t:t instanceof Element?t.getBoundingClientRect():new DOMRect}if("bottom"===e||"top"===e){let t=(t=!1)=>{this.style.maxHeight=null,this["#arrow"].setAttribute("data-align","bottom"),this["#arrow-path"].setAttribute("d","M 0 100, L 50 0, L 100 100");let e=wi(this.getBoundingClientRect()),s=wi(this["#arrow"].getBoundingClientRect()),l=0;if(this["#arrow"].style.top=n+a.bottom+2+i+"px",this.style.top=n+a.bottom+2+s.height+"px",e=wi(this.getBoundingClientRect()),l=e.bottom+8-window.innerHeight,t&&l>0){let t=e.height-l;l=0,this.style.maxHeight=t+"px"}return l},l=(t=!1)=>{this.style.maxHeight=null,this["#arrow"].setAttribute("data-align","top"),this["#arrow-path"].setAttribute("d","M 0 0, L 50 100, L 100 0");let e=wi(this.getBoundingClientRect()),s=wi(this["#arrow"].getBoundingClientRect()),l=0;if(this["#arrow"].style.top=Math.floor(n+a.top-2-i-s.height)+"px",this.style.top=n+a.top-2-s.height-e.height+"px",e=wi(this.getBoundingClientRect()),l=-(e.top-8),t&&l>0){let t=e.height-l;l=0,this.style.maxHeight=t+"px",this.style.top=n+a.top-2-s.height-t+"px"}return l},r=()=>{this.style.maxWidth=null;let t=wi(this.getBoundingClientRect()),e=0,i=0;return this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+a.left+a.width/2-t.width/2+"px",t=wi(this.getBoundingClientRect()),e=-(t.left-8),i=t.right+8-window.innerWidth,[e,i]},o=(t=!1)=>{this.style.maxWidth=null;let e=wi(this.getBoundingClientRect()),i=0;if(this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+window.innerWidth-8-e.width+"px",e=wi(this.getBoundingClientRect()),i=-(e.left-8),t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px",this.style.left=s+window.innerWidth-8-t+"px"}return i},h=(t=!1)=>{this.style.maxWidth=null;let e=wi(this.getBoundingClientRect()),i=0;if(this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+8+"px",e=wi(this.getBoundingClientRect()),i=e.right+8-window.innerWidth,t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px"}return i};if("bottom"===e){let e=t();if(e>0){let i=l();i>0&&(i>e?t(!0):l(!0))}}else if("top"===e){let e=l();if(e>0){let i=t();i>0&&(i>e?l(!0):t(!0))}}{let[t,e]=r();e>0?(t=o(),t>0&&o(!0)):t>0&&(e=h(),e>0&&h(!0))}}else if("right"===e||"left"===e){let t=(t=!1)=>{this.style.maxWidth=null,this["#arrow"].setAttribute("data-align","right"),this["#arrow-path"].setAttribute("d","M 100 0, L 0 50, L 100 100");let e=wi(this.getBoundingClientRect()),n=wi(this["#arrow"].getBoundingClientRect()),l=0;if(this["#arrow"].style.left=s+a.right+2+i+"px",this.style.left=s+a.right+2+n.width+"px",e=wi(this.getBoundingClientRect()),l=e.right+8-window.innerWidth,t&&l>0){let t=e.width-l;l=0,this.style.maxWidth=t+"px"}return l},l=(t=!1)=>{this.style.maxWidth=null,this["#arrow"].setAttribute("data-align","left"),this["#arrow-path"].setAttribute("d","M 0 0, L 100 50, L 00 100");let e=wi(this.getBoundingClientRect()),n=wi(this["#arrow"].getBoundingClientRect()),l=0;if(this["#arrow"].style.left=s+a.left-2-i-n.width+"px",this.style.left=s+a.left-2-n.width-e.width+"px",e=wi(this.getBoundingClientRect()),l=-(e.left-8),t&&l>0){let t=e.width-l;l=0,this.style.maxWidth=t+"px",this.style.left=s+a.left-2-n.width-t+"px"}return l},r=()=>{this.style.maxHeight=null;let t=wi(this.getBoundingClientRect()),e=0,i=0;return this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+a.top+a.height/2-t.height/2+"px",t=wi(this.getBoundingClientRect()),e=-(t.top-8),i=t.bottom+8-window.innerHeight,[e,i]},o=(t=!1)=>{this.style.maxHeight=null;let e=wi(this.getBoundingClientRect()),i=0;if(this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+window.innerHeight-8-e.height+"px",e=wi(this.getBoundingClientRect()),i=-(e.top-8),t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px",this.style.top=n+window.innerHeight-8-t+"px"}return i},h=(t=!1)=>{this.style.maxHeight=null;let e=wi(this.getBoundingClientRect()),i=0;if(this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+8+"px",e=wi(this.getBoundingClientRect()),i=e.bottom+8-window.innerHeight,t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px"}return i};if("right"===e){let e=t();if(e>0){let i=l();i>0&&(i>e?t(!0):l(!0))}}else if("left"===e){let e=l();if(e>0){let i=t();i>0&&(i>e?l(!0):t(!0))}}{let[t,e]=r();e>0?(t=o(),t>0&&o(!0)):t>0&&(e=h(),e>0&&h(!0))}}}#Cn(){{let{backgroundColor:t,borderColor:e,borderWidth:i}=getComputedStyle(this);this["#arrow-path"].style.fill=t,this["#arrow-path"].style.stroke=e,this["#arrow-path"].style.strokeWidth=i}}}customElements.define("x-popover",Za);class Ua extends HTMLElement{static observedAttributes=["value","max","disabled"];static#E=Hs`<template><div id="determinate-bar" part="bar"></div><div id="indeterminate-bars"><div id="primary-indeterminate-bar" part="bar"></div><div id="secondary-indeterminate-bar" part="bar"></div></div></template>`;static#z=Os`:host{display:block;box-sizing:border-box;height:8px;width:100%;position:relative;contain:strict;overflow:hidden;background:#acece6;cursor:default}:host([hidden]){display:none}#indeterminate-bars{width:100%;height:100%}#determinate-bar{position:absolute;top:0;left:0;bottom:0;width:0%;height:100%;background:#3b99fb;box-shadow:0 0 0 1px #3385db;transition:width .4s ease-in-out;will-change:left,right}:host([value="-1"]) #determinate-bar{visibility:hidden}#primary-indeterminate-bar{position:absolute;top:0;left:0;bottom:0;height:100%;background:#3b99fb;will-change:left,right}#secondary-indeterminate-bar{position:absolute;top:0;left:0;bottom:0;height:100%;background:#3b99fb;will-change:left,right}`;get value(){return this.hasAttribute("value")?parseFloat(this.getAttribute("value")):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):1}set max(t){this.setAttribute("max",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#En=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Ua.#z],this.#S.append(document.importNode(Ua.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#It()}attributeChangedCallback(t,e,i){e!==i&&("value"===t||"disabled"===t)&&this.#It()}#It(){if(null===this.value||-1===this.value||this.disabled?this["#determinate-bar"].style.width="0%":this["#determinate-bar"].style.width=this.value/this.max*100+"%",null!==this.value||this.disabled){if(this.#En){for(let t of this.#En)t.cancel();this.#En=null}}else this.#En||(this.#En=[this["#primary-indeterminate-bar"].animate([{left:"-35%",right:"100%",offset:0},{left:"100%",right:"-90%",offset:.6},{left:"100%",right:"-90%",offset:1}],{duration:2e3,easing:"ease-in-out",iterations:Infinity}),this["#secondary-indeterminate-bar"].animate([{left:"-100%",right:"100%",offset:0},{left:"110%",right:"-30%",offset:.8},{left:"110%",right:"-30%",offset:1}],{duration:2e3,delay:1e3,easing:"ease-in-out",iterations:Infinity})])}}customElements.define("x-progressbar",Ua);class Ya extends HTMLElement{static observedAttributes=["toggled","disabled"];static#E=Hs`<template><main id="main"><div id="indicator" part="indicator"><div id="indicator-dot" part="indicator-dot"></div></div><div id="description"><slot></slot></div></main></template>`;static#z=Os`:host{display:block;position:relative;width:fit-content}:host(:focus){outline:0}:host([disabled]){opacity:.4;pointer-events:none}:host([hidden]){display:none}#main{display:flex;align-items:center}#indicator{position:relative;border:3px solid #000;width:19px;height:19px;border-radius:99px;display:flex;align-items:center;justify-content:center}#indicator-dot{width:100%;height:100%;background:currentColor;border-radius:99px;transform:scale(0)}:host([mixed][toggled]) #indicator-dot{height:33%;border-radius:0}:host([toggled]) #indicator-dot{transform:scale(.5)}#description{flex:1}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#N=0;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Ya.#z],this.#S.append(document.importNode(Ya.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("keydown",(t=>this.#_(t)))}connectedCallback(){this.#Y()}attributeChangedCallback(t){"toggled"===t?this.#ut():"disabled"===t&&this.#mt()}#Y(){this.setAttribute("role","radio"),this.setAttribute("aria-checked",this.toggled),this.setAttribute("aria-disabled",this.disabled),this.closest("x-radios")||(this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0))}#ut(){this.setAttribute("aria-checked",this.toggled)}#mt(){this.#Y()}#R(t){this.closest("x-radios")||(this.toggled&&this.mixed?this.mixed=!1:(this.mixed=!1,this.toggled=!this.toggled),this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0})))}#F(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}}#_(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-radio",Ya);class qa extends HTMLElement{get value(){let t=this.querySelector("x-radio[toggled]");return t?t.value:null}set value(t){for(let e of this.querySelectorAll("x-radio"))e.toggled=e.value===t&&null!==t}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.innerHTML="<slot></slot>",this.addEventListener("click",(t=>this.#R(t)),!0),this.addEventListener("keydown",(t=>this.#_(t)))}connectedCallback(){this.setAttribute("role","radiogroup");let t=[...this.querySelectorAll("x-radio")].filter((t=>t.closest("x-radios")===this)),e=t.find((t=>t.toggled&&!t.disabled))||t.find((t=>!t.disabled));for(let i of t)i.setAttribute("tabindex",i===e?"0 ":"-1"),i.setAttribute("aria-checked",i===e)}#R(t){let e=t.target.closest("x-radio");if(e&&!e.toggled&&!e.disabled&&t.buttons<=1){let t=[...this.querySelectorAll("x-radio")].filter((t=>t.closest("x-radios")===this&&t!==e));if(!1===e.toggled||!0===e.mixed){e.toggled=!0,e.mixed=!1,e.tabIndex=0;for(let e of t)e.toggled=!1,e.tabIndex=-1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}}}#_(t){if("ArrowDown"===t.code||"ArrowRight"===t.code){let e=[...this.querySelectorAll("x-radio")],i=e.filter((t=>!1===t.disabled&&t.closest("x-radios")===this)),s=e.find((t=>t.matches(":focus")));if(s){let e=i.indexOf(s),n=i.length>1?i[e+1]||i[0]:null;n&&(t.preventDefault(),n.focus(),n.tabIndex=0,s.tabIndex=-1)}}else if("ArrowUp"===t.code||"ArrowLeft"===t.code){let e=[...this.querySelectorAll("x-radio")],i=e.filter((t=>!1===t.disabled&&t.closest("x-radios")===this)),s=e.find((t=>t.matches(":focus")));if(s){let e=i.indexOf(s),n=i[i.length-1],a=i.length>1?i[e-1]||n:null;a&&(t.preventDefault(),a.focus(),a.tabIndex=0,s.tabIndex=-1)}}}}customElements.define("x-radios",qa);let Wa=Symbol();class Va extends HTMLElement{static observedAttributes=["disabled"];static#E=Hs`<template><div id="button"><div id="arrow-container"><svg id="arrow" part="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></div></div><slot></slot></template>`;static#z=Os`:host{display:block;width:fit-content;height:32px;padding:0 0 0 8px;max-width:100%;box-sizing:border-box;position:relative;outline:0;font-size:14px;user-select:none;-webkit-user-select:none}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}:host(:hover){cursor:default}:host([size=small]){font-size:12.5px}#button{display:flex;flex-flow:row;align-items:center;justify-content:flex-start;flex:1;width:100%;height:100%}:host([mixed]) #button>*{opacity:.7}#button>x-label{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#button>#arrow-container{display:flex;align-content:center;justify-content:center;margin:0 0 0 auto;z-index:999}#button>#arrow-container #arrow{display:flex;width:13px;height:13px;min-width:13px;margin:0 2px 0 11px;color:currentColor;--text-color:50%;--path-data:M 25 41 L 50 16 L 75 41 L 83 34 L 50 1 L 17 34 Z M 17 66 L 50 100 L 83 66 L 75 59 L 50 84 L 25 59 Z}#button>#arrow-container #arrow path{fill:currentColor}`;get value(){let t=this.querySelector("x-menuitem[toggled]");return t?t.value:null}set value(t){for(let e of this.querySelectorAll("x-menuitem"))e.toggled=e.value===t&&null!==t}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#N=0;#O=!1;#yt=null;#Ct=null;#L=null;#zn=new MutationObserver((t=>this.#Sn(t)));#$=new ResizeObserver((()=>this.#vi()));constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Va.#z],this.#S.append(document.importNode(Va.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#backdrop"]=Xn("x-backdrop"),this["#backdrop"].style.opacity="0",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>this.#Et(t))),this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("toggle",(t=>this.#$n(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#_(t)))}connectedCallback(){this.#zn.observe(this,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this.#$.observe(this),this.#Mn(),this.#T(),this.#Y(),Gn.addEventListener("themechange",this.#L=()=>this.#T())}disconnectedCallback(){this.#zn.disconnect(),this.#$.disconnect(),Gn.removeEventListener("themechange",this.#L)}attributeChangedCallback(t){"disabled"===t&&this.#Y()}#Ft(){if(!1===this.#Gt())return;this.#O=this.matches(":focus"),this["#backdrop"].show(!1),window.addEventListener("resize",this.#yt=()=>{this.#Xt()}),window.addEventListener("blur",this.#Ct=()=>{this.#Xt()});let t=this.querySelector(":scope > x-menu");{let e=null;for(let i of t.querySelectorAll("x-menuitem"))i.togglable=!0,i.toggled&&(null===e?e=i:i.toggled=!1)}if(t.querySelector("x-menuitem[toggled]")){let e=this["#button"].querySelector("x-label")||this["#button"].firstElementChild,i=e[Wa];t.openOverElement(e,i)}else{let e=t.querySelector("x-menuitem").firstElementChild;t.openOverElement(this["#button"],e)}{let e=t.getBoundingClientRect(),i=this["#button"].getBoundingClientRect(),s=parseFloat(getComputedStyle(this).paddingRight);e.right-s<i.right&&(t.style.minWidth=i.right-e.left+s+"px")}{let t=this.getBoundingClientRect();t.right+7>window.innerWidth&&(this.style.maxWidth=window.innerWidth-t.left-7+"px")}}async#Xt(t=null){if(!1===this.#_t())return;let e=this.querySelector(":scope > x-menu");if(e.setAttribute("closing",""),await t,this["#backdrop"].hide(!1),this.#O)this.focus();else{let t=Zn(this.parentNode,"[tabindex]");t&&t.focus()}window.removeEventListener("resize",this.#yt),window.removeEventListener("blur",this.#Ct),await e.close(),e.removeAttribute("closing")}#Gt(){if(this.disabled)return!1;{let t=this.querySelector(":scope > x-menu"),e=t.querySelector("x-menuitem");return null!==t&&!1===t.opened&&!1===t.hasAttribute("closing")&&null!==e}}#_t(){if(this.disabled)return!1;{let t=this.querySelector(":scope > x-menu");return t.querySelector("x-menuitem"),null!==t&&!0===t.opened&&!1===t.hasAttribute("closing")}}#Mn(){let t=this.querySelector(":scope > x-menu x-menuitem[toggled]");if(this["#button"].innerHTML="",t){for(let e of t.children){let t=e.cloneNode(!0);t[Wa]=e,t.removeAttribute("id"),t.removeAttribute("style"),this["#button"].append(t)}this.#Ln()}this["#button"].append(this["#arrow-container"])}#An=Fn(this.#Mn,300,this);#Ln(){for(let t of this["#button"].children)if(t!==this["#arrow-container"]){let{width:e,height:i,margin:s,padding:n,border:a,borderRadius:l}=getComputedStyle(t[Wa]);["x-icon","x-swatch","img","svg"].includes(t[Wa].localName)&&(t.style.width=e,t.style.height=i,t.style.minWidth=e,t.style.borderRadius=l),t.style.margin=s,t.style.padding=n,t.style.border=a}}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#Y(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0);{this.setAttribute("role","button");let t=this.querySelector(":scope > x-menu");if(t){t.setAttribute("role","listbox");for(let e of t.querySelectorAll("x-menuitem"))e.setAttribute("role","option")}}}async#Sn(t){for(let e of t)if("attributes"===e.type&&"x-menuitem"===e.target.localName&&"toggled"===e.attributeName){await jn(10),this.#An();break}}#vi(){this.#Ln()}#F(t){t.target.closest("x-menu")||!1!==this.matches(":focus")||t.preventDefault()}async#R(t){if(!(t.buttons>1))if(this.#Gt())this.#Ft();else if(this.#_t()){let e=t.target.closest("x-menuitem");if(e){let t=this.value,i=e.value;for(let t of this.querySelectorAll("x-menuitem"))t.toggled=t===e;await this.#Xt(e.whenTriggerEnd),(t!==i||this.mixed)&&(this.mixed=!1,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{oldValue:t,newValue:i}})))}}}#$n(t){t.preventDefault()}#Et(t){this.#Xt()}#_(t){!1===t.defaultPrevented&&(this.querySelector(":scope > x-menu"),"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code||"ArrowUp"===t.code||"ArrowDown"===t.code?this.#Gt()&&(t.preventDefault(),this.#Ft()):"Escape"===t.code&&this.#_t()&&(t.preventDefault(),this.#Xt()))}}customElements.define("x-select",Va);const Ka=navigator.platform.startsWith("Mac")||["iPhone","iPad"].includes(navigator.platform),Ja=["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock"];class Qa extends HTMLElement{static observedAttributes=["value"];static#E=Hs`<template><main id="main"></main></template>`;static#z=Os`:host{display:inline-block;box-sizing:border-box;font-size:14px;line-height:1}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}`;get value(){let t=[];if(this.hasAttribute("value")){let e=this.getAttribute("value").replace("++","+PLUS").split("+");e=e.map((t=>t.trim().replace("PLUS","+"))).filter((t=>""!==t)),t=e}return t}set value(t){this.setAttribute("value",t.join("+"))}get modKeys(){return this.value.filter((t=>Ja.includes(t)))}get normalKey(){let t=this.value.find((t=>!1===Ja.includes(t)));return void 0===t?null:t}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[Qa.#z],this.#S.append(document.importNode(Qa.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t}attributeChangedCallback(t){"value"===t&&this.#It()}#It(){let t="";this.value;let e=this.modKeys,i=this.normalKey;if(Ka){e.includes("Meta")&&(t+="^"),e.includes("Alt")&&(t+="⌥"),e.includes("Shift")&&(t+="⇧"),e.includes("Control")&&(t+="⌘"),e.includes("Symbol")&&(t+="☺"),void 0!==i&&(t+={ArrowUp:"↑",ArrowDown:"↓",ArrowLeft:"←",ArrowRight:"→",Backspace:"⌦"}[i]||i)}else{let s=[];e.includes("Control")&&s.push("Ctrl"),e.includes("Alt")&&s.push("Alt"),e.includes("Meta")&&s.push("Meta"),e.includes("Shift")&&s.push("Shift"),e.includes("Symbol")&&s.push("Symbol");let n={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};null!==i&&s.push(n[i]||i),t=s.join("+")}this["#main"].textContent=t}}customElements.define("x-shortcut",Qa);class tl extends HTMLElement{static observedAttributes=["value","buffer","min","max","disabled"];static#E=Hs`<template><main id="main"><div id="tracks-and-thumbs"><div id="groove-track" part="track groove-track"></div><div id="buffer-track" part="track buffer-track"></div><div id="range-track" part="track range-track"></div><div id="thumbs"><div id="start-thumb" class="thumb" part="thumb start-thumb" data-value="start" tabindex="0"></div><div id="end-thumb" class="thumb" part="thumb end-thumb" data-value="end" tabindex="0"></div></div></div><div id="ticks"></div><div id="labels"><slot></slot></div></main></template>`;static#z=Os`:host{display:block;width:100%;position:relative;box-sizing:border-box;touch-action:pan-y}:host(:focus){outline:0}:host(:hover){cursor:default}:host([disabled]){pointer-events:none;opacity:.4}:host([vertical]){width:fit-content;height:200px}#main{display:flex;flex-flow:column;width:100%;height:100%}:host([vertical]) #main{flex-flow:row}#tracks-and-thumbs{position:relative;width:100%;height:100%}#range-track{position:absolute;width:0%;height:4px;background:#000;top:50%;transform:translateY(-50%)}:host([vertical]) #range-track{width:4px;height:0%;top:initial;left:50%;transform:translateX(-50%)}#groove-track{position:absolute;width:100%;height:4px;background:gray;top:50%;transform:translateY(-50%)}:host([vertical]) #groove-track{width:4px;height:100%;top:initial;left:50%;transform:translateX(-50%)}#buffer-track{position:absolute;width:0%;height:4px;background:red;top:50%;transform:translateY(-50%)}:host([vertical]) #buffer-track{width:4px;height:0%;top:initial;left:50%;transform:translateX(-50%)}#thumbs{position:relative;width:calc(100% - var(--computed-thumb-width));height:100%;margin:0 auto}:host([vertical]) #thumbs{height:calc(100% - var(--computed-thumb-height));width:100%;margin:auto 0}#thumbs .thumb{position:absolute;top:0;left:0;width:20px;height:20px;margin-left:calc(var(--computed-thumb-width)/ -2);box-sizing:border-box;background:gray;border:1px solid rgba(0,0,0,.2)}:host([vertical]) #thumbs .thumb{margin-left:0}#thumbs .thumb:first-child{position:relative}#thumbs .thumb:focus{outline:0;z-index:2}#ticks{position:relative;width:calc(100% - var(--computed-thumb-width));margin:0 calc(var(--computed-thumb-width)/ 2)}:host([vertical]) #ticks{width:initial;height:calc(100% - var(--computed-thumb-height));margin:calc(var(--computed-thumb-height)/ 2) 0}#ticks:empty{display:none}#ticks .tick{position:absolute;left:0;top:0;width:1px;height:5px;background:rgba(0,0,0,.4)}:host([vertical]) #ticks .tick{width:5px;height:1px;left:0;top:0}#ticks .tick:first-child{position:relative}#labels{position:relative;width:calc(100% - var(--computed-thumb-width));margin:0 calc(var(--computed-thumb-width)/ 2)}:host([vertical]) #labels{width:initial;height:calc(100% - var(--computed-thumb-height));margin:calc(var(--computed-thumb-height)/ 2) 0}:host(:empty) #labels{display:none}::slotted(x-label){display:inline-block;top:0;position:absolute;vertical-align:top;transform:translateX(-50%);white-space:nowrap}:host([vertical]) ::slotted(x-label){top:initial;left:4px;transform:translateY(-50%)}`;get min(){return this.hasAttribute("min")?parseFloat(this.getAttribute("min")):0}set min(t){this.setAttribute("min",t)}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):100}set max(t){this.setAttribute("max",t)}get value(){if(this.hasAttribute("value")){let t=this.getAttribute("value").split(/[ ,]+/);return t.length>=2?t.map((t=>parseFloat(t))).slice(0,2):parseFloat(t[0])}return this.max>=this.min?this.min+(this.max-this.min)/2:this.min}set value(t){Array.isArray(t)?((t=t.map((t=>vi(t,this.min,this.max)))).length=2,this.setAttribute("value",t.join(" "))):(t=vi(t,this.min,this.max),this.setAttribute("value",t))}get buffer(){if(this.hasAttribute("buffer")){let t=this.getAttribute("buffer").split(/[ ,]+/);return t.length>=2?t.map((t=>parseFloat(t))).slice(0,2):[0,parseFloat(t[0])]}return[0,0]}set buffer(t){(t=t.map((t=>vi(t,this.min,this.max)))).length=2,this.setAttribute("buffer",t.join(" "))}get step(){return this.hasAttribute("step")?parseFloat(this.getAttribute("step")):1}set step(t){this.setAttribute("step",t)}get vertical(){return this.hasAttribute("vertical")}set vertical(t){t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get dragging(){return this.getAttribute("dragging")}#S=null;#N=0;#zn=new MutationObserver((t=>this.#Sn(t)));#Rn=new ResizeObserver((()=>this.#Pn()));constructor(){super(),this.#S=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#S.adoptedStyleSheets=[tl.#z],this.#S.append(document.importNode(tl.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.#S.addEventListener("pointerdown",(t=>this.#Js(t))),this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("keydown",(t=>this.#_(t)))}connectedCallback(){this.setAttribute("value",this.value),this.#Rn.observe(this["#start-thumb"]),this.#zn.observe(this,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"],characterData:!1}),this.#Tn(),this.#Dn(),this.#Bn(),this.#Y()}disconnectedCallback(){this.#Rn.unobserve(this["#start-thumb"]),this.#zn.disconnect()}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Ot():"buffer"===t?this.#In():"min"===t?this.#an():"max"===t?this.#ln():"disabled"===t&&this.#mt())}#Ot(){this.#Tn(),this.#Dn()}#In(){this.#Tn()}#an(){this.#Tn(),this.#Dn(),this.#Bn()}#ln(){this.#Tn(),this.#Dn(),this.#Bn()}#mt(){this.#Y()}#Sn(t){for(let e of t){if("attributes"===e.type&&e.target===this)return;this.#Hn()}}#Pn(){let t=this["#start-thumb"].getBoundingClientRect();this["#main"].style.setProperty("--computed-thumb-width",t.width+"px"),this["#main"].style.setProperty("--computed-thumb-height",t.height+"px")}#F(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}}#Js(t){if(t.buttons>1||!1===t.isPrimary)return;let e,i,s=null,{width:n,height:a}=this["#start-thumb"].getBoundingClientRect(),l=this["#main"].getBoundingClientRect(),r=!1;if(t.target.matches(".thumb"))s=t.target;else if(!0===this["#end-thumb"].hidden)s=this["#start-thumb"];else{let e=this["#start-thumb"].getBoundingClientRect(),i=this["#end-thumb"].getBoundingClientRect(),n=new DOMPoint(e.x+e.width/2,e.y+e.height/2),a=new DOMPoint(i.x+i.width/2,i.y+i.height/2),l=new DOMPoint(t.clientX,t.clientY),r=Ci(l,n),o=Ci(l,a);s=r<=o?this["#start-thumb"]:this["#end-thumb"]}let o=(t,e)=>{let i=0;if(this.vertical){let t=l.y+l.height-a/2-e;t=vi(t,0,l.height-a),i=t/(l.height-a)*(this.max-this.min)+this.min}else{let e=t-(l.x+n/2);e=vi(e,0,l.width-n),i=e/(l.width-n)*(this.max-this.min)+this.min}var o,h;if(o=i,h=this.step,i=xi(xi(o/h)*h,yi(h)),Array.isArray(this.value)){let[t,e]=this.value;s===this["#start-thumb"]?(i>=e&&(i=e),i!==t&&(this.value=[i,e],!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))):s===this["#end-thumb"]&&(i<=t&&(i=t),i!==e&&(this.value=[t,i],!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))))}else this.value!==i&&(this.value=i,!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};s.setPointerCapture(t.pointerId),this.setAttribute("dragging",s.dataset.value),o(t.clientX,t.clientY);for(let t of this["#thumbs"].children)t.style.zIndex=t===s?"1":"0";s.addEventListener("pointermove",e=t=>{t.isPrimary&&o(t.clientX,t.clientY)}),s.addEventListener("pointerup",i=()=>{s.removeEventListener("pointermove",e),s.removeEventListener("pointerup",i),s.removeEventListener("pointercancel",i),this.removeAttribute("dragging"),r&&this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}),s.addEventListener("pointercancel",i)}#_(t){if("ArrowLeft"===t.code||"ArrowDown"===t.code){t.preventDefault(),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=this.value;if(Array.isArray(this.value)){let[i,s]=this.value;this.#S.activeElement===this["#start-thumb"]?t.shiftKey?i-=10*this.step:i-=this.step:this.#S.activeElement===this["#end-thumb"]&&(t.shiftKey?s-=10*this.step:s-=this.step,s<=i&&(s=i)),this.value=[i,s],!1===at(e,this.value)&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}else t.shiftKey?this.value-=10*this.step:this.value-=this.step,e!==this.value&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}));this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}else if("ArrowRight"===t.code||"ArrowUp"===t.code){t.preventDefault(),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=this.value;if(Array.isArray(this.value)){let[i,s]=this.value;this.#S.activeElement===this["#start-thumb"]?(t.shiftKey?i+=10*this.step:i+=this.step,i>=s&&(i=s)):this.#S.activeElement===this["#end-thumb"]&&(t.shiftKey?s+=10*this.step:s+=this.step),this.value=[i,s],!1===at(e,this.value)&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}else t.shiftKey?this.value+=10*this.step:this.value+=this.step,e!==this.value&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}));this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}}#Dn(){if(Array.isArray(this.value)){let[t,e]=this.value;{let e=(t-this.min)/(this.max-this.min)*100;this.vertical?(this["#start-thumb"].style.top=100-e+"%",this["#start-thumb"].hidden=!1):(this["#start-thumb"].style.left=e+"%",this["#start-thumb"].hidden=!1)}{let t=(e-this.min)/(this.max-this.min)*100;this.vertical?(this["#end-thumb"].style.top=100-t+"%",this["#end-thumb"].hidden=!1):(this["#end-thumb"].style.left=t+"%",this["#end-thumb"].hidden=!1)}}else{let t=(this.value-this.min)/(this.max-this.min)*100;this.vertical?(this["#start-thumb"].style.top=100-t+"%",this["#start-thumb"].hidden=!1,this["#end-thumb"].hidden=!0):(this["#start-thumb"].style.left=t+"%",this["#start-thumb"].hidden=!1,this["#end-thumb"].hidden=!0)}}#Tn(){if(Array.isArray(this.value)){let[t,e]=this.value,i=(t-this.min)/(this.max-this.min)*100,s=(e-this.min)/(this.max-this.min)*100;this.vertical?(this["#range-track"].style.bottom=`${i}%`,this["#range-track"].style.height=s-i+"%"):(this["#range-track"].style.left=`${i}%`,this["#range-track"].style.width=s-i+"%")}else{let t=(this.value-this.min)/(this.max-this.min)*100,e=((this.min>0?this.min:0)-this.min)/(this.max-this.min)*100;this.vertical?t>=e?(this["#range-track"].style.bottom=`${e}%`,this["#range-track"].style.height=t-e+"%"):(this["#range-track"].style.bottom=`${t}%`,this["#range-track"].style.height=e-t+"%"):t>=e?(this["#range-track"].style.left=`${e}%`,this["#range-track"].style.width=t-e+"%"):(this["#range-track"].style.left=`${t}%`,this["#range-track"].style.width=e-t+"%")}{let[t,e]=this.buffer,i=(t-this.min)/(this.max-this.min)*100,s=(e-this.min)/(this.max-this.min)*100;this.vertical?(this["#buffer-track"].style.bottom=i+"%",this["#buffer-track"].style.height=s-i+"%"):(this["#buffer-track"].style.left=i+"%",this["#buffer-track"].style.width=s-i+"%")}}async#Bn(){await customElements.whenDefined("x-label"),this["#ticks"].innerHTML="";for(let t of this.querySelectorAll(":scope > x-label"))this.vertical?t.style.top=100-(t.value-this.min)/(this.max-this.min)*100+"%":t.style.left=(t.value-this.min)/(this.max-this.min)*100+"%",t===this.firstElementChild?t.style.position="relative":t.style.position=null,this.vertical?this["#ticks"].insertAdjacentHTML("beforeend",`<div class="tick" part="tick" style="top: ${t.style.top}"></div>`):this["#ticks"].insertAdjacentHTML("beforeend",`<div class="tick" part="tick" style="left: ${t.style.left}"></div>`)}#Hn=Fn(this.#Bn,500,this);#Y(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0),this["#start-thumb"].tabIndex=this.tabIndex,this["#end-thumb"].tabIndex=this.tabIndex}}customElements.define("x-slider",tl);class el extends HTMLElement{static observedAttributes=["disabled"];static#E=Hs`<template><div id="decrement-button" part="decrement-button" class="button"><svg id="decrement-arrow" part="decrement-arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="decrement-arrow-path"></path></svg></div><div id="increment-button" part="increment-button" class="button"><svg id="increment-arrow" part="increment-arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="increment-arrow-path"></path></svg></div></template>`;static#z=Os`:host{display:flex;flex-flow:column-reverse;align-items:center;justify-content:center;box-sizing:border-box;height:100%;width:fit-content;color:rgba(0,0,0,.6)}:host(:hover){cursor:default}:host([disabled=""]){opacity:.5;pointer-events:none}.button{display:flex;align-items:center;justify-content:center;width:100%;height:100%;user-select:none;-webkit-user-select:none;box-sizing:border-box;color:inherit;border-left:none}.button[data-pressed]{color:#fff;background:rgba(0,0,0,.3)}:host([disabled=decrement]) #decrement-button,:host([disabled=increment]) #increment-button{opacity:.3;pointer-events:none}#increment-arrow{width:11px;height:11px;pointer-events:none;--path-data:M 24 69 L 50 43 L 76 69 L 69 76 L 50 58 L 31 76 L 24 69 Z}#decrement-arrow{width:11px;height:11px;pointer-events:none;--path-data:M 24 32 L 50 58 L 76 32 L 69 25 L 50 44 L 31 25 L 24 32 Z}#decrement-arrow-path,#increment-arrow-path{fill:currentColor}`;get disabled(){return!!this.hasAttribute("disabled")&&("increment"===this.getAttribute("disabled")?"increment":"decrement"!==this.getAttribute("disabled")||"decrement")}set disabled(t){!0===t?this.setAttribute("disabled",""):!1===t?this.removeAttribute("disabled"):this.setAttribute("disabled",t)}#S=null;#On=null;#L=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[el.#z],this.#S.append(document.importNode(el.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.#S.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("contextmenu",(t=>t.preventDefault()))}connectedCallback(){this.#jn(),Gn.addEventListener("themechange",this.#L=()=>this.#jn()),"x-numberinput"===this.parentElement.localName&&(this.#On=this.parentElement,this.#On.setAttribute("hasstepper",""))}disconnectedCallback(){Gn.removeEventListener("themechange",this.#L),this.#On&&(null===this.#On.querySelector(":scope > x-stepper")&&this.#On.removeAttribute("hasstepper",""),this.#On=null)}attributeChangedCallback(t){"disabled"===t&&this.#mt()}#jn(){let t=getComputedStyle(this["#increment-arrow"]).getPropertyValue("--path-data"),e=getComputedStyle(this["#decrement-arrow"]).getPropertyValue("--path-data");this["#increment-arrow-path"].setAttribute("d",t),this["#decrement-arrow-path"].setAttribute("d",e)}#mt(){this.hasAttribute("disabled")&&(this.removeAttribute("pressed"),this["#increment-button"].removeAttribute("data-pressed"),this["#decrement-button"].removeAttribute("data-pressed"))}#F(t){let e=t.target.closest(".button"),i=null;if(e===this["#increment-button"]?i="increment":e===this["#decrement-button"]&&(i="decrement"),!(t.buttons>1||null===i)){this.setPointerCapture(t.pointerId);{let t,s=Date.now();e.setAttribute("data-pressed",""),this.setAttribute("pressed",i),this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t);let i=Date.now()-s;i<100&&await jn(100-i),e.removeAttribute("data-pressed"),this.removeAttribute("pressed")},{once:!0}),this.addEventListener("pointercancel",t)}{let e,s=null,n=Date.now(),{shiftKey:a}=t;this.dispatchEvent(new CustomEvent(i+"start",{bubbles:!0})),this.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{shiftKey:a}})),this.addEventListener("pointerup",e=()=>{this.removeEventListener("pointerup",e),this.removeEventListener("pointercancel",e),clearInterval(s),this.dispatchEvent(new CustomEvent(i+"end",{bubbles:!0}))}),this.addEventListener("pointercancel",e),s=setInterval((()=>{Date.now()-n>500&&this.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{shiftKey:a}}))}),100)}}}}customElements.define("x-stepper",el);class il extends HTMLElement{static observedAttributes=["value"];static#E=Hs`<template><div id="preview"></div></template>`;static#z=Os`:host{display:block;width:18px;height:18px;cursor:default;box-sizing:border-box;overflow:hidden;background-color:#fff;background-size:6px 6px;background-position:0 0,0 3px,3px -3px,-3px 0;background-image:linear-gradient(45deg,#d6d6d6 25%,transparent 25%),linear-gradient(-45deg,#d6d6d6 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#d6d6d6 75%),linear-gradient(-45deg,transparent 75%,#d6d6d6 75%)}#preview{width:100%;height:100%;position:relative}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"white"}set value(t){this.setAttribute("value",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[il.#z],this.#S.append(document.importNode(il.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#Ni()}attributeChangedCallback(t){"value"===t&&this.#Ni()}#Ni(){this["#preview"].style.background=this.value}}customElements.define("x-swatch",il);class sl extends HTMLElement{static observedAttributes=["toggled","disabled"];static#E=Hs`<template><main id="main"><div id="indicator" part="indicator"><div id="indicator-track" part="indicator-track"><div id="indicator-thumb" part="indicator-thumb" style="transition: none;"></div></div></div><div id="description"><slot></slot></div></main></template>`;static#z=Os`:host{display:block;width:fit-content;margin:2px 0}:host([disabled]){opacity:.4;pointer-events:none}#main{display:flex;align-items:center}#indicator{position:relative;width:34px;height:15px;display:flex;align-items:center}#indicator-track{display:flex;align-items:center;width:100%;height:65%;background:currentColor;border-radius:999px}#indicator-thumb{position:absolute;left:0;width:16px;height:16px;background:currentColor;border-radius:999px;transition:left .2s cubic-bezier(.4, 0, .2, 1)}:host([toggled]) #indicator-thumb{left:calc(100% - 16px)}:host([mixed]) #indicator-thumb{left:calc(50% - 16px / 2)}#description{flex:1}`;get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#N=0;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[sl.#z],this.#S.append(document.importNode(sl.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#_(t)))}connectedCallback(){jn(100).then((()=>this["#indicator-thumb"].style.transition=null)),this.#Y()}disconnectedCallback(){this["#indicator-thumb"].style.transition="none"}attributeChangedCallback(t){"toggled"===t?this.#ut():"disabled"===t&&this.#mt()}#Y(){this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#ut(){this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled)}#mt(){this.#Y()}#F(t){if(t.buttons>1)t.preventDefault();else if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}}async#R(t){this.mixed?this.mixed=!1:this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle"))}#_(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-switch",sl);class nl extends HTMLElement{static observedAttributes=["selected","disabled"];static#E=Hs`<template><div id="selection-indicator" part="selection-indicator"></div><div id="content"><slot></slot></div></template>`;static#z=Os`:host{position:relative;display:flex;align-items:center;justify-content:center;min-height:30px;padding:2px 12px;box-sizing:border-box;cursor:default;user-select:none;-webkit-user-select:none;box-sizing:border-box;font-size:14px}:host(:focus){z-index:10;outline:0}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}#content{display:inherit;flex-flow:inherit;align-items:inherit;z-index:100}#selection-indicator{display:none;width:100%;height:0;background:var(--accent-color);position:absolute;bottom:0;left:0}:host([selected]) #selection-indicator{display:block}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):""}set value(t){this.setAttribute("value",t)}get selected(){return this.hasAttribute("selected")}set selected(t){t?this.setAttribute("selected",""):this.removeAttribute("selected")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[nl.#z],this.#S.append(document.importNode(nl.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#F(t)))}connectedCallback(){this.#Y()}attributeChangedCallback(t){("selected"===t||"disabled"===t)&&this.#Y()}animateSelectionIndicator(t){return new Promise((async e=>{if("0px"!==getComputedStyle(this["#selection-indicator"]).height){let e=this.getBoundingClientRect(),i=t.getBoundingClientRect(),s=this["#selection-indicator"].animate([{left:"0px",width:e.width+"px"},{left:i.left-e.left+"px",width:i.width+"px"}],{duration:100,iterations:1,delay:0,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"});await s.finished}e()}))}#Y(){this.setAttribute("role","tab"),this.setAttribute("aria-selected",this.selected),this.setAttribute("aria-disabled",this.disabled),this.setAttribute("tabindex",this.selected?"0":"-1")}async#F(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Zn(this.parentNode,"[tabindex]");e&&e.focus()}if(!(t.buttons>1)){this.setPointerCapture(t.pointerId);{let t,e=Date.now();this.setAttribute("pressed",""),this.addEventListener("pointerup",t=async()=>{if(this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),!0===this.selected){let t=Date.now()-e,i=100;t<i&&await jn(i-t)}this.removeAttribute("pressed")}),this.addEventListener("pointercancel",t)}}}}customElements.define("x-tab",nl);class al extends HTMLElement{static#E=Hs`<template><slot></slot></template>`;static#z=Os`:host{position:relative;display:flex;margin:0 auto;width:fit-content;max-width:100%;box-sizing:border-box;justify-content:center}::slotted(x-tab){flex:0}`;get value(){let t=this.querySelector("x-tab[selected]");return t?t.value:null}set value(t){let e=[...this.querySelectorAll("x-tab")],i=null===t?null:e.find((e=>e.value===t));for(let t of e)t.selected=t===i}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[al.#z],this.#S.append(document.importNode(al.#E.content,!0)),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#_(t)))}connectedCallback(){this.setAttribute("role","tablist")}async#R(t){if(!(t.buttons>1)&&t.target.closest("x-tab")){let e=this.querySelectorAll("x-tab"),i=t.target.closest("x-tab"),s=this.querySelector("x-tab[selected]");if(i!==s){s&&await s.animateSelectionIndicator(i);for(let t of e)t.selected=t===i;this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}}#_(t){if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=t.target;e.querySelector("x-label"),t.preventDefault(),e.click()}else if("ArrowLeft"===t.code){let e=[...this.querySelectorAll("x-tab:not([disabled])")],i=this.querySelector('x-tab[tabindex="0"]');if(t.target,t.preventDefault(),i&&e.length>0){let t=e.indexOf(i),s=e[t-1]||e[e.length-1];i.tabIndex=-1,s.tabIndex=0,s.focus()}}else if("ArrowRight"===t.code){let e=[...this.querySelectorAll("x-tab:not([disabled])")],i=this.querySelector('x-tab[tabindex="0"]');if(t.target,t.preventDefault(),i&&e.length>0){let t=e.indexOf(i),s=e[t+1]||e[0];i.tabIndex=-1,s.tabIndex=0,s.focus()}}}}customElements.define("x-tabs",al);class ll extends HTMLElement{static#E=Hs`<template><div id="container"><div id="scope" part="scope"><slot id="scope-slot" name="scope"></slot></div><main id="main" part="main"><slot></slot><svg id="remove-button" part="remove-button" width="12" height="12" viewBox="0 0 100 100"><path id="remove-button-path"></path></svg></main></div></template>`;static#z=Os`:host{display:inline-block;height:25px;box-sizing:border-box;overflow:hidden;color:var(--text-color);border-width:1px;border-style:solid}:host([toggled]){background:gray;color:#fff;outline:0}:host([disabled]){opacity:.5}:host([hidden]){display:none}:host(:focus){outline:0}#container{width:100%;height:100%;display:flex;align-items:center;justify-content:center}#scope{height:100%;padding:0 6px;display:none;align-items:center;justify-content:center;border-right-width:1px;border-right-style:solid}:host([scoped]) #scope{display:flex}#main{height:100%;padding:0 6px;display:flex;align-items:center;justify-content:center}#remove-button{display:none;opacity:.8;width:12px;height:12px;vertical-align:middle;margin-left:4px;fill:currentColor;color:inherit;--path-data:M 25 16 L 50 41 L 75 16 L 84 25 L 59 50 L 84 75 L 75 84 L 50 59 L 25 84 L 16 75 L 41 50 L 16 25 Z}:host([removable]) #remove-button{display:block}#remove-button:hover{background:rgba(0,0,0,.1);opacity:1}#remove-button path{fill:inherit;pointer-events:none}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get removable(){return this.hasAttribute("removable")}set removable(t){t?this.setAttribute("removable",""):this.removeAttribute("removable")}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#L=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[ll.#z],this.#S.append(document.importNode(ll.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this["#scope-slot"].addEventListener("slotchange",(()=>this.#Nn())),this["#remove-button"].addEventListener("click",(t=>this.#Fn(t)))}connectedCallback(){this.#Gn(),this.#Nn(),Gn.addEventListener("themechange",this.#L=()=>this.#Gn()),this.closest("x-tags")?(this.tabIndex=0,this.removable=!1):this.closest("x-tagsinput")?(this.toggled=!1,this.tabIndex=0,this.removable=!0):this.removable=!1}disconnectedCallback(){Gn.removeEventListener("themechange",this.#L)}#Fn(t){t.buttons<=1&&this.dispatchEvent(new CustomEvent("remove",{bubbles:!0}))}#Gn(){let t=getComputedStyle(this["#remove-button"]).getPropertyValue("--path-data");this["#remove-button-path"].setAttribute("d",t)}#Nn(){0===this["#scope-slot"].assignedElements().length?this.removeAttribute("scoped"):this.setAttribute("scoped","")}}customElements.define("x-tag",ll);class rl extends HTMLElement{static#E=Hs`<template><slot></slot></template>`;static#z=Os`:host{display:flex;box-sizing:border-box;align-items:center;justify-content:flex-start}:host([hidden]){display:none}`;get value(){return[...this.children].filter((t=>"x-tag"===t.localName)).filter((t=>t.toggled)).map((t=>t.value)).filter((t=>null!==t))}set value(t){let e=[...this.children].filter((t=>"x-tag"===t.localName));for(let i of e)i.toggled=t.includes(i.value)}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[rl.#z],this.#S.append(document.importNode(rl.#E.content,!0)),this.addEventListener("pointerdown",(t=>this.#F(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#_(t)))}#F(t){if(t.buttons>1)t.preventDefault();else if(t.preventDefault(),!1===this.matches(":focus")){let t=Zn(this.parentNode,"*[tabindex]:not(a)");this.addEventListener("pointerup",(()=>{t?t.focus():this.blur()}),{once:!0})}}#R(t){let e=t.target.closest("x-tag");e&&!1===t.defaultPrevented&&(e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{detail:e})))}#_(t){if(!1===t.defaultPrevented)if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector("x-tag:focus");e&&(t.preventDefault(),e.click())}else if("ArrowRight"===t.code){let t=this.querySelector("x-tag:focus");t&&(t.nextElementSibling?t.nextElementSibling.focus():t!==t.parentElement.firstElementChild&&t.parentElement.firstElementChild.focus())}else if("ArrowLeft"===t.code){let t=this.querySelector("x-tag:focus");t&&(t.previousElementSibling?t.previousElementSibling.focus():t!==t.parentElement.lastElementChild&&t.parentElement.lastElementChild.focus())}}}customElements.define("x-tags",rl);class ol extends HTMLElement{static observedAttributes=["spellcheck","disabled"];static#E=Hs`<template><main id="main"><div id="tags"><slot></slot><input id="input" type="text" part="input" spellcheck="false" tabindex="0"></div></main><x-popover id="suggestions-popover" part="suggestions"><div id="suggested-tags"></div></x-popover></template>`;static#z=Os`:host{display:block;position:relative;min-height:29px;font-size:12px}:host(:focus){z-index:10}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{width:100%;height:100%;cursor:text}#tags{display:flex;flex-wrap:wrap}:host([mixed]) #tags{opacity:.7}#input{width:10px;height:25px;margin:2px;padding:0 3px 0 6px;box-sizing:border-box;line-height:25px;color:inherit;background:0 0;border:none;outline:0;font-size:inherit}#suggestions-popover{width:200px;max-height:200px;padding:4px;box-sizing:border-box}#suggestions-popover #suggested-tags{flex:1;overflow:auto}#suggestions-popover x-tag{display:block;margin:4px 0 0 0}#suggestions-popover x-tag:first-child{margin-top:0}`;get value(){return[...this.children].filter((t=>"x-tag"===t.localName)).map((t=>t.value)).filter((t=>null!==t))}get delimiter(){return this.hasAttribute("delimiter")?this.getAttribute("delimiter"):","}set delimiter(t){this.setAttribute("delimiter",t)}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get suggestions(){return this.hasAttribute("suggestions")}set suggestions(t){t?this.setAttribute("suggestions",""):this.removeAttribute("suggestions")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;#N=0;constructor(){super(),this.#S=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#S.adoptedStyleSheets=[Gn.themeStyleSheet,ol.#z],this.#S.append(document.importNode(ol.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.#S.addEventListener("pointerdown",(t=>this.#Js(t))),this.#S.addEventListener("remove",(t=>this.#Fn(t))),this.#S.addEventListener("keydown",(t=>this.#_(t))),this["#input"].addEventListener("focusin",(t=>this.#Xn(t))),this["#input"].addEventListener("focusout",(t=>this.#_n(t))),this["#input"].addEventListener("input",(t=>this.#$t(t)))}connectedCallback(){this.#Zn(),this.#Y()}attributeChangedCallback(t,e,i){e!==i&&("spellcheck"===t?this.#Ji():"disabled"===t&&this.#mt())}clear(){let t=[...this.children].filter((t=>"x-tag"===t.localName));if(t.length>0){for(let e of t)e.remove(),this.dispatchEvent(new CustomEvent("remove",{detail:e}));this.#Un(),this.#Zn(),this.dispatchEvent(new CustomEvent("change"))}}getSuggestions(t){return[]}#Yn(){let t=this["#input"].value;if(this["#input"].value="",this.#qn(),t.endsWith(this.delimiter)&&(t=t.substring(0,t.length-1)),t=t.trim(),t.length>0&&!1===this.value.includes(t)){let e;if(t.includes(":")){let[i,s]=t.split(":").map((t=>t.trim()));e=Hs`<x-tag class="tag" value="${t}" removable><x-label slot="scope">${i}</x-label><x-label>${s}</x-label></x-tag>`}else e=Hs`<x-tag class="tag" value="${t}" removable><x-label>${t}</x-label></x-tag>`;this.append(e),this.dispatchEvent(new CustomEvent("add",{detail:e})),this.dispatchEvent(new CustomEvent("change"))}this["#input"].style.minWidth="0px",this["#input"].style.minWidth=this["#input"].scrollWidth+"px"}#Wn(){this["#suggested-tags"].innerHTML="",!0===this["#suggestions-popover"].opened&&this["#suggestions-popover"].close()}#Js(t){if(t.target===this["#input"])this["#input"].value.length>0&&this.#Wn();else if(t.target===this["#main"]||t.target===this["#tags"])t.preventDefault(),this["#input"].focus(),this.#Un(!1);else if(t.target.closest("x-popover")){t.preventDefault();let e=t.target.closest("x-tag");e&&(this.append(e),this["#input"].value="",this.#qn(),this.#Un(!1),this.dispatchEvent(new CustomEvent("add",{detail:e})),this.dispatchEvent(new CustomEvent("change")))}else t.target.closest("x-tag")&&""!==this["#input"].value&&(this.#Yn(),this.#Un(),this.#Zn())}#Fn(t){t.stopPropagation();let e=t.target;e.remove(),this.#Zn(),this.dispatchEvent(new CustomEvent("remove",{detail:e})),this.dispatchEvent(new CustomEvent("change"))}#Ji(){this["#input"].spellcheck=this.spellcheck}#mt(){this.#Y()}async#Xn(){this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#_n(){this.#Yn(),this.#Zn(),this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),this["#suggestions-popover"].close()}#$t(t){this["#input"].value.includes(this.delimiter)?(this.#Yn(),this.#Zn(),this.#qn(),this.#Un(!1)):(this.dispatchEvent(new CustomEvent("input")),this.#Zn(),this.#qn(),this.#Un("deleteContentBackward"!==t.inputType))}#_(t){if("Enter"===t.code||"NumpadEnter"===t.code)t.target===this["#input"]&&(t.preventDefault(),this.#Yn(),this.#Un(!1),this.#Zn(),this.#qn());else if("Backspace"===t.code){if(t.target===this["#input"]){if(0===this["#input"].value.length){let t=[...this.children].filter((t=>"x-tag"===t.localName)),e=t[t.length-1]||null;e&&(e.remove(),this.#Un(),this.#Zn(),this.dispatchEvent(new CustomEvent("remove",{detail:e})),this.dispatchEvent(new CustomEvent("change")))}}else if("x-tag"===t.target.localName){let e=[...this.children].filter((t=>"x-tag"===t.localName)),i=t.target,s=e.indexOf(i),n=e[s+1]||null,a=e[s-1]||null;n?n.focus():a?a.focus():this["#input"].focus(),i.remove(),this.#Zn(),this.dispatchEvent(new CustomEvent("remove",{detail:i})),this.dispatchEvent(new CustomEvent("change"))}}else if("ArrowDown"===t.code){if(this["#suggestions-popover"].opened){let e=[...this["#suggested-tags"].children];if(e.length>1){t.preventDefault();let i=null;{let t=e.find((t=>t.toggled));if(t){t.toggled=!1;let s=e.indexOf(t);i=e[s+1]||e[0]}else i=e[0]}i.toggled=!0,i.scrollIntoViewIfNeeded();{let t=i.querySelector("x-label").textContent,e=this["#input"].selectionStart;this["#input"].value=t,this.#qn(),this.#Vn(e,t.length)}}}}else if("ArrowUp"===t.code){if(this["#suggestions-popover"].opened){let e=[...this["#suggested-tags"].children];if(e.length>1){t.preventDefault();let i=null;{let t=e.find((t=>t.toggled));if(t){t.toggled=!1;let s=e.indexOf(t);i=e[s-1]||e[e.length-1]}else i=e[e.length-1]}i.toggled=!0,i.scrollIntoViewIfNeeded();{let t=i.querySelector("x-label").textContent,e=this["#input"].selectionStart;this["#input"].value=t,this.#qn(),this.#Vn(e,t.length)}}}}else"ArrowLeft"!==t.code&&"ArrowRight"!==t.code||this.#Wn()}#It(){this.#Zn()}#Zn(){let t=this.querySelector(":scope > x-label");t&&(t.hidden=this.value.length>0||this["#input"].value.length>0)}#Y(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#qn(){this["#input"].style.minWidth="0px",this["#input"].style.minWidth=this["#input"].scrollWidth+"px"}#Vn(t=0,e=this["#input"].value.length){this["#input"].selectionStart=t,this["#input"].selectionEnd=e}#Un(t=!0){if(this.suggestions){let e=this["#input"].value;this["#input"].selectionStart!==this["#input"].selectionEnd&&(e=e.substring(0,this["#input"].selectionStart));let i=this.getSuggestions(e);if(i.length>0&&!0===t){let t=this["#input"].value,e=i[0].querySelector("x-label").textContent;this["#input"].value=e,this.#qn(),this.#Vn(t.length,e.length)}if(0===i.length)this["#suggested-tags"].innerHTML="",!0===this["#suggestions-popover"].opened&&this["#suggestions-popover"].close();else{let s=this["#input"].getBoundingClientRect();this["#suggested-tags"].innerHTML="",this["#suggested-tags"].append(...i),!0===t&&e.length>0&&(i[0].toggled=!0),!1===this["#suggestions-popover"].opened||this["#suggestions-popover"].close(!1),this["#suggestions-popover"].open(s),this["#suggested-tags"].scrollTop=0}}}}customElements.define("x-tagsinput",ol);class hl extends HTMLElement{static observedAttributes=["value","spellcheck","disabled","validation"];static#E=Hs`<template><main id="main"><slot></slot><div id="editor" contenteditable="plaintext-only" spellcheck="false"></div></main></template>`;static#z=Os`:host{display:block;position:relative;width:100%;min-height:100px;box-sizing:border-box;background:#fff;font-size:12.5px;overflow:auto}:host(:hover){cursor:text}:host([mixed]){color:rgba(0,0,0,.7)}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host([error]) ::selection{color:#fff;background-color:#d50000}::-webkit-scrollbar{max-width:6px;max-height:6px;background:0 0}::-webkit-scrollbar-track{border-radius:25px}::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.2);border-radius:25px}::-webkit-scrollbar-corner{display:none}#main{display:flex;flex-flow:column;width:100%;min-height:100%}#editor{flex:1;padding:2px 6px;box-sizing:border-box;color:inherit;background:0 0;border:none;outline:0;font-family:inherit;font-size:inherit}`;get value(){return this["#editor"].textContent}set value(t){this["#editor"].textContent=t,"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Wi)&&this.reportValidity(),this.#xt()}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get minLength(){return this.hasAttribute("minlength")?parseInt(this.getAttribute("minlength")):0}set minLength(t){this.setAttribute("minlength",t)}get maxLength(){return this.hasAttribute("maxlength")?parseInt(this.getAttribute("maxlength")):Infinity}set maxLength(t){this.setAttribute("maxlength",t)}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get validation(){return this.hasAttribute("validation")?this.getAttribute("validation"):"auto"}set validation(t){this.setAttribute("validation",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#S=null;#Kn="";#N=0;#wt=null;#Wi=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#S.adoptedStyleSheets=[hl.#z],this.#S.append(document.importNode(hl.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("focusin",(t=>this.#zt(t))),this.addEventListener("focusout",(t=>this.#St(t))),this["#editor"].addEventListener("click",(t=>this.#Jn(t))),this["#editor"].addEventListener("input",(t=>this.#tn(t))),"gecko"===On()&&(this["#editor"].setAttribute("contenteditable",""),this["#editor"].addEventListener("beforeinput",(t=>{if("insertFromPaste"===t.inputType&&t.dataTransfer.types.includes("text/plain")){t.preventDefault();let e=window.getSelection(),i=e.getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(t.dataTransfer.getData("text/plain"))),e.collapseToEnd()}})))}connectedCallback(){this.#Y(),this.#xt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Wi)&&this.reportValidity()}attributeChangedCallback(t){"value"===t?this.#Ot():"spellcheck"===t?this.#Ji():"disabled"===t?this.#mt():"validation"===t&&this.#is()}reportValidity(){let t=new CustomEvent("beforevalidate",{bubbles:!1,cancelable:!0});return this.dispatchEvent(t),!1===t.defaultPrevented&&(this.value.length<this.minLength?this.#wt={href:"#entered-text-is-too-short"}:this.value.length>this.maxLength?this.#wt={href:"#entered-text-is-too-long"}:this.required&&0===this.value.length?this.#wt={href:"#required-field"}:this.#wt=null,this.#Nt()),null===this.#wt&&null===this.#Wi}setCustomValidity(t){this.#Wi=""===t?null:t,this.#Nt()}#Nt(){let t=this.#Wi||this.#wt;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Xn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;jn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#xt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#Y(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#N=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#N>0?this.#N:0),this.#N=0)}#Ot(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&document.execCommand("selectAll")}#Ji(){this["#editor"].spellcheck=this.spellcheck}#mt(){this["#editor"].disabled=this.disabled,this.#Y()}#is(){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Wi)&&this.reportValidity()}#R(){this.#Nt()}#zt(){this.#Kn=this.value,this.#Nt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#St(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),"webkit"!==On()&&this.#S.getSelection().collapse(this["#main"]),"auto"===this.validation||"instant"===this.validation?this.reportValidity():"manual"===this.validation&&this.#Nt(),null!==(this.#wt||this.#Wi)||this.value===this.#Kn&&!this.mixed||(this.mixed=!1,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))}#Jn(t){t.detail>=4&&document.execCommand("selectAll")}#tn(t){this.dispatchEvent(new CustomEvent("input",{bubbles:!0})),this.#xt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Wi)&&this.reportValidity()}}customElements.define("x-texteditor",hl);class dl extends HTMLElement{static observedAttributes=["type"];static#Qn=Hs`<template><svg data-type="ring" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40"><animate attributeName="stroke-dasharray" values="0,1000; 200,1000; 245,1000" begin="0s" dur="2s" calcMode="spline" keyTimes="0; 0.5; 1" keySplines="0.8 0.25 0.25 0.9; 0.8 0.25 0.25 0.9" repeatCount="indefinite"></animate><animate attributeName="stroke-dashoffset" values="0px;0px;-260px" begin="0s" dur="2s" keyTimes="0; 0.5; 1" repeatCount="indefinite"></animate><animateTransform type="rotate" additive="sum" attributeName="transform" values="0;360" begin="0s" dur="2s" fill="freeze" repeatCount="indefinite" keyTimes="0; 1"></animateTransform></circle></svg></template>`;static#ta=Hs`<template><svg data-type="spin" viewBox="0 0 100 100"><rect transform="rotate(  0 50 50) translate(0 -38)"></rect><rect transform="rotate( 30 50 50) translate(0 -38)"></rect><rect transform="rotate( 60 50 50) translate(0 -38)"></rect><rect transform="rotate( 90 50 50) translate(0 -38)"></rect><rect transform="rotate(120 50 50) translate(0 -38)"></rect><rect transform="rotate(150 50 50) translate(0 -38)"></rect><rect transform="rotate(180 50 50) translate(0 -38)"></rect><rect transform="rotate(210 50 50) translate(0 -38)"></rect><rect transform="rotate(240 50 50) translate(0 -38)"></rect><rect transform="rotate(270 50 50) translate(0 -38)"></rect><rect transform="rotate(300 50 50) translate(0 -38)"></rect><rect transform="rotate(330 50 50) translate(0 -38)"></rect></svg></template>`;static#z=Os`:host{display:block;width:30px;height:30px;box-sizing:border-box}:host([hidden]){display:none}:host([type=ring]){color:#4285f4}:host([type=spin]){color:#404040}svg{color:inherit;width:100%;height:100%}svg[data-type=ring] circle{fill:none;stroke:currentColor;stroke-linecap:round;stroke-width:10px;stroke-dasharray:10,1000;transform-box:fill-box;transform-origin:50% 50%}svg[data-type=spin] rect{x:46.5px;y:40px;width:7px;height:22px;rx:5px;ry:5px;fill:currentColor;animation-name:spin-animation;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite;animation-delay:0s}svg[data-type=spin] rect:first-child{animation-delay:calc(1s *  1/12)}svg[data-type=spin] rect:nth-child(2){animation-delay:calc(1s *  2/12)}svg[data-type=spin] rect:nth-child(3){animation-delay:calc(1s *  3/12)}svg[data-type=spin] rect:nth-child(4){animation-delay:calc(1s *  4/12)}svg[data-type=spin] rect:nth-child(5){animation-delay:calc(1s *  5/12)}svg[data-type=spin] rect:nth-child(6){animation-delay:calc(1s *  6/12)}svg[data-type=spin] rect:nth-child(7){animation-delay:calc(1s *  7/12)}svg[data-type=spin] rect:nth-child(8){animation-delay:calc(1s *  8/12)}svg[data-type=spin] rect:nth-child(9){animation-delay:calc(1s *  9/12)}svg[data-type=spin] rect:nth-child(10){animation-delay:calc(1s * 10/12)}svg[data-type=spin] rect:nth-child(11){animation-delay:calc(1s * 11/12)}svg[data-type=spin] rect:nth-child(12){animation-delay:calc(1s * 12/12)}@keyframes spin-animation{0%{opacity:1}100%{opacity:0}}`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"ring"}set type(t){this.setAttribute("type",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#S=null;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[dl.#z]}connectedCallback(){this.#It()}attributeChangedCallback(t,e,i){e!==i&&"type"===t&&this.#It()}#It(){let t=this.#S.firstElementChild,e="ring"===this.type?dl.#Qn:dl.#ta;null===t?this.#S.append(document.importNode(e.content,!0)):t.dataset.type!==this.type&&t.replaceWith(document.importNode(e.content,!0)),!1===this.hasAttribute("type")&&this.setAttribute("type",this.type)}}customElements.define("x-throbber",dl);class cl extends HTMLElement{static observedAttributes=["disabled"];static#E=Hs`<template><slot></slot></template>`;static#z=Os`:host{display:none;bottom:-30px;position:fixed;padding:3px 10px;width:fit-content;height:fit-content;max-width:300px;box-sizing:border-box;pointer-events:none;border-width:1px;border-style:solid;font-size:12px;z-index:99999;--align:bottom;--whitespace:8px;--open-transition:0 opacity cubic-bezier(0.4, 0, 0.2, 1);--close-transition:0 opacity cubic-bezier(0.4, 0, 0.2, 1)}:host([animating]),:host([opened]){display:block}`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"hint"}set type(t){this.setAttribute("type",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get opened(){return this.hasAttribute("opened")}#S=null;#fn=null;#vn;constructor(){super(),this.#S=this.attachShadow({mode:"closed"}),this.#S.adoptedStyleSheets=[cl.#z],this.#S.append(document.importNode(cl.#E.content,!0));for(let t of this.#S.querySelectorAll("[id]"))this["#"+t.id]=t}attributeChangedCallback(t){"disabled"===t&&this.disabled&&this.opened&&this.close()}open(t,e=!0){return new Promise((async i=>{if(!1===this.opened&&this.isConnected){if(this.setAttribute("opened",""),this.#yn(t),this.#fn=Un(this),this.#fn&&this.#fn.addEventListener("scroll",this.#vn=()=>{this.close()},{once:!0}),e){let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Ia(t);"opacity"===e&&await this.animate({opacity:["0","1"]},{duration:i,easing:s}).finished}this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this}))}i()}))}close(t=!0){return new Promise((async e=>{if(!0===this.opened){if(this.removeAttribute("opened"),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this})),this.#fn.removeEventListener("scroll",this.#vn),t){let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Ia(t);this.setAttribute("animating",""),"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished}this.removeAttribute("animating")}e()}))}#yn(t){let e=getComputedStyle(this).getPropertyValue("--align").trim();parseInt(getComputedStyle(this).borderWidth);let i=parseInt(getComputedStyle(this).getPropertyValue("--whitespace")),s=0,n=0,a=null;this.style.maxWidth=null,this.style.maxHeight=null,this.style.left="0px",this.style.top="0px";{let e=wi(this.getBoundingClientRect());0===e.top&&0===e.left||(s=-e.left,n=-e.top),a=t instanceof DOMPoint?new DOMRect(t.x,t.y,0,0):t instanceof DOMRect?t:t instanceof Element?t.getBoundingClientRect():new DOMRect}if("bottom"===e||"top"===e){let t=(t=!1)=>{this.style.maxHeight=null;let e=wi(this.getBoundingClientRect()),s=0;if(this.style.top=n+a.bottom+i+"px",e=wi(this.getBoundingClientRect()),s=e.bottom+8-window.innerHeight,t&&s>0){let t=e.height-s;s=0,this.style.maxHeight=t+"px"}return s},l=(t=!1)=>{this.style.maxHeight=null;let e=wi(this.getBoundingClientRect()),s=0;if(this.style.top=n+a.top-i-e.height+"px",e=wi(this.getBoundingClientRect()),s=-(e.top-8),t&&s>0){let t=e.height-s;s=0,this.style.maxHeight=t+"px",this.style.top=n+a.top-i-t+"px"}return s},r=()=>{this.style.maxWidth=null;let t=wi(this.getBoundingClientRect()),e=0,i=0;return this.style.left=s+a.left+a.width/2-t.width/2+"px",t=wi(this.getBoundingClientRect()),e=-(t.left-8),i=t.right+8-window.innerWidth,[e,i]},o=(t=!1)=>{this.style.maxWidth=null;let e=wi(this.getBoundingClientRect()),i=0;if(this.style.left=s+window.innerWidth-8-e.width+"px",e=wi(this.getBoundingClientRect()),i=-(e.left-8),t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px",this.style.left=s+window.innerWidth-8-t+"px"}return i},h=(t=!1)=>{this.style.maxWidth=null;let e=wi(this.getBoundingClientRect()),i=0;if(this.style.left=s+8+"px",e=wi(this.getBoundingClientRect()),i=e.right+8-window.innerWidth,t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px"}return i};if("bottom"===e){let e=t();if(e>0){let i=l();i>0&&(i>e?t(!0):l(!0))}}else if("top"===e){let e=l();if(e>0){let i=t();i>0&&(i>e?l(!0):t(!0))}}{let[t,e]=r();e>0?(t=o(),t>0&&o(!0)):t>0&&(e=h(),e>0&&h(!0))}}else if("right"===e||"left"===e){let t=(t=!1)=>{this.style.maxWidth=null;let e=wi(this.getBoundingClientRect()),n=0;if(this.style.left=s+a.right+i+"px",e=wi(this.getBoundingClientRect()),n=e.right+8-window.innerWidth,t&&n>0){let t=e.width-n;n=0,this.style.maxWidth=t+"px"}return n},l=(t=!1)=>{this.style.maxWidth=null;let e=wi(this.getBoundingClientRect()),n=0;if(this.style.left=s+a.left-i-e.width+"px",e=wi(this.getBoundingClientRect()),n=-(e.left-8),t&&n>0){let t=e.width-n;n=0,this.style.maxWidth=t+"px",this.style.left=s+a.left-i-t+"px"}return n},r=()=>{this.style.maxHeight=null;let t=wi(this.getBoundingClientRect()),e=0,i=0;return this.style.top=n+a.top+a.height/2-t.height/2+"px",t=wi(this.getBoundingClientRect()),e=-(t.top-8),i=t.bottom+8-window.innerHeight,[e,i]},o=(t=!1)=>{this.style.maxHeight=null;let e=wi(this.getBoundingClientRect()),i=0;if(this.style.top=n+window.innerHeight-8-e.height+"px",e=wi(this.getBoundingClientRect()),i=-(e.top-8),t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px",this.style.top=n+window.innerHeight-8-t+"px"}return i},h=(t=!1)=>{this.style.maxHeight=null;let e=wi(this.getBoundingClientRect()),i=0;if(this.style.top=n+8+"px",e=wi(this.getBoundingClientRect()),i=e.bottom+8-window.innerHeight,t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px"}return i};if("right"===e){let e=t();if(e>0){let i=l();i>0&&(i>e?t(!0):l(!0))}}else if("left"===e){let e=l();if(e>0){let i=t();i>0&&(i>e?l(!0):t(!0))}}{let[t,e]=r();e>0?(t=o(),t>0&&o(!0)):t>0&&(e=h(),e>0&&h(!0))}}}}customElements.define("x-tooltip",cl);export{Gn as default};